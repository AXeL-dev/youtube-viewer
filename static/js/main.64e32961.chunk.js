(this["webpackJsonpyoutube-viewer"]=this["webpackJsonpyoutube-viewer"]||[]).push([[0],{120:function(e,t){},121:function(e,t){},122:function(e,t,n){"use strict";var i,r,a;n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.All="all",e.Recent="recent",e.WatchLater="watch-later"}(i||(i={})),function(e){e[e.OneDay=1]="OneDay",e[e.ThreeDays=3]="ThreeDays",e[e.SevenDays=7]="SevenDays"}(r||(r={})),function(e){e[e.String=0]="String",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean",e[e.List=3]="List"}(a||(a={}))},123:function(e,t){},124:function(e,t){},20:function(e,t,n){"use strict";var i=n(120);n.o(i,"HomeView")&&n.d(t,"HomeView",(function(){return i.HomeView})),n.o(i,"SettingType")&&n.d(t,"SettingType",(function(){return i.SettingType})),n.o(i,"VideosSeniority")&&n.d(t,"VideosSeniority",(function(){return i.VideosSeniority}));var r=n(121);n.o(r,"HomeView")&&n.d(t,"HomeView",(function(){return r.HomeView})),n.o(r,"SettingType")&&n.d(t,"SettingType",(function(){return r.SettingType})),n.o(r,"VideosSeniority")&&n.d(t,"VideosSeniority",(function(){return r.VideosSeniority}));var a=n(122);n.d(t,"HomeView",(function(){return a.a})),n.d(t,"SettingType",(function(){return a.b})),n.d(t,"VideosSeniority",(function(){return a.c}));n(123),n(124)},219:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(49),o=n.n(a),c=n(77),s=n(26),l=n(8),d=n(293),u=n(282),b=n(4),h=n(1);function j(e){var t=e.children,n=e.sx;return Object(h.jsxs)(d.a,{sx:{display:"flex",flexDirection:"row",height:"100vh"},children:[Object(h.jsx)(It,{}),Object(h.jsx)(d.a,{sx:Object(b.a)({flexGrow:1,display:"flex",flexDirection:"column"},n),children:t})]})}var f=n(295),p=n(98),x=n(296),v=n(134),m=n.n(v),O=n(135),g=n.n(O),y=n(136),w=n.n(y),C=n(137),S=n.n(C),k=n(138),V=n.n(k),R=n(268),T=n(131),A=n.n(T),D=n(6),I=n(294),_=function(e){return{backgroundColor:e.palette.primary.main,color:"#fff","& .MuiListItemIcon-root":{color:"#fff"}}},L=Object(D.a)(I.a)((function(e){var t=e.theme;return{borderRadius:"5px 0 0 5px",marginBottom:t.spacing(1),"&.Mui-selected":_(t),"&.Mui-selected:hover":_(t)}})),E=n(267),P=Object(D.a)(E.a)((function(e){e.theme;return{"& .MuiTypography-root":{display:"flex",alignItems:"center"}}})),W=n(286),z=Object(D.a)(W.a)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{position:"relative",transform:"none",backgroundColor:t.palette.primary.dark,color:t.palette.common.white,minWidth:24,height:24,fontSize:"0.75rem",marginLeft:t.spacing(3),borderRadius:t.spacing(1.5)}}}));function M(e){var t=e.icon,n=e.text,i=e.badge,a=e.hasWarning,o=e.to,l=Object(s.g)().pathname===o,d=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return Object(h.jsx)(c.b,Object(b.a)({to:o,ref:t},e))}))}),[o]);return Object(h.jsxs)(L,{component:d,selected:l,disableRipple:!0,children:[t?Object(h.jsx)(R.a,{children:t}):null,Object(h.jsx)(P,{primary:Object(h.jsxs)(h.Fragment,{children:[n,i&&l?Object(h.jsx)(z,{badgeContent:i}):null,a&&!l?Object(h.jsx)(A.a,{sx:{ml:3},color:"warning"}):null]})})]})}var B=Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-viewer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"YouTube viewer",REACT_APP_VERSION:"1.0.0",REACT_APP_YOUTUBE_API_KEY:"AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo"}),H=B.REACT_APP_NAME,N=B.REACT_APP_VERSION;function F(e){var t=e.showVersion;return Object(h.jsxs)(d.a,{component:"span",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",cursor:"default",userSelect:"none"},children:[Object(h.jsx)(_t,{size:32}),Object(h.jsxs)(d.a,{component:"span",sx:{display:"flex",alignItems:"center",color:"text.primary"},children:[Object(h.jsx)(p.a,{variant:"subtitle1",children:H}),t?Object(h.jsxs)(p.a,{variant:"caption",sx:{marginLeft:1,bgcolor:function(e){return"light"===e.palette.mode?"#eee":"transparent"},padding:"3px 6px",border:1,borderColor:function(e){return"light"===e.palette.mode?"transparent":"divider"},borderRadius:"4px",color:"text.primary",fontSize:"0.75rem",lineHeight:1},children:["v",N]}):null]})]})}var G=n(31),U=n.n(G),K=n(44),Y=n(3),J=n(14),q=n(33),X=n(20),Q={defaultView:X.HomeView.All,apiKey:"AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo",darkMode:!1,autoPlayVideos:!0,recentVideosSeniority:X.VideosSeniority.OneDay,recentVideosDisplayOptions:{hideViewedVideos:!1,hideWatchLaterVideos:!1},enableNotifications:!0},Z=Object(b.a)({},Q),$=Object(J.d)({name:"settings",initialState:Z,reducers:{setSettings:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},resetSettings:function(e){return Object(b.a)(Object(b.a)({},e),Q)}}}),ee=$.actions,te=ee.setSettings,ne=(ee.resetSettings,$.reducer),ie=n(66),re=Object(J.d)({name:"channels",initialState:{list:[]},reducers:{setChannels:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},addChannel:function(e,t){var n=t.payload.id;e.list.find((function(e){return e.id===n}))||e.list.push(t.payload)},removeChannel:function(e,t){var n=t.payload.id;e.list=e.list.filter((function(e){return e.id!==n}))},moveChannel:function(e,t){var n=t.payload,i=n.from,r=n.to;e.list=Object(ie.b)(e.list,i,r)},toggleChannel:function(e,t){var n=t.payload.id,i=e.list.find((function(e){return e.id===n}));i&&(i.isHidden=!i.isHidden)},toggleChannelNotifications:function(e,t){var n=t.payload.id,i=e.list.find((function(e){return e.id===n}));i&&(i.notifications=Object(b.a)(Object(b.a)({},i.notifications),{},{isDisabled:!i.notifications||!i.notifications.isDisabled}))}}}),ae=re.actions,oe=ae.setChannels,ce=ae.addChannel,se=ae.removeChannel,le=ae.moveChannel,de=ae.toggleChannel,ue=ae.toggleChannelNotifications,be=re.reducer,he=n(67);function je(e){var t=e.replace("PT","").toUpperCase(),n=a("H"),i=a("M"),r=a("S");return"00"!==n?[n,i,r].join(":"):[i,r].join(":");function a(e){for(var n=0;n<t.length;n++)if(t[n]===e){var i=t.slice(0,n);return 1===i.length&&"H"!==e&&(i="0"+i),t=t.slice(n+1),i}return"00"}}function fe(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=["k","M","G","T","P","E","Z","Y"],r=i.length-1;r>=0;r--)if(e<=-(t=Math.pow(1e3,r+1))||e>=t)return+(e/t).toFixed(n)+i[r];return e}var pe=function(){var e={locales:{prefix:"",sufix:"ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},inWords:function(t){var n=Math.floor((new Date-parseInt(t))/1e3),i=e.locales.separator||" ",r=e.locales.prefix+i,a=0,o={year:n/31536e3,month:n/2592e3,day:n/86400,hour:n/3600,minute:n/60},c=e.locales.seconds;for(var s in o){if((a=Math.floor(o[s]))>1){c=e.locales[s+"s"];break}if(1===a){c=e.locales[s];break}}return(r+=(c=c.replace(/%d/i,a))+i+e.locales.sufix).trim()}};return e}();function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;return t.setDate(t.getDate()-e),t.setHours(0,0,0,0),t}function ve(e){return function(e,t){var n=e instanceof Date?e.getTime():e,i=((t instanceof Date?t.getTime():t)-n)/864e5;return Math.floor(i)}(e,new Date)}function me(e,t,n){var i=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var c=this;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(c,a)}),t),n&&!i&&e.apply(c,a)}}var Oe=n(27);var ge=function(){try{return!!browser}catch(e){return!1}}();function ye(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return browser.tabs.create({url:e,active:t})}var we,Ce=ge?(we="index.html",browser.runtime.getURL(we)):"";function Se(e){browser.browserAction.setBadgeText({text:0===e?"":e.toString()})}function ke(e,t){-1!==navigator.userAgent.indexOf("Firefox")&&browser.browserAction.setBadgeTextColor({color:t}),browser.browserAction.setBadgeBackgroundColor({color:e})}var Ve=n(42),Re=n(133),Te=Object(Ve.d)({baseUrl:"https://www.googleapis.com/youtube/v3/",prepareHeaders:function(e,t){var n=(0,t.getState)().settings.apiKey;return n&&e.set("X-Goog-Api-Key",n),e}}),Ae=Object(Re.a)({reducerPath:"youtubeApi",baseQuery:Te,endpoints:function(){return{}}}),De={findChannelByName:{query:function(e){var t=e.name,n=e.maxResults;return{url:"search",params:{part:"snippet",fields:"pageInfo,items(snippet)",type:"channel",order:"relevance",maxResults:void 0===n?10:n,q:t}}},transformResponse:function(e){return{items:e.items.map((function(e){return{title:e.snippet.title,url:"https://www.youtube.com/channel/".concat(e.snippet.channelId,"/videos"),description:e.snippet.description,thumbnail:e.snippet.thumbnails.medium.url,id:e.snippet.channelId}})),total:e.pageInfo.totalResults}}},getChannelActivities:{query:function(e){var t=e.channel,n=e.publishedAfter,i=e.publishedBefore,r=e.maxResults,a=void 0===r?10:r;return{url:"activities",params:Object(b.a)(Object(b.a)(Object(b.a)({part:"contentDetails",fields:"pageInfo,items(contentDetails)",channelId:t.id},n?{publishedAfter:n}:{}),i?{publishedBefore:i}:{}),{},{maxResults:a})}},transformResponse:function(e){return{items:e.items.filter((function(e){var t;return null===(t=e.contentDetails.upload)||void 0===t?void 0:t.videoId})).map((function(e){return{videoId:e.contentDetails.upload.videoId}})),total:e.pageInfo.totalResults}}},getVideosById:{query:function(e){var t=e.ids,n=e.maxResults,i=void 0===n?10:n;return{url:"videos",params:{part:"snippet,contentDetails,statistics,id",fields:"pageInfo,items(id,contentDetails/duration,statistics/viewCount,snippet(title,channelTitle,channelId,publishedAt,thumbnails/medium))",id:t.slice(0,i).join(",")}}},transformResponse:function(e){return{items:e.items.map((function(e){var t=new Date(e.snippet.publishedAt).getTime();return{id:e.id,title:e.snippet.title,url:"https://www.youtube.com/watch?v=".concat(e.id),duration:je(e.contentDetails.duration),views:fe(e.statistics.viewCount),thumbnail:e.snippet.thumbnails.medium.url,channelId:e.snippet.channelId,channelTitle:e.snippet.channelTitle,publishedAt:t,publishedSince:pe.inWords(t)}})),total:e.pageInfo.totalResults}}}},Ie=Ae.injectEndpoints({endpoints:function(e){return{findChannelByName:e.query(De.findChannelByName),getChannelActivities:e.query(De.getChannelActivities),getVideosById:e.query({queryFn:function(){var e=Object(K.a)(U.a.mark((function e(t,n,i,r){var a,o,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.ids,o=t.maxResults,0!==a.length){e.next=3;break}return e.abrupt("return",{data:{items:[],total:0}});case 3:return e.next=5,r(De.getVideosById.query({ids:a,maxResults:o}));case 5:return c=e.sent,e.abrupt("return",c.data?{data:De.getVideosById.transformResponse(c.data)}:{error:c.error});case 7:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}()}),getChannelVideos:e.query({queryFn:function(){var e=Object(K.a)(U.a.mark((function e(t,n,i,r){var a,o,c,s,l,d,u,h,j;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.channel,o=t.publishedAfter,c=t.maxResults,e.next=3,r(De.getChannelActivities.query({channel:a,publishedAfter:o,maxResults:c}));case 3:if(!(s=e.sent).error){e.next=6;break}return e.abrupt("return",{error:s.error});case 6:if(l=De.getChannelActivities.transformResponse(s.data),d=l.items,u=l.total,0!==(h=d.map((function(e){return e.videoId}))).length){e.next=10;break}return e.abrupt("return",{data:{items:[],total:0}});case 10:return e.next=12,r(De.getVideosById.query({ids:h,maxResults:c}));case 12:return j=e.sent,e.abrupt("return",j.data?{data:Object(b.a)(Object(b.a)({},De.getVideosById.transformResponse(j.data)),{},{total:u})}:{error:j.error});case 14:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}()})}},overrideExisting:!1}),_e=Ie.useFindChannelByNameQuery,Le=(Ie.useGetChannelActivitiesQuery,Ie.useGetVideosByIdQuery),Ee=Ie.useGetChannelVideosQuery,Pe=n(47),We=function(e){return e.channels.list},ze=Object(Pe.a)(We,(function(e){return e.filter((function(e){return!e.isHidden}))})),Me=Object(Pe.a)(We,(function(e){return e.filter((function(e){return e.isHidden}))})),Be=Object(Pe.a)(We,(function(e){return e.filter((function(e){var t=e.isHidden,n=e.notifications;return!t&&!(null===n||void 0===n?void 0:n.isDisabled)}))})),He=(Object(Pe.a)(ze,(function(e){return e.length})),Object(Pe.a)(We,ze,(function(e,t){return e.length===t.length?e.length:"".concat(t.length,"/").concat(e.length)}))),Ne=function(e){return e.videos.list},Fe=function(e){return Object(Pe.a)(Ne,(function(t){return t.filter((function(t){var n=t.channelId;return e.id===n}))}))},Ge=Object(Pe.a)(Ne,Me,(function(e,t){var n=t.map((function(e){return e.id}));return e.filter((function(e){var t=e.isToWatchLater,i=e.channelId;return t&&!n.includes(i)})).length})),Ue=Object(Pe.a)(Ne,Me,(function(e,t){var n=t.map((function(e){return e.id}));return e.filter((function(e){var t=e.isToWatchLater,i=e.isViewed,r=e.channelId;return t&&i&&!n.includes(r)})).length})),Ke=function(e){return Object(Pe.a)(Ne,(function(t){var n=t.find((function(t){return t.id===e.id}))||{},i=n.isViewed,r=void 0!==i&&i,a=n.isToWatchLater;return{isViewed:r,isToWatchLater:void 0!==a&&a}}))};var Ye=n(17),Je=n(32),qe=n(270);function Xe(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xs",t=Object(Je.a)();return Object(Ye.a)(t.breakpoints.keys).reverse().reduce((function(e,n){var i=Object(qe.a)(t.breakpoints.up(n));return!e&&i?n:e}),null)||e}(null);return{itemsPerRow:t?e[t]:void 0}}var Qe=Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-viewer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"YouTube viewer",REACT_APP_VERSION:"1.0.0",REACT_APP_YOUTUBE_API_KEY:"AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo"}).REACT_APP_DEBUG;function Ze(){var e=new Date;return"[".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),"]")}function $e(e){if(Qe){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,[Ze(),e].concat(i))}}var et=30,tt=1;function nt(e){var t=e.channel,n=e.onCheckEnd,r=Object(i.useState)(!1),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Vt(Fe(t)),d=xe(tt).toISOString(),u=6e4*et,b=Ee({channel:t,publishedAfter:d},{skip:!o}),j=b.data,f=b.isFetching,p=b.refetch;return function(e,t){var n=Object(i.useRef)(e);Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){o?p():c(!0)}),u),Object(i.useEffect)((function(){if(!f&&j){var e=[],i=(null===j||void 0===j?void 0:j.items)||[],r=(null===j||void 0===j?void 0:j.total)||0;if($e("Fetch ended:",r,j),r>0){var a=s.filter((function(e){var t=e.isViewed,n=e.isToWatchLater,i=e.isNotified;return t||n||i})).map((function(e){return e.id}));(e=i.filter((function(e){return!a.includes(e.id)}))).length>0&&$e("New videos for channel ".concat(t.title,":"),e)}n({channel:t,newVideos:e})}}),[f]),Object(h.jsx)("span",{children:"Silence is golden!"})}var it=Object(J.d)({name:"videos",initialState:{list:[]},reducers:{setVideos:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},addViewedVideo:function(e,t){var n=t.payload,i=e.list.find((function(e){return e.id===n.id}));i?i.isViewed=!0:e.list.push({id:n.id,channelId:n.channelId,publishedAt:n.publishedAt,isViewed:!0})},addWatchLaterVideo:function(e,t){var n=t.payload,i=e.list.find((function(e){return e.id===n.id}));i?i.isToWatchLater=!0:e.list.push({id:n.id,channelId:n.channelId,publishedAt:n.publishedAt,isToWatchLater:!0})},removeWatchLaterVideo:function(e,t){var n=t.payload,i=e.list.find((function(e){return e.id===n.id}));i&&(i.isToWatchLater=!1),ge||it.caseReducers.removeOutdatedVideos(e)},clearWatchLaterList:function(e){e.list=e.list.map((function(e){return e.isToWatchLater?Object(b.a)(Object(b.a)({},e),{},{isToWatchLater:!e.isViewed}):e}))},addNotifiedVideos:function(e,t){var n,i=t.payload,r=Object(he.a)(i);try{var a=function(){var t=n.value,i=e.list.find((function(e){return e.id===t.id}));i?i.isNotified=!0:e.list.push({id:t.id,channelId:t.channelId,publishedAt:t.publishedAt,isNotified:!0})};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}},removeOutdatedVideos:function(e){e.list=e.list.filter((function(e){var t=e.isViewed,n=e.isToWatchLater,i=e.isNotified,r=e.publishedAt;return t||n||i&&ve(r)<=tt}))}}}),rt=it.actions,at=rt.setVideos,ot=rt.addViewedVideo,ct=rt.addWatchLaterVideo,st=rt.removeWatchLaterVideo,lt=rt.clearWatchLaterList,dt=rt.addNotifiedVideos,ut=rt.removeOutdatedVideos,bt=it.reducer,ht=Object(J.d)({name:"settings",initialState:{loaded:!1},reducers:{setApp:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)}}}),jt=ht.actions.setApp,ft=ht.reducer;function pt(){return(pt=Object(K.a)(U.a.mark((function e(){var t,n,i,r,a,o,c,s,l,d=arguments;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=d.length,n=new Array(t),i=0;i<t;i++)n[i]=d[i];return e.prev=1,e.next=4,browser.storage.local.get(n);case 4:return r=e.sent,e.abrupt("return",n.length>1?r:r[n[0]]);case 8:e.prev=8,e.t0=e.catch(1),a={},o=Object(he.a)(n);try{for(o.s();!(c=o.n()).done;)s=c.value,l=localStorage.getItem(s),a[s]=xt(l)}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",n.length>1?a:a[n[0]]);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function xt(e){if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function vt(e){try{return JSON.stringify(e)}catch(t){return e}}var mt={get:function(){return pt.apply(this,arguments)},save:function(e){try{browser.storage.local.set(e)}catch(a){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],r=vt(e[i]);localStorage.setItem(i,r)}}}},Ot="APP_YOUTUBE_VIEWER",gt=!0,yt="",wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];gt=t,Rt.dispatch(e)},Ct=function(){var e=Object(K.a)(U.a.mark((function e(){var t,n,i,r,a,o,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.get(Ot);case 2:if(t=e.sent){e.next=14;break}return e.next=6,mt.get("settings","channels");case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:(n=e.t0).settings&&(i=n.settings.apiKey)&&wt(te({apiKey:i})),n.channels&&wt(oe({list:n.channels})),e.next=18;break;case 14:a=(r=t||{}).settings,o=r.channels,c=r.videos,a&&wt(te(a)),o&&wt(oe(o)),c&&wt(at(c));case 18:wt(jt({loaded:!0}),!t);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),St=Object(J.a)({reducer:Object(Y.a)({settings:ne,channels:be,videos:bt,app:ft},Ae.reducerPath,Ae.reducer),middleware:function(e){return e().concat(Ae.middleware)}});St.subscribe(me((function(){!function(e,t){if($e("Persist state:",{canPersistState:gt,state:e}),gt){var n=e.settings,i=e.channels,r=e.videos;if(t){var a=JSON.stringify({settings:n,channels:i,videos:r});if(yt===a)return void $e("State did not change!");yt=a}mt.save(Object(Y.a)({},Ot,{settings:n,channels:i,videos:r}))}else gt=!0}(St.getState())}),1e3)),Object(K.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))();var kt=function(){return Object(q.d)()},Vt=q.e,Rt=St,Tt=function(e){return e.settings},At=Object(Pe.a)(Tt,(function(e){return e.darkMode?"dark":"light"})),Dt=function(e){return e.app};function It(e){var t=Vt(Dt),n=Vt(He),i=Vt(Tt);return Object(h.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",minWidth:280,maxWidth:280,bgcolor:"custom.lightGrey",borderRight:1,borderColor:"divider"},children:[Object(h.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",py:2.5,pl:3},children:[Object(h.jsx)(d.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:6},children:Object(h.jsx)(F,{showVersion:!0})}),Object(h.jsx)(d.a,{sx:{flexGrow:1,paddingLeft:1,width:"100%"},children:Object(h.jsxs)(f.a,{component:"nav","aria-label":"main",children:[Object(h.jsx)(M,{icon:Object(h.jsx)(m.a,{}),text:"Home",to:"/"}),Object(h.jsx)(M,{icon:Object(h.jsx)(g.a,{}),text:"Channels",to:"/channels",badge:n}),Object(h.jsx)(M,{icon:Object(h.jsx)(w.a,{}),text:"Settings",to:"/settings",hasWarning:t.loaded&&!i.apiKey}),Object(h.jsx)(M,{icon:Object(h.jsx)(S.a,{}),text:"About",to:"/about"})]})})]}),Object(h.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",py:2,px:3,borderTop:1,borderColor:"divider"},children:[Object(h.jsx)(p.a,{sx:{fontSize:"0.8rem",mb:1},variant:"caption",color:"text.secondary",children:"Facing issues or have some feedback?"}),Object(h.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",gap:.5,fontSize:"0.8rem",textDecoration:"none","&:hover":{textDecoration:"underline"}},href:"https://github.com/AXeL-dev/youtube-viewer/issues",target:"_blank",color:"secondary",rel:"noopener",children:[Object(h.jsx)(V.a,{sx:{fontSize:18}}),"Report a bug | Feedback"]})]})]})}function _t(e){var t=e.size,n=void 0===t?32:t,i=e.sx,r=void 0===i?{}:i;return Object(h.jsx)(d.a,{sx:Object(b.a)({display:"flex","> img":{width:n,height:n,filter:"contrast(150%) brightness(100%)"}},r),children:Object(h.jsx)("img",{alt:"logo",src:"icons/128.png"})})}var Lt=n(284),Et=n(297),Pt=n(299),Wt=n(63),zt=n.n(Wt);function Mt(e){var t,n=e.open,r=void 0===n||n,a=e.error,o=e.severity,c=void 0===o?"error":o,s=e.closable,d=e.syncOpen,u=e.onClose,b=e.children||(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error.message)||(null===a||void 0===a?void 0:a.error),j=Object(i.useState)(r),f=Object(l.a)(j,2),p=f[0],x=f[1];Object(i.useEffect)((function(){d&&r!==p&&x(r)}),[r,d]);return Object(h.jsx)(Et.a,{in:p,children:Object(h.jsx)(Lt.a,{sx:{borderRadius:"unset"},severity:c,action:s?Object(h.jsx)(Pt.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){x(!1),u&&u()},children:Object(h.jsx)(zt.a,{fontSize:"inherit"})}):null,children:b})})}var Bt=n(139),Ht=n.n(Bt),Nt=n(39),Ft=Object(D.a)(Nt.c)((function(e){var t=e.theme;return{flexGrow:1,color:t.palette.text.primary,backgroundColor:t.palette.custom.lightGrey,border:"1px solid ".concat(t.palette.custom.lightBorder),borderRadius:20,"& .MuiInputBase-input":{padding:t.spacing(1,5,1,6),width:"100%"}}}));function Gt(e){var t=e.placeholder,n=void 0===t?"Search\u2026":t,i=e.width,a=e.clearable,o=e.debounceTime,c=void 0===o?300:o,s=e.onChange,u=e.onClear,b=r.a.useState(""),j=Object(l.a)(b,2),f=j[0],p=j[1],x=r.a.useMemo((function(){return me((function(e){s(e)}),c)}),[]);return r.a.useEffect((function(){""!==f&&x(f)}),[f,x]),Object(h.jsxs)(d.a,{sx:{position:"relative",display:"flex",flexGrow:1,maxWidth:i},children:[Object(h.jsx)(d.a,{sx:{width:48,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"action.active",zIndex:1},children:Object(h.jsx)(Ht.a,{})}),Object(h.jsx)(Ft,{placeholder:n,inputProps:{value:f,"aria-label":"search"},onChange:function(e){p(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&s(f)}}),a&&(null===f||void 0===f?void 0:f.length)>0?Object(h.jsx)(Pt.a,{sx:{position:"absolute",right:0,top:0,my:.75,mx:1,color:"action.active"},"aria-label":"clear",size:"small",onClick:function(){p(""),u&&u()},children:Object(h.jsx)(zt.a,{fontSize:"inherit"})}):null]})}var Ut=n(271),Kt=n(140),Yt=Object(D.a)(Ut.a)((function(e){var t,n=e.theme;return t={height:3},Object(Y.a)(t,"&.".concat(Kt.a.colorPrimary),{backgroundColor:n.palette.grey["light"===n.palette.mode?200:800]}),Object(Y.a)(t,"& .".concat(Kt.a.bar),{borderRadius:5,backgroundColor:"light"===n.palette.mode?"#1a90ff":"#308fe8"}),t}));function Jt(e){var t=e.variant,n=void 0===t?"determinate":t,i=e.value,r=void 0===i?0:i;return Object(h.jsx)(d.a,{sx:{flexGrow:1},children:Object(h.jsx)(Yt,{variant:n,value:r})})}n(272),n(141);var qt=n(300),Xt=Object(D.a)(W.a)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{position:"relative",transform:"none",backgroundColor:t.palette.primary.main,color:t.palette.common.white,minWidth:20,height:20,fontSize:"0.75rem",marginLeft:t.spacing(1.5),borderRadius:t.spacing(1.5)}}}));function Qt(e){var t=e.label,n=e.badge,i=e.selected,r=Object(Oe.a)(e,["label","badge","selected"]);return Object(h.jsx)(qt.a,Object(b.a)({sx:{fontSize:"0.975rem",fontWeight:400,minWidth:140,textTransform:"capitalize"},label:Object(h.jsxs)(d.a,{sx:{display:"flex",alignItems:"center"},children:[t,n&&i?Object(h.jsx)(Xt,{badgeContent:n}):null]}),disableRipple:!0},r))}var Zt=n(142),$t=n(301),en=n(302);function tn(e){var t=e.onClick;return Object(h.jsx)(Pt.a,{sx:{position:"absolute",top:function(e){return e.spacing(-1.75)},right:function(e){return e.spacing(-1.75)},bgcolor:"primary.main",color:"common.white",fontSize:"1.275rem","&:hover":{bgcolor:"primary.main",color:"common.white"}},size:"small",onClick:t,children:Object(h.jsx)(zt.a,{fontSize:"inherit"})})}function nn(e){var t=e.open,n=e.video,i=e.onClose,r={height:"100%",width:"100%",playerVars:{autoplay:Vt(Tt).autoPlayVideos?1:0}},a=function(e,t){if("backdropClick"===t)return function(e){e.stopPropagation(),e.preventDefault()}(e);i()};return Object(h.jsxs)($t.a,{sx:{"& .MuiPaper-root":{overflow:"visible",width:"80%",maxWidth:1200,height:"80%"}},open:t,onClose:a,children:[Object(h.jsx)(tn,{onClick:a}),Object(h.jsx)(en.a,{sx:{display:"flex",p:2.5,"> div":{flexGrow:1}},children:n?Object(h.jsx)(Zt.a,{videoId:n.id,opts:r}):null})]})}function rn(e,t){var n,i;return e.open===t.open&&(null===(n=e.video)||void 0===n?void 0:n.id)===(null===(i=t.video)||void 0===i?void 0:i.id)}var an=r.a.memo(nn,rn),on=n(290);var cn=function(e){var t=e.channel,n=e.children;return Object(h.jsx)(x.a,{sx:{outline:"none",textDecoration:"none"},href:t.url,target:"_blank",rel:"noopener",children:n})};function sn(e){var t=e.channel;return Object(h.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",pb:2},children:[Object(h.jsx)(cn,{channel:t,children:Object(h.jsx)(on.a,{alt:t.title,src:t.thumbnail})}),Object(h.jsx)(cn,{channel:t,children:Object(h.jsx)(p.a,{sx:{ml:1.5},variant:"subtitle1",color:"text.primary",children:t.title})})]})}function ln(e,t){return e.channel.id===t.channel.id}var dn=r.a.memo(sn,ln),un=n(292),bn=n(280),hn=n(147),jn=n.n(hn),fn=n(148),pn=n.n(fn),xn=n(145),vn=n.n(xn);function mn(e){var t=e.video,n=e.view,i=Vt(Ke(t)).isToWatchLater,r=kt();return i?n===X.HomeView.WatchLater?Object(h.jsx)(bn.a,{title:"Remove","aria-label":"remove-from-watch-later",children:Object(h.jsx)(Pt.a,{sx:{display:"flex",position:"absolute",top:0,right:0,margin:"4px",color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"4px",borderRadius:"2px","&:hover":{color:"#fff"}},size:"small",onClick:function(){r(st(t))},children:Object(h.jsx)(zt.a,{sx:{fontSize:"1.125rem"}})})}):null:Object(h.jsx)(bn.a,{title:"Watch later","aria-label":"watch-later",children:Object(h.jsx)(Pt.a,{sx:{display:"flex",position:"absolute",top:0,right:0,margin:"4px",color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"4px",borderRadius:"2px","&:hover":{color:"#fff"}},size:"small",onClick:function(){r(ct(t))},children:Object(h.jsx)(vn.a,{sx:{fontSize:"1.25rem"}})})})}function On(e,t){return e.view===t.view&&e.video.id===t.video.id}var gn=r.a.memo(mn,On),yn=n(146),wn=n.n(yn);function Cn(e){var t=e.video;return Vt(Ke(t)).isViewed?Object(h.jsx)(bn.a,{title:"Viewed","aria-label":"viewed",children:Object(h.jsx)(d.a,{sx:{display:"flex",position:"absolute",bottom:0,left:0,margin:"4px",color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"3px 5px",borderRadius:"2px","&:hover":{color:"#fff"}},children:Object(h.jsx)(wn.a,{sx:{fontSize:"1rem"}})})}):null}function Sn(e,t){return e.video.id===t.video.id}var kn=r.a.memo(Cn,Sn);function Vn(e){var t=e.video,n=e.view,i=e.thumbnailWidth,r=void 0===i?"100%":i,a=e.thumbnailHeight,o=void 0===a?120:a,c=e.onVideoPlay,s=kt();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(d.a,{sx:{position:"relative","&:hover .overlay":{opacity:1},"&:hover .options":{opacity:1}},children:[Object(h.jsx)(d.a,{sx:{display:"flex",width:r,height:o,backgroundImage:'url("'.concat(t.thumbnail,'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),Object(h.jsx)(d.a,{sx:{backgroundColor:"rgba(0, 0, 0, 0.7)",position:"absolute",height:"100%",width:"100%",left:0,top:0,bottom:0,right:0,opacity:0,transition:"opacity 0.4s ease-in-out 0s"},className:"overlay"}),Object(h.jsxs)(d.a,{sx:{position:"absolute",top:0,left:0,opacity:0,width:"100%",height:"100%",transition:"opacity 0.3s ease-in-out 0s"},className:"options",children:[Object(h.jsxs)(d.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",textAlign:"center",paddingLeft:"1rem",paddingRight:"1rem"},children:[Object(h.jsx)(x.a,{sx:{textDecoration:"none",outline:"none"},href:t.url,target:"_blank",rel:"noopener",onClick:function(e){ge&&(e.preventDefault(),ye(t.url,!1)),s(ot(t))},children:Object(h.jsx)(Pt.a,{sx:{color:"#fff",margin:.5},size:"small",children:Object(h.jsx)(bn.a,{title:"Open in Youtube","aria-label":"watch-later",children:Object(h.jsx)(jn.a,{sx:{fontSize:"1.5rem"}})})})}),Object(h.jsx)(Pt.a,{sx:{color:"#fff",margin:.5},size:"small",onClick:function(){c(t),s(ot(t))},children:Object(h.jsx)(bn.a,{title:"Watch","aria-label":"watch",children:Object(h.jsx)(pn.a,{sx:{fontSize:"2.1rem"}})})})]}),Object(h.jsx)(gn,{video:t,view:n})]}),Object(h.jsx)(kn,{video:t}),Object(h.jsx)(p.a,{sx:{position:"absolute",bottom:0,right:0,margin:"4px",color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"2px 4px",borderRadius:"2px"},variant:"caption",children:t.duration})]}),Object(h.jsxs)(d.a,{pr:2,mt:1,children:[Object(h.jsx)(bn.a,{title:t.title,enterDelay:700,enterNextDelay:700,"aria-label":"video-title",children:Object(h.jsx)(p.a,{sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},gutterBottom:!0,variant:"body2",children:t.title})}),Object(h.jsx)(p.a,{display:"block",variant:"caption",color:"textSecondary",children:t.channelTitle}),Object(h.jsx)(p.a,{variant:"caption",color:"textSecondary",children:"".concat(t.views," \u2022 ").concat(t.publishedSince)})]})]})}function Rn(e,t){return e.view===t.view&&e.thumbnailHeight===t.thumbnailHeight&&e.thumbnailWidth===t.thumbnailWidth&&e.video.id===t.video.id}var Tn=r.a.memo(Vn,Rn),An=n(291);function Dn(e){var t=e.width,n=void 0===t?"100%":t,i=e.height,r=void 0===i?120:i;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(An.a,{variant:"rectangular",width:n,height:r}),Object(h.jsxs)(d.a,{pt:.5,children:[Object(h.jsx)(An.a,{}),Object(h.jsx)(An.a,{width:"60%"})]})]})}function In(e){var t=e.children,n=Object(Oe.a)(e,["children"]);return Object(h.jsx)(un.a,Object(b.a)(Object(b.a)(Object(b.a)({item:!0},{xxs:1,xs:1,sm:1,md:1,lg:1,xl:1}),n),{},{children:t}))}var _n={gridSpacing:{xxs:1,sm:2},gridColumns:{xxs:1,xs:2,sm:3,md:4,lg:5,xl:6}},Ln=n(149),En=n.n(Ln);function Pn(e){var t=e.isLoading,n=e.hasMore,i=e.onClick;return Object(h.jsx)(d.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",minWidth:function(e){return e.spacing(3.5)},ml:2,gap:2},children:n?Object(h.jsx)(Pt.a,{sx:{height:216,borderRadius:0},disabled:t,size:"small",onClick:i,children:Object(h.jsx)(En.a,{fontSize:"inherit"})}):null})}var Wn=function(e){var t=e.videos,n=e.view,i=e.isLoading,r=e.itemsPerRow,a=e.maxResults,o=e.hasMore,c=e.onVideoPlay,s=e.onLoadMore,l=Math.min(a-t.length,r);return Object(h.jsxs)(d.a,{sx:{display:"flex",pl:6},children:[Object(h.jsxs)(un.a,{container:!0,spacing:_n.gridSpacing,columns:_n.gridColumns,children:[t.map((function(e,t){return Object(h.jsx)(In,{children:Object(h.jsx)(Tn,{video:e,view:n,onVideoPlay:c})},t)})),i&&l>0?Array.from(new Array(l)).map((function(e,t){return Object(h.jsx)(In,{children:Object(h.jsx)(Dn,{})},t)})):null]}),Object(h.jsx)(Pn,{isLoading:i,hasMore:o,onClick:s})]})};function zn(e){var t=e.channel,n=e.videos,i=e.total,r=e.isLoading,a=e.maxResults,o=Object(Oe.a)(e,["channel","videos","total","isLoading","maxResults"]),c=r||n.length>0,s=i>a,l=n.length>0&&(r&&s||s);return c?Object(h.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",pb:3},children:[Object(h.jsx)(dn,{channel:t}),Object(h.jsx)(Wn,Object(b.a)({videos:n,isLoading:r,maxResults:a,hasMore:l},o))]}):null}function Mn(e,t){return e.view===t.view&&e.channel.id===t.channel.id&&e.total===t.total&&e.isLoading===t.isLoading&&e.itemsPerRow===t.itemsPerRow&&e.maxResults===t.maxResults&&JSON.stringify(e.videos.map((function(e){return e.id})))===JSON.stringify(t.videos.map((function(e){return e.id})))}var Bn=r.a.memo(zn,Mn);var Hn=function(e){var t=e.channel,n=e.publishedAfter,r=e.excludedVideosIds,a=void 0===r?[]:r,o=e.onError,c=e.onChange,s=Object(Oe.a)(e,["channel","publishedAfter","excludedVideosIds","onError","onChange"]),d=Object(i.useState)(1),u=Object(l.a)(d,2),j=u[0],f=u[1],p=Xe(_n.gridColumns).itemsPerRow,x=void 0===p?0:p,v=x*j,m=Ee({channel:t,publishedAfter:n,maxResults:v},{skip:0===x}),O=m.data,g=m.error,y=m.isLoading,w=m.isFetching,C=(null===O||void 0===O?void 0:O.items.filter((function(e){return!a.includes(e.id)})))||[],S=(null===O||void 0===O?void 0:O.total)||0;return Object(i.useEffect)((function(){g&&o&&o(g)}),[g,o]),Object(i.useEffect)((function(){!w&&O&&c&&c({channel:t,items:C,total:S})}),[w,c,C]),Object(h.jsx)(Bn,Object(b.a)({channel:t,videos:C,total:S,isLoading:y||w,itemsPerRow:x,maxResults:v,onLoadMore:function(){f(j+1)}},s))};var Nn=function(e){var t=e.channel,n=Vt(Tt),r=Vt(Fe(t)),a=n.recentVideosDisplayOptions,o=a.hideViewedVideos,c=a.hideWatchLaterVideos,s=Object(i.useMemo)((function(){return[].concat(Object(Ye.a)(o?r.filter((function(e){return e.isViewed})).map((function(e){return e.id})):[]),Object(Ye.a)(c?r.filter((function(e){return e.isToWatchLater})).map((function(e){return e.id})):[]))}),[r,o,c]),l=xe(n.recentVideosSeniority).toISOString();return Object(h.jsx)(Hn,Object(b.a)({publishedAfter:l,excludedVideosIds:s},e))};var Fn=function(e){var t=e.channel,n=e.onError,r=e.onVideoPlay,a=Object(i.useState)(1),o=Object(l.a)(a,2),c=o[0],s=o[1],d=Xe(_n.gridColumns).itemsPerRow,u=void 0===d?0:d,b=Vt(function(e){return Object(Pe.a)(Ne,(function(t){return t.filter((function(t){var n=t.isToWatchLater,i=t.channelId;return n&&(!e||e.id===i)})).sort((function(e,t){return t.publishedAt-e.publishedAt}))}))}(t)).map((function(e){return e.id})),j=b.length,f=Math.min(j,u*c),p=Le({ids:b,maxResults:Math.max(f,u)},{skip:0===u}),x=p.data,v=p.error,m=p.isLoading,O=p.isFetching,g=((null===x||void 0===x?void 0:x.items)||[]).filter((function(e){return b.includes(e.id)}));return Object(i.useEffect)((function(){v&&n&&n(v)}),[v,n]),Object(h.jsx)(Bn,{view:X.HomeView.WatchLater,channel:t,videos:g,total:j,isLoading:m||O,itemsPerRow:u,maxResults:f,onLoadMore:function(){s(c+1)},onVideoPlay:r})};function Gn(e){var t=e.view,n=e.channels,r=e.onError,a=e.onChange,o=e.onVideoPlay,c=Object(i.useMemo)((function(){switch(t){case X.HomeView.WatchLater:return Fn;case X.HomeView.Recent:return Nn;default:return Hn}}),[t]);return Object(h.jsx)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"auto",px:3,pt:3},children:n.map((function(e,n){return Object(h.jsx)(c,{view:t,channel:e,onError:r,onChange:a,onVideoPlay:o},n)}))})}function Un(e,t){return e.view===t.view&&JSON.stringify(e.channels.map((function(e){return e.id})))===JSON.stringify(t.channels.map((function(e){return e.id})))}var Kn=r.a.memo(Gn,Un),Yn=n(303),Jn=n(150),qn=n.n(Jn);function Xn(e){var t=Vt(Dt),n=Object(s.f)();return t.loaded?Object(h.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(h.jsx)(p.a,{sx:{textAlign:"center",fontSize:"1.125rem",mb:2},variant:"body1",color:"text.secondary",children:"Welcome, stranger! To get started, you should add some channels"}),Object(h.jsxs)(Yn.a,{sx:{textTransform:"capitalize"},variant:"contained",color:"secondary",onClick:function(){n.push("/channels")},children:[Object(h.jsx)(qn.a,{sx:{fontSize:"1.25rem",mr:.5}}),"Add channels"]})]}):null}function Qn(e){var t=e.tab,n=e.onCountChange,r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Object(i.useState)(null),d=Object(l.a)(s,2),u=d[0],b=d[1],j=Vt(ze),f=Object(i.useRef)([]);return o?Object(h.jsx)(Mt,{error:o,closable:!0}):Object(h.jsxs)(h.Fragment,{children:[j.length>0?Object(h.jsx)(Kn,{view:t,channels:j,onError:function(e){c(e)},onChange:function(e){if(n&&(f.current.push(e),f.current.length===j.length)){var i=f.current.reduce((function(e,t){var n;return{displayed:e.displayed+((null===(n=t.items)||void 0===n?void 0:n.length)||0),total:e.total+(t.total||0)}}),{displayed:0,total:0});n(t,i),f.current=[]}},onVideoPlay:function(e){b(e)}}):Object(h.jsx)(Xn,{}),Object(h.jsx)(an,{open:!!u,video:u,onClose:function(){b(null)}})]})}var Zn=r.a.memo(Qn),$n=n(273),ei=n(151),ti=n.n(ei),ni=n(304),ii=n(305),ri=n(306);function ai(e){var t=e.open,n=e.title,i=e.text,r=e.onClose,a=function(){r(!1)};return Object(h.jsxs)($t.a,{open:t,onClose:a,children:[Object(h.jsxs)(en.a,{children:[Object(h.jsx)(ni.a,{sx:{px:0,pt:0},children:n}),Object(h.jsx)(ii.a,{children:i})]}),Object(h.jsxs)(ri.a,{sx:{px:2,pb:2},children:[Object(h.jsx)(Yn.a,{color:"inherit",onClick:a,autoFocus:!0,children:"Cancel"}),Object(h.jsx)(Yn.a,{color:"primary",variant:"contained",onClick:function(){r(!0)},children:"Confirm"})]})]})}function oi(e,t){return e.open===t.open}var ci=r.a.memo(ai,oi);var si=function(e){var t=Vt(Ue),n=kt(),r=Object(i.useState)({open:!1,title:"",text:"",onClose:function(){}}),a=Object(l.a)(r,2),o=a[0],c=a[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)($n.a,{in:t>0,children:Object(h.jsx)(bn.a,{title:"Remove all viewed videos",placement:"left",arrow:!0,children:Object(h.jsx)(Pt.a,{"aria-label":"remove-viewed",onClick:function(){c({open:!0,title:"Remove all viewed videos",text:"Are you sure that you want to remove all viewed videos from the watch later list?",onClose:function(e){e&&n(lt()),c((function(e){return Object(b.a)(Object(b.a)({},e),{},{open:!1})}))}})},children:Object(h.jsx)(ti.a,{sx:{fontSize:"1.5rem"}})})})}),Object(h.jsx)(ci,Object(b.a)({},o))]})},li=n(152),di=n.n(li),ui=n(153),bi=n.n(ui);var hi=function(e){var t=Vt(ze),n=Vt(Tt),i=kt(),r=n.recentVideosDisplayOptions,a=r.hideViewedVideos,o=r.hideWatchLaterVideos;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)($n.a,{in:t.length>0,children:Object(h.jsx)(bn.a,{title:"Filter viewed videos",placement:"left",arrow:!0,children:Object(h.jsx)(Pt.a,{sx:a?{bgcolor:"action.selected"}:{},"aria-label":"filter-viewed",onClick:function(){i(te({recentVideosDisplayOptions:Object(b.a)(Object(b.a)({},n.recentVideosDisplayOptions),{},{hideViewedVideos:!a})}))},children:Object(h.jsx)(di.a,{sx:{fontSize:"1.3rem"}})})})}),Object(h.jsx)($n.a,{in:t.length>0,children:Object(h.jsx)(bn.a,{title:"Filter watch later videos",placement:"left",arrow:!0,children:Object(h.jsx)(Pt.a,{sx:o?{bgcolor:"action.selected"}:{},"aria-label":"filter-watch-later",onClick:function(){i(te({recentVideosDisplayOptions:Object(b.a)(Object(b.a)({},n.recentVideosDisplayOptions),{},{hideWatchLaterVideos:!o})}))},children:Object(h.jsx)(bi.a,{sx:{fontSize:"1.3rem"}})})})})]})};function ji(e){var t=e.tab,n=e.recentVideosCount;return t===X.HomeView.Recent?n>0?Object(h.jsx)(hi,{}):null:t===X.HomeView.WatchLater?Object(h.jsx)(si,{}):null}var fi=r.a.memo(ji);function pi(e){var t=Vt(Tt),n=Object(i.useState)(t.defaultView),r=Object(l.a)(n,2),a=r[0],o=r[1],c=Object(i.useState)({displayed:0,total:0}),s=Object(l.a)(c,2),b=s[0],f=s[1],p=Vt(Ge);Object(i.useEffect)((function(){a!==t.defaultView&&o(t.defaultView)}),[t.defaultView]);return Object(h.jsxs)(j,{children:[Object(h.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",borderBottom:1,borderColor:"divider",gap:2,px:3},children:[Object(h.jsxs)(u.a,{sx:{flexGrow:1,pt:1},value:a,onChange:function(e,t){o(t)},"aria-label":"tabs",children:[Object(h.jsx)(Qt,{label:"All",value:X.HomeView.All}),Object(h.jsx)(Qt,{label:"Recent",value:X.HomeView.Recent,badge:b.displayed}),Object(h.jsx)(Qt,{label:"Watch later",value:X.HomeView.WatchLater,badge:p})]}),Object(h.jsx)(fi,{tab:a,recentVideosCount:b.total})]}),Object(h.jsx)(Zn,{tab:a,onCountChange:function(e,t){e===X.HomeView.Recent&&f(t)}})]})}var xi=n(166),vi=n.n(xi),mi=n(164),Oi=n.n(mi),gi=n(165),yi=n.n(gi),wi=n(277),Ci=n(278),Si=n(307),ki=n(308),Vi=n(154),Ri=n.n(Vi);function Ti(e){var t=e.channel;return Object(h.jsx)($n.a,{in:!0,children:Object(h.jsx)(x.a,{sx:{textDecoration:"none"},href:t.url,target:"_blank",rel:"noopener",children:Object(h.jsx)(on.a,{sx:{width:60,height:60},alt:t.title,src:t.thumbnail,"aria-label":"channel"})})})}function Ai(e,t){return e.channel.title===t.channel.title&&e.channel.thumbnail===t.channel.thumbnail&&e.channel.url===t.channel.url}var Di=r.a.memo(Ti,Ai);function Ii(e){var t=e.channel;return Object(h.jsx)(x.a,{sx:{color:"text.primary",textDecoration:"none"},href:t.url,target:"_blank",rel:"noopener",children:t.title})}function _i(e,t){return e.channel.title===t.channel.title&&e.channel.url===t.channel.url}var Li=r.a.memo(Ii,_i);function Ei(e){var t=e.channel,n=Object(i.useState)(!1),r=Object(l.a)(n,2),a=r[0],o=r[1],c=Vt(function(e){return Object(Pe.a)(We,(function(t){return t.find((function(t){return t.id===e.id}))}))}(t)),s=kt();return Object(h.jsx)(d.a,{sx:{display:"flex"},children:Object(h.jsx)(Si.a,{elevation:0,sx:{flexGrow:1,bgcolor:"transparent"},children:Object(h.jsx)(ki.a,{sx:{pt:2.5,pl:0,pr:1,"& .MuiCardHeader-title":{fontSize:"0.975rem",mb:.25},"& .MuiCardHeader-action":{alignSelf:"center",ml:2}},avatar:Object(h.jsx)(Di,{channel:t}),action:Object(h.jsx)(bn.a,{title:c?a?"Remove channel":"":"Add channel",placement:"left",arrow:!0,children:Object(h.jsx)(Pt.a,{sx:Object(b.a)({border:1,transition:function(e){return e.transitions.create(["color","background-color","border-color"])}},c?{bgcolor:"secondary.main",color:"common.white",borderColor:"secondary.main",":hover":{bgcolor:"secondary.main",color:"common.white",borderColor:"secondary.main"},"&.Mui-disabled":{bgcolor:"secondary.light",color:"common.white",opacity:.5}}:{borderColor:"custom.lightBorder",":hover":{bgcolor:"transparent",color:"secondary.main",borderColor:"secondary.main"}}),size:"small","aria-label":"add",disabled:c&&!a,onClick:function(){s((c?se:ce)(t)),o(!0)},disableRipple:!0,children:Object(h.jsx)(Ri.a,{})})}),title:Object(h.jsx)(Li,{channel:t}),subheader:t.description})})})}function Pi(e){var t=e.search,n=_e({name:t},{skip:""===t}),i=n.data,r=n.error,a=n.isLoading,o=(null===i||void 0===i?void 0:i.items)||[];return r?Object(h.jsx)(Mt,{error:r,closable:!0}):a?Object(h.jsx)(Jt,{variant:"indeterminate"}):Object(h.jsx)(wi.a,{sx:{px:3,overflow:"auto"},divider:Object(h.jsx)(Ci.a,{}),children:o.map((function(e,t){return Object(h.jsx)(Ei,{channel:e},t)}))})}var Wi=n(298),zi=n(309),Mi=n(116),Bi=n(170),Hi=Object(D.a)((function(e){return Object(h.jsx)(Bi.a,Object(b.a)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,marginRight:t.spacing(1.5),"&:not(.inherit-color)":{color:t.palette.text.secondary}},"&:active":{backgroundColor:Object(Mi.a)(t.palette.action.selected,t.palette.action.selectedOpacity)}}}}})),Ni=n(156),Fi=n.n(Ni),Gi=n(157),Ui=n.n(Gi),Ki=n(158),Yi=n.n(Ki),Ji=n(159),qi=n.n(Ji),Xi=n(160),Qi=n.n(Xi),Zi=n(161),$i=n.n(Zi);function er(e){var t=e.open,n=e.channel,i=e.onClose,r=function(){i(!1)};return Object(h.jsxs)($t.a,{open:t,onClose:r,children:[Object(h.jsx)(en.a,{children:Object(h.jsxs)(d.a,{sx:{display:"flex"},children:[Object(h.jsx)(Di,{channel:n}),Object(h.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",px:2},children:[Object(h.jsxs)(ni.a,{sx:{px:0,pt:0},children:["Remove ",n.title,"'s channel ?"]}),Object(h.jsx)(ii.a,{children:"Are you sure that you want to remove this channel?"})]})]})}),Object(h.jsxs)(ri.a,{sx:{px:2,pb:2},children:[Object(h.jsx)(Yn.a,{color:"inherit",onClick:r,autoFocus:!0,children:"Cancel"}),Object(h.jsx)(Yn.a,{color:"primary",variant:"contained",onClick:function(){i(!0)},children:"Confirm"})]})]})}function tr(e){var t=e.channel,n=e.openedDialog,i=e.onClose,r=kt();return Object(h.jsx)(er,{open:"remove-channel"===n,channel:t,onClose:function(e){e&&r(se(t)),i()}})}function nr(e,t){return e.openedDialog===t.openedDialog&&e.channel.id===t.channel.id}var ir=r.a.memo(tr,nr);function rr(e){var t,n=e.channel,r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Object(i.useState)(null),d=Object(l.a)(s,2),u=d[0],b=d[1],j=kt(),f=Boolean(o),p=function(){c(null)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Pt.a,{"aria-label":"settings",onClick:function(e){c(e.currentTarget)},children:Object(h.jsx)(Fi.a,{})}),Object(h.jsxs)(Hi,{anchorEl:o,open:f,onClose:p,children:[Object(h.jsx)(zi.a,{onClick:function(){j(ue(n)),p()},disableRipple:!0,children:(null===(t=n.notifications)||void 0===t?void 0:t.isDisabled)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ui.a,{}),"Enable notifications"]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Yi.a,{}),"Disable notifications"]})}),Object(h.jsx)(Ci.a,{sx:{my:.5}}),Object(h.jsx)(zi.a,{onClick:function(){j(de(n)),p()},disableRipple:!0,children:n.isHidden?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(qi.a,{}),"Unhide"]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Qi.a,{}),"Hide"]})}),Object(h.jsxs)(zi.a,{sx:{color:"primary.main"},onClick:function(){b("remove-channel"),p()},disableRipple:!0,children:[Object(h.jsx)($i.a,{className:"inherit-color"}),"Remove"]})]}),Object(h.jsx)(ir,{channel:n,openedDialog:u,onClose:function(){b(null)}})]})}function ar(e,t){return JSON.stringify(e.channel)===JSON.stringify(t.channel)}var or=r.a.memo(rr,ar),cr=n(162),sr=n.n(cr);function lr(e){return Object(h.jsx)(Pt.a,Object(b.a)(Object(b.a)({sx:{cursor:"move",mr:1.5},"aria-label":"drag-handle"},e),{},{children:Object(h.jsx)(sr.a,{})}))}var dr=r.a.forwardRef((function(e,t){var n=e.channel,i=e.isOverlay,a=e.showDragHandle,o=e.listeners,c=Object(Oe.a)(e,["channel","isOverlay","showDragHandle","listeners"]),s=r.a.useMemo((function(){return Object(h.jsx)(Si.a,{elevation:0,sx:{flexGrow:1,bgcolor:"transparent"},children:Object(h.jsx)(ki.a,{sx:Object(b.a)({pt:2.5,pl:0,pr:1,"& .MuiCardHeader-title":{fontSize:"0.975rem",mb:.25},"& .MuiCardHeader-action":{ml:2}},n.isHidden?{"& .MuiCardHeader-avatar":{opacity:.5},"& .MuiCardHeader-content":{textDecoration:"line-through",opacity:.5}}:{}),avatar:Object(h.jsx)(Di,{channel:n}),action:Object(h.jsx)(or,{channel:n}),title:Object(h.jsx)(Li,{channel:n}),subheader:n.description})})}),[n]);return Object(h.jsx)("div",Object(b.a)(Object(b.a)({ref:t},c),{},{children:Object(h.jsx)(Wi.a,{elevation:i?1:0,children:Object(h.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",bgcolor:"background.default"},children:[i?Object(h.jsx)(lr,{}):Object(h.jsx)(Et.a,{in:a,orientation:"horizontal",children:Object(h.jsx)(lr,Object(b.a)({},o))}),s]})})}))})),ur=n(19);function br(e){var t=e.channel,n=Object(Oe.a)(e,["channel"]),i=Object(ie.c)({id:t.id,data:{channel:t}}),r=i.attributes,a=i.listeners,o=i.setNodeRef,c=i.transform,s=i.transition,l=i.isDragging,d={transition:i.isSorting?s:"none",opacity:l?.5:1,transform:ur.a.Transform.toString(c)};return Object(h.jsx)(dr,Object(b.a)(Object(b.a)({ref:o,channel:t,style:d,listeners:a},r),n))}var hr=n(29),jr=n(115);function fr(e){var t=e.channels,n=e.showDragHandles,r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=kt();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(hr.a,{collisionDetection:hr.d,modifiers:[jr.b,jr.a],onDragStart:function(e){var t,n=e.active;c(null===(t=n.data.current)||void 0===t?void 0:t.channel)},onDragEnd:function(e){var n=e.active,i=e.over;if(n.id!==(null===i||void 0===i?void 0:i.id)){var r=t.findIndex((function(e){return e.id===n.id})),a=t.findIndex((function(e){return e.id===(null===i||void 0===i?void 0:i.id)}));s(le({from:r,to:a}))}c(null)},children:[Object(h.jsx)(ie.a,{items:t,strategy:ie.d,children:Object(h.jsx)(wi.a,{sx:{px:3,overflow:"auto"},divider:Object(h.jsx)(Ci.a,{}),children:t.map((function(e,t){return Object(h.jsx)(br,{channel:e,showDragHandle:n},t)}))})}),Object(h.jsx)(hr.b,{children:o?Object(h.jsx)(dr,{channel:o,isOverlay:!0}):null})]})})}function pr(e,t){return e.showDragHandles===t.showDragHandles&&JSON.stringify(e.channels)===JSON.stringify(t.channels)}var xr=r.a.memo(fr,pr),vr=n(163),mr=n.n(vr);function Or(e){var t=Object(i.useRef)(null),n=kt();return Object(h.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(h.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:"No channels found."}),Object(h.jsxs)(p.a,{sx:{textAlign:"center",fontSize:"1.125rem"},variant:"body1",color:"text.secondary",gutterBottom:!0,children:["Start by typing a channel name in the search bar above",Object(h.jsx)("br",{}),"or"]}),Object(h.jsxs)(Yn.a,{sx:{textTransform:"capitalize"},variant:"contained",color:"secondary",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},children:["Import channels",Object(h.jsx)(mr.a,{sx:{fontSize:"1.25rem",ml:.5}})]}),Object(h.jsx)("input",{type:"file",ref:t,style:{display:"none",visibility:"hidden",overflow:"hidden",width:0,height:0},accept:".json",onClick:function(e){e.currentTarget.value=""},onChange:function(e){var t,i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i)try{(function(e){return new Promise((function(t,n){var i=new FileReader;i.readAsText(e,"UTF-8"),i.onload=function(){t(i.result)},i.onerror=function(e){n(e)}}))})(i).then((function(e){var t=JSON.parse(e);n(oe({list:t}))}))}catch(r){console.error(r)}}})]})}function gr(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],b=Vt(We),f=Boolean(r),p=function(){a("")};return Object(h.jsxs)(j,{children:[Object(h.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",borderBottom:1,borderColor:"divider",gap:2,py:1.5,pr:4,pl:3},children:[Object(h.jsxs)(d.a,{sx:{flexGrow:1,display:"flex"},children:[Object(h.jsx)(Et.a,{in:f,orientation:"horizontal",children:Object(h.jsx)(bn.a,{title:"Go back to channels list",placement:"bottom",arrow:!0,children:Object(h.jsx)(Pt.a,{sx:{mr:2,bgcolor:"custom.lightGrey"},"aria-label":"show-list",onClick:p,children:Object(h.jsx)(Oi.a,{})})})}),Object(h.jsx)(Gt,{width:400,placeholder:"Search for a channel\u2026",debounceTime:700,onChange:function(e){a(e)},onClear:p,clearable:!0})]}),Object(h.jsx)($n.a,{in:!f&&b.length>1,children:Object(h.jsx)(bn.a,{title:"Toggle drag handles",placement:"left",arrow:!0,children:Object(h.jsx)(Pt.a,{sx:s?{bgcolor:"action.selected"}:{},"aria-label":"toggle-drag-handles",onClick:function(){u(!s)},children:Object(h.jsx)(yi.a,{})})})}),Object(h.jsx)($n.a,{in:!f&&b.length>0,children:Object(h.jsx)(bn.a,{title:"Export",placement:"left",arrow:!0,children:Object(h.jsx)(Pt.a,{"aria-label":"export",onClick:function(){var e=JSON.stringify(b,null,4);!function(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=document.createElement("a"),i=URL.createObjectURL(e);n.href=i,n.download=t,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),0)}}(new Blob([e],{type:"text/json"}),"channels.json")},children:Object(h.jsx)(vi.a,{})})})})]}),r?Object(h.jsx)(Pi,{search:r}):b.length>0?Object(h.jsx)(xr,{channels:b,showDragHandles:s}):Object(h.jsx)(Or,{})]})}var yr=Object(D.a)(Nt.c)((function(e){var t=e.theme;return{"& .MuiInputBase-input":{borderRadius:4,position:"relative",backgroundColor:t.palette.background.default,border:"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),fontSize:"0.9rem",width:"auto",minWidth:320,padding:t.spacing(1,1.5),transition:t.transitions.create(["border-color","box-shadow"]),"&:focus":{boxShadow:"".concat(Object(Mi.a)(t.palette.secondary.main,.25)," 0 0 0 0.2rem"),borderColor:t.palette.secondary.main}}}})),wr=n(287),Cr=Object(D.a)(wr.a)((function(e){var t=e.theme;return{width:36,height:20,padding:0,display:"flex","& .MuiSwitch-switchBase":{padding:3,color:t.palette.grey[500],"&.Mui-checked":{transform:"translateX(16px)",color:t.palette.common.white,"& + .MuiSwitch-track":{opacity:1,backgroundColor:t.palette.secondary.main,borderColor:t.palette.secondary.main}}},"& .MuiSwitch-thumb":{width:14,height:14,boxShadow:"none"},"& .MuiSwitch-track":{border:"1px solid ".concat(t.palette.grey[500]),borderRadius:10,opacity:1,backgroundColor:"light"===t.palette.mode?t.palette.common.white:"transparent"}}})),Sr=n(281),kr=Object(D.a)(Sr.a)((function(e){return{fontSize:"0.9rem","&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:e.theme.palette.secondary.light}}}})),Vr=function(e){return{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}},Rr=Object(D.a)(zi.a)((function(e){var t=e.theme;return{fontSize:"0.9rem","&.Mui-selected":Object(b.a)(Object(b.a)({},Vr(t)),{},{"&.Mui-focusVisible":Vr(t)}),"&.Mui-selected:hover":Vr(t)}}));function Tr(e){var t=e.label,n=e.description,i=e.placeholder,r=e.options,a=void 0===r?[]:r,o=e.value,c=e.type,s=e.onChange,l=function(e){if(s){var t=c===X.SettingType.Boolean?e.target.checked:e.target.value;s(t)}};return Object(h.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",py:2.5},children:[Object(h.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(h.jsx)(p.a,{variant:"subtitle1",children:t}),n?Object(h.jsx)(p.a,{variant:"body2",color:"textSecondary",children:n}):null]}),c===X.SettingType.String?Object(h.jsx)(yr,{value:o,placeholder:i,onChange:l}):null,c===X.SettingType.Boolean?Object(h.jsx)(Cr,{checked:o,onChange:l,inputProps:{"aria-label":"checkbox"}}):null,c===X.SettingType.List?Object(h.jsx)(kr,{value:o,size:"small",onChange:l,children:a.map((function(e,t){return Object(h.jsx)(Rr,{value:e.value,children:e.label},t)}))}):null]})}var Ar="AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo";function Dr(e){var t=e.settings,n=Vt(Dt),i=kt();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Mt,{open:n.loaded&&!t.apiKey,severity:"warning",closable:!0,syncOpen:!0,children:["In order to use this app you need a Youtube API key!"," ",Object(h.jsx)(x.a,{href:"#",color:"secondary",rel:"noopener",onClick:function(e){e.preventDefault(),i(te({apiKey:Ar}))},children:"Use a temporary key."})]}),Object(h.jsx)(Mt,{open:n.loaded&&t.apiKey===Ar,severity:"warning",closable:!0,syncOpen:!0,children:"You are using a temporary API key, which has a limited quota & might be used by other users. It is recommended to create your own key for daily use."})]})}function Ir(e){var t=Object(i.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Vt(Tt),c=kt();return Object(i.useEffect)((function(){ge&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return browser.runtime.sendMessage({message:e,params:n})}("getLastCheckDate").then((function(e){if(e){var t=new Date(e).getTime();a(pe.inWords(t))}}))}),[]),Object(h.jsxs)(j,{children:[Object(h.jsx)(Dr,{settings:o}),Object(h.jsxs)(wi.a,{sx:{px:3,overflow:"auto"},divider:Object(h.jsx)(Ci.a,{}),children:[Object(h.jsx)(Tr,{label:"Default view",value:o.defaultView,onChange:function(e){c(te({defaultView:e}))},options:[{label:"All",value:X.HomeView.All},{label:"Recent",value:X.HomeView.Recent},{label:"Watch later",value:X.HomeView.WatchLater}],type:X.SettingType.List}),Object(h.jsx)(Tr,{label:"Recent videos seniority",value:o.recentVideosSeniority,onChange:function(e){c(te({recentVideosSeniority:e}))},options:[{label:"1 day",value:X.VideosSeniority.OneDay},{label:"3 days",value:X.VideosSeniority.ThreeDays},{label:"7 days",value:X.VideosSeniority.SevenDays}],type:X.SettingType.List}),Object(h.jsx)(Tr,{label:"Dark mode",value:o.darkMode,onChange:function(e){c(te({darkMode:e}))},type:X.SettingType.Boolean}),Object(h.jsx)(Tr,{label:"Auto play videos",value:o.autoPlayVideos,onChange:function(e){c(te({autoPlayVideos:e}))},type:X.SettingType.Boolean}),ge?Object(h.jsx)(Tr,{label:"Enable notifications",description:"Checking for new videos is performed every 30 minutes".concat(r?" (Last check: ".concat(r,")"):""),value:o.enableNotifications,onChange:function(e){c(te({enableNotifications:e}))},type:X.SettingType.Boolean}):null,Object(h.jsx)(Tr,{label:"Youtube API key",placeholder:"_______________________________________",description:Object(h.jsxs)("span",{children:["Don't have an API key yet?"," ",Object(h.jsx)(x.a,{href:"https://www.slickremix.com/docs/get-api-key-for-youtube/",target:"_blank",color:"secondary",rel:"noopener",children:"Get your own!"})]}),value:o.apiKey,onChange:function(e){c(te({apiKey:e}))},type:X.SettingType.String})]})]})}var _r=n(310),Lr=n(311),Er=n(167),Pr=n.n(Er),Wr=n(94),zr=n.n(Wr);function Mr(e){var t=e.author,n=e.repositoryUrl;return Object(h.jsxs)(p.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},color:"text.secondary",children:["Made with ",Object(h.jsx)(Pr.a,{sx:{color:"#e1495c",fontSize:18}})," ","by ",t,n?Object(h.jsx)(x.a,{href:n,target:"_blank",rel:"noopener",children:Object(h.jsx)(Pt.a,{sx:{p:0},size:"small","aria-label":"github link",children:Object(h.jsx)(zr.a,{fontSize:"inherit"})})}):null]})}function Br(e){var t=e.children,n=e.tooltip,i=e.href,r=e.target,a=void 0===r?"_blank":r;return Object(h.jsx)(bn.a,{title:n,placement:"bottom",arrow:!0,children:Object(h.jsx)(x.a,{href:i,target:a,color:"inherit",rel:"noopener",children:t})})}var Hr=n(168),Nr=n.n(Hr),Fr=n(169),Gr=n.n(Fr);function Ur(e){return Object(h.jsx)(j,{children:Object(h.jsx)(d.a,{sx:{bgcolor:function(e){return"light"===e.palette.mode?"#f4f4f4":"transparent"},flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(h.jsxs)(Si.a,{variant:"outlined",children:[Object(h.jsxs)(_r.a,{sx:{pt:6,pb:12,px:12,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(h.jsx)(_t,{size:60,sx:{mb:3}}),Object(h.jsx)(p.a,{sx:{fontSize:"1.25rem",mb:1},variant:"h5",color:"text.primary",children:"YouTube viewer"}),Object(h.jsx)(Mr,{author:"AXeL"}),Object(h.jsxs)(d.a,{sx:{display:"flex",gap:1.5,color:function(e){return"light"===e.palette.mode?"grey.800":"grey.100"},mt:4},children:[Object(h.jsx)(Br,{tooltip:"Gmail",href:"mailto:contact.axel.dev@gmail.com",children:Object(h.jsx)(Nr.a,{})}),Object(h.jsx)(Br,{tooltip:"Discord",href:"https://discord.gg/rpD4fgxBgj",children:Object(h.jsx)(Gr.a,{})}),Object(h.jsx)(Br,{tooltip:"Github",href:"https://github.com/AXeL-dev/youtube-viewer",children:Object(h.jsx)(zr.a,{})})]})]}),Object(h.jsx)(Lr.a,{sx:{borderTop:1,borderColor:"divider",px:1.5},children:Object(h.jsx)(x.a,{sx:{textDecoration:"none"},href:"https://github.com/AXeL-dev/youtube-viewer/graphs/contributors",target:"_blank",rel:"noopener",children:Object(h.jsx)(Yn.a,{sx:{fontSize:"0.875rem",fontWeight:400,textTransform:"capitalize"},size:"small",color:"secondary",children:"Contributors"})})}),Object(h.jsx)(Lr.a,{sx:{borderTop:1,borderColor:"divider",px:1.5},children:Object(h.jsx)(Yn.a,{sx:{fontSize:"0.875rem",fontWeight:400,textTransform:"capitalize"},size:"small",color:"secondary",children:"Privacy policy"})})]})})})}function Kr(e){var t=Object(i.useRef)([]),n=Object(i.useRef)(null),r=Vt(Be),a=Vt(Tt),o=Vt(Dt);Object(i.useEffect)((function(){a.enableNotifications&&(t.current=[])}),[a.enableNotifications]);var c=function(){Se(""),ye(Ce)},s=function(e,t,i){$e("Handle message:",e);var r=null;return new Promise((function(t){switch(e.message){case"getLastCheckDate":r=n.current}$e("response:",r),t(r)}))};Object(i.useEffect)((function(){ge&&(ke("#666","#fff"),browser.runtime.onMessage.addListener(s),browser.notifications.onClicked.addListener((function(e){$e("Notification clicked:",e),c()})),browser.notifications.onButtonClicked.addListener((function(e,t){var n;$e("Notification button ".concat(t," clicked:"),e),$e("channels",r);var i=e.split("::"),a=Object(l.a)(i,2)[1],o=null===(n=r.find((function(e){return e.id===a})))||void 0===n?void 0:n.url;(null===o||void 0===o?void 0:o.length)&&ye(o)})),browser.browserAction.onClicked.addListener((function(e){$e("Browser action clicked:",e),c()})),browser.storage.onChanged.addListener((function(e,t){if($e("Storage changed:",t,e),"local"===t){var n=e[Ot].newValue,i=n.settings,r=n.channels,a=n.videos;wt(te(i)),wt(oe(r)),wt(at(a))}})),$e("Background page initialised."))}),[]),Object(i.useEffect)((function(){ge&&o.loaded&&($e("Removing outdated videos."),wt(ut(),!0))}),[o.loaded]);var d=function(){var e=Object(K.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,browser.browserAction.getBadgeText({});case 2:(n=e.sent).length&&(t+=+n),$e("Updating badge:",t),Se(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){if(t.current.push(e),t.current.length===r.length){n.current=new Date;var i=t.current.reduce((function(e,t){return e+t.newVideos.length}),0);if($e("All channel checkers responded, new videos count:",i),i>0){d(i);var a=t.current.filter((function(e){return e.newVideos.length>0})),o=a.slice(0,Math.min(5,a.length)).map((function(e){return e.channel.title})).join(", ");!function(e){var t=e.id,n=e.type,i=void 0===n?"basic":n,r=e.title,a=void 0===r?"YouTube viewer":r,o=e.iconUrl,c=void 0===o?"icons/128.png":o,s=Object(Oe.a)(e,["id","type","title","iconUrl"]);browser.notifications.create(t,Object(b.a)({type:i,title:a,iconUrl:c},s))}({title:"YouTube viewer (".concat(i," new video").concat(i>1?"s":"",")"),message:"Posted by ".concat(o).concat(a.length>5?" & others":"",".")});var c=a.reduce((function(e,t){return[].concat(Object(Ye.a)(e),Object(Ye.a)(t.newVideos))}),[]);$e("Saving notified videos.",c),wt(dt(c),!0)}t.current=[]}};return ge?Object(h.jsx)(h.Fragment,{children:o.loaded&&a.enableNotifications?r.map((function(e,t){return Object(h.jsx)(nt,{channel:e,onCheckEnd:u},t)})):null}):Object(h.jsx)("span",{children:"This script is not intended to run on a webapp."})}var Yr=n(288),Jr=n(279),qr=n(171),Xr=n(95),Qr=(n(215),n(216),n(217),n(218),n(219),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return Object(qr.a)({palette:Object(b.a)({mode:e,primary:{light:"#e9321a",main:"#f21718",dark:"#b81112"},secondary:{light:"#1a88ff",main:"#007bff",dark:"#006fe6"}},"light"===e?{background:{default:"#fff"},custom:{lightGrey:"#fafafa",lightBorder:Xr.b.divider}}:{background:{default:"#181818"},custom:{lightGrey:"#212121",lightBorder:"rgba(255, 255, 255, 0.23)"}}),breakpoints:{values:{xxs:0,xs:780,sm:1e3,md:1200,lg:1400,xl:1600}}})});var Zr=function(){var e=Vt(At),t=Qr(e);return Object(h.jsxs)(Yr.a,{theme:t,children:[Object(h.jsx)(Jr.a,{}),Object(h.jsx)(c.a,{children:Object(h.jsxs)(s.c,{children:[Object(h.jsx)(s.a,{exact:!0,path:"/",component:pi}),Object(h.jsx)(s.a,{exact:!0,path:"/channels",component:gr}),Object(h.jsx)(s.a,{exact:!0,path:"/settings",component:Ir}),Object(h.jsx)(s.a,{exact:!0,path:"/about",component:Ur}),Object(h.jsx)(s.a,{path:"/background",component:Kr})]})})]})},$r=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(q.a,{store:Rt,children:Object(h.jsx)(Zr,{})})}),document.getElementById("root")),$r()}},[[220,1,2]]]);
//# sourceMappingURL=main.64e32961.chunk.js.map