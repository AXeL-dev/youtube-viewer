(this["webpackJsonpyoutube-viewer"]=this["webpackJsonpyoutube-viewer"]||[]).push([[0],{173:function(e,t,n){e.exports=n(232)},178:function(e,t,n){},180:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),l=(n(178),n(35)),c=n.n(l),s=n(18),u=n(9),d=n(57),m=n(119),h=n(120),p=n(151),f=n(149),v=(n(180),n(30)),g=n(27),b=n(3),E=n(122),y=n(306),C=n(22),w=n(299),k=n(298),x=n(296),O=n(297),S=n(43),j=n(280),N=n(274),R=n(142),I=n.n(R),V=n(144),P=n.n(V),A=n(145),B=n.n(A),T=n(70),z=n.n(T),L=n(143),D=n.n(L),H=n(146),F=n.n(H),M=n(147),W=n.n(M),K=n(300),U=n(276),_=n(152),J=n(272),$=n(275),G=n(12),Y=n(121),q=n.n(Y);function X(e){var t=e.replace("PT","").toUpperCase(),n=r("H"),a=r("M"),o=r("S");return"00"!==n?[n,a,o].join(":"):[a,o].join(":");function r(e){for(var n=0;n<t.length;n++)if(t[n]===e){var a=t.slice(0,n);return 1===a.length&&"H"!==e&&(a="0"+a),t=t.slice(n+1),a}return"00"}}function Q(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=["k","M","G","T","P","E","Z","Y"],o=a.length-1;o>=0;o--)if(e<=-(t=Math.pow(1e3,o+1))||e>=t)return+(e/t).toFixed(n)+a[o];return e}var Z=function(){var e={locales:{prefix:"",sufix:"ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},inWords:function(t){var n=Math.floor((new Date-parseInt(t))/1e3),a=e.locales.separator||" ",o=e.locales.prefix+a,r=0,i={year:n/31536e3,month:n/2592e3,day:n/86400,hour:n/3600,minute:n/60},l=e.locales.seconds;for(var c in i){if((r=Math.floor(i[c]))>1){l=e.locales[c+"s"];break}if(1===r){l=e.locales[c];break}}return(o+=(l=l.replace(/%d/i,r))+a+e.locales.sufix).trim()}};return e}();function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;return t.setDate(t.getDate()-e),t}function te(e){return(new Date).setHours(0,0,0,0)===new Date(e).setHours(0,0,0,0)}function ne(e,t){var n=(t.getTime()-e.getTime())/1e3;return n/=3600,Math.abs(Math.round(n))}function ae(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach((function(t){e.push(oe(t))})),Promise.all(e)}function oe(e){return new Promise((function(t,n){try{browser.storage.local.get(e).then((function(n){t(n[e])}))}catch(r){var a,o=localStorage.getItem(e);try{a=JSON.parse(o)}catch(r){a=o}t(a)}}))}function re(e){var t=[];return Object.keys(e).forEach((function(n){t.push(function(e,t){return new Promise((function(n,a){try{browser.storage.local.set(Object(g.a)({},e,t)).then((function(){n()}))}catch(r){var o;try{o=JSON.stringify(t)}catch(r){o=t}localStorage.setItem(e,o),n()}}))}(n,e[n]))})),Promise.all(t)}var ie="AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo",le=function(){function e(){return(e=Object(d.a)(c.a.mark((function e(){var t,n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae("settings");case 2:n=e.sent,a=Object(u.a)(n,1),o=a[0],ie=(null===o||void 0===o||null===(t=o.apiKey)||void 0===t?void 0:t.length)?o.apiKey:ie;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(d.a)(c.a.mark((function e(t){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:if((n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:throw o=e.sent,Error((null===o||void 0===o||null===(a=o.error)||void 0===a?void 0:a.errors[0])?"<strong>".concat(o.error.errors[0].reason,"</strong>: ").concat(o.error.errors[0].message.replace(/<\/?[^>]+(>|$)/g,"")):"HTTP ".concat(n.status,": ").concat(n.url));case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(e,n){return function(e){return t.apply(this,arguments)}(function(e,t){var n="https://www.googleapis.com/youtube/v3/"+e+"?";return n+=new URLSearchParams(Object(s.a)(Object(s.a)({},t),{},{key:ie})).toString()}(e,n))}}();function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return le("activities",{part:"snippet,contentDetails",channelId:e,publishedAfter:t.toISOString(),maxResults:50})}Symbol("Video does not exist");function se(e){var t=e.join(",");return le("videos",{part:"snippet,contentDetails,statistics,id",fields:"items(id,contentDetails/duration,statistics/viewCount,snippet(title,channelTitle,channelId,publishedAt,thumbnails/medium))",id:t,maxResults:50}).then((function(e){return e.items.map((function(e){return{id:e.id,title:e.snippet.title,url:"https://www.youtube.com/watch?v="+e.id,duration:X(e.contentDetails.duration),views:{count:e.statistics.viewCount,asString:Q(e.statistics.viewCount)},publishedAt:new Date(e.snippet.publishedAt).getTime(),thumbnail:e.snippet.thumbnails.medium.url,channelId:e.snippet.channelId,channelTitle:e.snippet.channelTitle}}))}))}var ue,de=n(307),me=n(155),he=n(49),pe=n.n(he),fe=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return o.a.createElement("span",{className:a,dangerouslySetInnerHTML:{__html:t.replace(/\n/g,"<br />")}})},ve=Object(E.a)((function(e){return{search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(G.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(G.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(6),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},clearButton:{position:"absolute",right:0,top:0,margin:e.spacing(.75),color:e.palette.common.white},inputRoot:{color:"inherit"},inputInput:Object(g.a)({padding:e.spacing(1,4,1,6),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:200,"&:focus":{width:260}}),poper:{position:"absolute",width:"100%",zIndex:1,margin:"4px 0",overflow:"hidden",borderRadius:"4px",boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)"},listbox:{position:"relative",margin:0,padding:"8px 0",border:"none",listStyle:"none",backgroundColor:e.palette.background.paper,overflow:"auto",maxHeight:"40vh","& li":{padding:"6px 16px"},'& li[data-focus="true"]':{backgroundColor:"rgba(0, 0, 0, 0.08)",cursor:"pointer"},"& li:active":{backgroundColor:"rgba(0, 0, 0, 0.14)"}},avatar:{color:e.palette.text.secondary,marginRight:e.spacing(2)}}}));function ge(e){var t=e.onSelect,n=e.onError,a=ve(),r=o.a.useState(""),i=Object(u.a)(r,2),l=i[0],c=i[1],d=o.a.useState([]),m=Object(u.a)(d,2),h=m[0],p=m[1],f=Object(J.a)({id:"search-autocomplete",options:h,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.title)?(c(e.title),e.title):e},value:l}),v=f.getRootProps,g=f.getInputProps,b=f.getListboxProps,E=f.getOptionProps,y=f.groupedOptions,C=o.a.useMemo((function(){return q()((function(e,t){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return le("search",{part:"snippet",type:"channel",order:"relevance",q:e}).then((function(e){var n=[];if(e.pageInfo.totalResults>0)for(var a=Math.min(e.pageInfo.totalResults,t),o=0;o<a;o++)e.items[o]&&n.push({title:e.items[o].snippet.title,url:"https://www.youtube.com/channel/"+e.items[o].id.channelId+"/videos",description:e.items[o].snippet.description,thumbnail:e.items[o].snippet.thumbnails.medium.url,id:e.items[o].id.channelId});return n}))})(e.value,5).then((function(e){t(e)})).catch((function(e){n(e)}))}),200)}),[]);return o.a.useEffect((function(){var e=!0;if(""!==l)return C({value:l},(function(t){e&&p(t||[])})),function(){e=!1};p([])}),[l,C]),o.a.createElement("div",{className:a.search},o.a.createElement("div",v(),o.a.createElement("div",{className:a.searchIcon},o.a.createElement(z.a,null)),o.a.createElement(me.a,{placeholder:"Search for a channel\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:Object(s.a)(Object(s.a)({},g()),{},{"aria-label":"search"}),onChange:function(e){c(e.target.value)}}),(null===l||void 0===l?void 0:l.length)>0&&o.a.createElement(N.a,{"aria-label":"clear",size:"small",className:a.clearButton,onClick:function(){return c("")}},o.a.createElement(pe.a,{fontSize:"inherit"}))),y.length>0?o.a.createElement("div",{className:a.poper},o.a.createElement("ul",Object.assign({className:a.listbox},b()),y.map((function(e,n){return o.a.createElement("li",E({option:e,index:n}),o.a.createElement($.a,{container:!0,alignItems:"center",onClick:function(){return t(e)}},o.a.createElement($.a,{item:!0},o.a.createElement(de.a,{className:a.avatar,alt:e.title,src:e.thumbnail})),o.a.createElement($.a,{item:!0,xs:!0},o.a.createElement(S.a,{variant:"body2",color:"textSecondary"},o.a.createElement(fe,null,e.title.replace(new RegExp("("+l+")","gi"),"<strong>$1</strong>"))))))})))):null)}!function(e){e[e.All=-1]="All",e[e.None=-2]="None",e[e.RecentVideos=-3]="RecentVideos",e[e.TodaysVideos=-4]="TodaysVideos"}(ue||(ue={}));var be=n(304),Ee=n(124),ye=n.n(Ee),Ce=n(125),we=n.n(Ce),ke=n(308),xe=n(277);function Oe(e){var t=e.item,n=e.onClick,a={anchor:{textDecoration:"none",color:"inherit",display:"inline-block"},imageContainer:{position:"relative"},image:{width:210,height:118,display:"inherit"},duration:{position:"absolute",bottom:0,right:0,margin:"4px",color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"2px 4px",borderRadius:"2px"}};return o.a.createElement(U.a,{href:t.url,style:a.anchor,target:"_blank",rel:"noopener",onClick:function(e){return n(e)}},o.a.createElement(K.a,{style:a.imageContainer},o.a.createElement("img",{style:a.image,alt:"",src:t.thumbnail}),o.a.createElement(S.a,{variant:"caption",style:a.duration},t.duration)),o.a.createElement(K.a,{pr:2,mt:1},o.a.createElement(S.a,{gutterBottom:!0,variant:"body2"},t.title),o.a.createElement(S.a,{display:"block",variant:"caption",color:"textSecondary"},t.channelTitle),o.a.createElement(S.a,{variant:"caption",color:"textSecondary"},"".concat(t.views.asString||t.views," \u2022 ").concat(Z.inWords(t.publishedAt)))))}function Se(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a]}function je(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a]}function Ne(e){var t=e.videos,n=e.loading,a=void 0!==n&&n,r=e.maxPerChannel,i=void 0===r?9:r,l=e.maxSkeletons,c=void 0===l?9:l,s=e.onVideoClick,d=o.a.useState(!1),m=Object(u.a)(d,2),h=m[0],p=m[1],f=function(e){if(Se(e.type,{preventLongPress:h}),"mousedown"===e.type)p(!1),setTimeout((function(){p(!0)}),200);else{if(!h)return!0;p(!1)}return e.stopPropagation(),e.preventDefault(),!1};return o.a.createElement($.a,{container:!0,style:{minWidth:"428px"},onMouseDown:function(e){return f(e)},onClickCapture:function(e){return f(e)}},(a?Array.from(new Array(Math.min(i,c))):t.slice(0,i)).map((function(e,t){return o.a.createElement(K.a,{key:t,width:210,marginRight:.5,marginBottom:3,draggable:"false"},e?o.a.createElement(Oe,{item:e,onClick:s}):o.a.createElement(o.a.Fragment,null,o.a.createElement(xe.a,{variant:"rect",width:210,height:118}),o.a.createElement(K.a,{pt:.5},o.a.createElement(xe.a,null),o.a.createElement(xe.a,{width:"60%"}))))})))}var Re,Ie=n(72),Ve=n.n(Ie),Pe=Object(E.a)((function(e){return{breadcrumb:{marginBottom:e.spacing(2.5)},divider:{marginBottom:e.spacing(2.5)},link:{display:"flex",alignItems:"center",cursor:"pointer",outline:"none","&:hover":{backgroundColor:"transparent"}},title:{marginLeft:e.spacing(1)},youtube:{"& :hover":{color:"#f44336"}},box:{"& :last-child":{"& hr.divider":{display:"none"}}}}}));function Ae(e){var t=Pe(),n=Object(C.a)(),a=e.channels,r=e.videos,i=e.settings,l=e.loading,c=void 0!==l&&l,s=e.maxPerChannel,d=void 0===s?9:s,m=e.onSelect,h=e.onVideoClick,p=e.onSave,f=e.onRefresh,g=o.a.useState([]),b=Object(u.a)(g,2),E=b[0],y=b[1];return o.a.createElement(K.a,{overflow:"hidden",className:t.box},a.map((function(e,l){if(!e.isHidden){var s=r.filter((function(t){return t.channelId===e.id}));if(c||!i.hideEmptyChannels||0!==s.length)return o.a.createElement(K.a,{key:l},o.a.createElement(be.a,{"aria-label":"breadcrumb",className:t.breadcrumb},o.a.createElement(U.a,{color:"inherit",className:t.link,href:e.url,target:"_blank",rel:"noopener",onClick:function(t){return function(e,t,n){(null===i||void 0===i?void 0:i.openChannelsOnNameClick)||(e.preventDefault(),m(t,n))}(t,e,l)}},o.a.createElement(de.a,{alt:e.title,src:e.thumbnail}),o.a.createElement(S.a,{variant:"subtitle1",color:"textPrimary",className:t.title},e.title)),!(null===i||void 0===i?void 0:i.openChannelsOnNameClick)&&o.a.createElement(U.a,{color:"inherit",className:"".concat(t.link," ").concat(t.youtube),href:e.url,target:"_blank",rel:"noopener"},o.a.createElement(ke.a,{title:"Open channel","aria-label":"open-channel"},o.a.createElement(ye.a,null))),o.a.createElement(N.a,{size:"small",className:t.link,onClick:function(){return function(e){a.forEach((function(t){if(t.id===e.id)return t.isHidden=!0,p(Object(v.a)(a)),void f()}))}(e)}},o.a.createElement(ke.a,{title:"Hide channel","aria-label":"hide-channel"},o.a.createElement(Ve.a,null)))),o.a.createElement(Ne,{videos:E.indexOf(l)>-1?s:s.slice(0,3),loading:c,maxPerChannel:d,maxSkeletons:3,onVideoClick:h}),s.length>3&&-1===E.indexOf(l)&&o.a.createElement(ke.a,{title:"Show more","aria-label":"show-more"},o.a.createElement(N.a,{edge:"end","aria-label":"show-more",size:"small",style:{marginBottom:n.spacing(2.5)},onClick:function(){return y([].concat(Object(v.a)(E),[l]))}},o.a.createElement(we.a,{fontSize:"small"}))),o.a.createElement(j.a,{className:"divider ".concat(t.divider)}))}})))}!function(e){e[e.String=0]="String",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean"}(Re||(Re={}));var Be=n(289),Te=n(290),ze=n(233),Le=n(292),De=n(294),He=n(295),Fe=n(133),Me=n.n(Fe),We=n(61),Ke=n.n(We),Ue=n(75),_e=n.n(Ue),Je=n(137),$e=n.n(Je),Ge=n(138),Ye=n.n(Ge),qe=n(132),Xe=n.n(qe),Qe=n(130),Ze=n.n(Qe),et=n(131),tt=n.n(et),nt=n(88),at=n.n(nt),ot=n(136),rt=n.n(ot),it=n(293),lt=n(303),ct=n(291),st=n(150),ut=n(76),dt=n(286),mt=n(281),ht=n(285),pt=n(283),ft=n(284),vt=n(282);function gt(e){var t=e.open,n=e.title,a=e.description,r=e.confirmButtonText,i=void 0===r?"Confirm":r,l=e.cancelButtonText,c=void 0===l?"Cancel":l,s=e.onClose,u=e.onConfirm;return o.a.createElement(mt.a,{open:t,onClose:function(){return s()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(vt.a,{id:"alert-dialog-title"},n),o.a.createElement(pt.a,null,o.a.createElement(ft.a,{id:"alert-dialog-description"},o.a.createElement(fe,null,a))),o.a.createElement(ht.a,null,o.a.createElement(dt.a,{onClick:function(){return s()},color:"primary"},c),o.a.createElement(dt.a,{onClick:function(){return u()},color:"primary",autoFocus:!0},i)))}var bt=n(301);function Et(e){var t=e.open,n=e.title,a=e.description,r=e.textFieldId,i=e.textFieldLabel,l=e.confirmButtonText,c=void 0===l?"Import":l,s=e.cancelButtonText,d=void 0===s?"Cancel":s,m=e.onClose,h=e.onConfirm,p=e.onValidate,f=o.a.useState(!1),v=Object(u.a)(f,2),g=v[0],b=v[1],E=function(){b(!1),m()};return o.a.createElement(mt.a,{open:t,onClose:E,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(vt.a,{id:"alert-dialog-title"},n),o.a.createElement(pt.a,null,o.a.createElement(ft.a,{id:"alert-dialog-description"},o.a.createElement(fe,null,a)),o.a.createElement(bt.a,{autoFocus:!0,margin:"dense",id:r,label:i,error:g,multiline:!0,rows:"10",variant:"outlined",fullWidth:!0})),o.a.createElement(ht.a,null,o.a.createElement(dt.a,{onClick:E,color:"primary"},d),o.a.createElement(dt.a,{onClick:function(){try{var e=document.getElementById(r).value,t=JSON.parse(e),n=p(t);b(!n),n&&h(t)}catch(a){b(!0)}},color:"primary",autoFocus:!0},c)))}function yt(e){var t=e.open,n=e.title,a=e.min,r=void 0===a?0:a,i=e.max,l=void 0===i?100:i,c=e.step,s=void 0===c?1:c,d=e.positionFieldId,m=e.positionFieldLabel,h=e.confirmButtonText,p=void 0===h?"Move":h,f=e.cancelButtonText,v=void 0===f?"Cancel":f,g=e.onClose,b=e.onConfirm,E=o.a.useState(!1),y=Object(u.a)(E,2),C=y[0],w=y[1],k=function(){w(!1),g()};return o.a.createElement(mt.a,{open:t,onClose:k,"aria-labelledby":"alert-dialog-title"},o.a.createElement(vt.a,{id:"alert-dialog-title"},n),o.a.createElement(pt.a,null,o.a.createElement(bt.a,{autoFocus:!0,id:d,label:m,error:C,inputProps:{min:r,max:l,step:s},defaultValue:r,type:"number",size:"small",variant:"outlined",fullWidth:!0})),o.a.createElement(ht.a,null,o.a.createElement(dt.a,{onClick:k,color:"primary"},v),o.a.createElement(dt.a,{onClick:function(){var e,t=document.getElementById(d).value,n=(e=t,!isNaN(+e)&&/^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/.test(e));w(!n),n&&b(+t)},color:"primary",autoFocus:!0},p)))}function Ct(){try{return!!browser}catch(e){return!1}}function wt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return browser.tabs.create({url:e,active:t})}function kt(){return-1!==navigator.userAgent.indexOf("Firefox")}var xt=n(140),Ot=n.n(xt),St=n(139),jt=n.n(St),Nt=n(135),Rt=n.n(Nt),It=n(134),Vt=n.n(It),Pt=Object(E.a)((function(e){return Object(y.a)({channelsOptionsIcon:{top:"50%",right:"16px",position:"absolute",transform:"translateY(-50%)"},menuIcon:{fontSize:20,marginRight:e.spacing(1),verticalAlign:"middle"},subheader:{position:"relative"}})}));function At(e){var t=e.channels,n=e.selectedIndex,a=void 0===n?ue.All:n,r=e.cacheSize,i=e.todaysVideosCount,l=e.recentVideosCount,c=e.onShowAll,d=e.onShowTodaysVideos,m=e.onShowRecentVideos,h=e.onRefresh,p=e.onSelect,f=e.onDelete,g=e.onSave,b=e.onSelectedIndexChange,E=e.onClearCache,y=e.onClearRecentVideos,C=e.onImport,w=Pt(),k=o.a.useState(!1),x=Object(u.a)(k,2),O=x[0],S=x[1],j=o.a.useState(),R=Object(u.a)(j,2),I=R[0],V=R[1],P=o.a.useState(0),A=Object(u.a)(P,2),B=A[0],T=A[1],z=o.a.useState(null),L=Object(u.a)(z,2),D=L[0],H=L[1],F=o.a.useState(-1),M=Object(u.a)(F,2),W=M[0],K=M[1],U=o.a.useState(!1),_=Object(u.a)(U,2),J=_[0],$=_[1],G=o.a.useState(!1),Y=Object(u.a)(G,2),q=Y[0],X=Y[1],Q=o.a.useState(!1),Z=Object(u.a)(Q,2),ee=Z[0],te=Z[1],ne=o.a.useState(-1),ae=Object(u.a)(ne,2),oe=ae[0],re=ae[1],ie=function(){return t.find((function(e,t){return t===a}))},le=function(e,n){he();var a=ie(),o=function(e,t,n){var a=Array.from(e),o=a.splice(t,1),r=Object(u.a)(o,1)[0];return a.splice(n,0,r),a}(t,e,n);g(o),a&&b(o.indexOf(a))},ce=function(){S(!1)},se=function(e,n){he(),t[n]=e,g(Object(v.a)(t)),a<0&&a!==ue.None&&h(a)},me=function(e,t){e.stopPropagation(),H(e.currentTarget),K(t)},he=function(){H(null),K(-1)},pe=function(){$(!1)},fe=function(){he();var e=JSON.stringify(t,null,4);!function(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=document.createElement("a"),a=URL.createObjectURL(e);n.href=a,n.download=t,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)}),0)}}(new Blob([e],{type:"text/json"}),"channels.json")},ve=function(){te(!1)},ge=function(){re(-1)},be=function(){X(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ut.a,{onDragEnd:function(e){e.destination&&le(e.source.index,e.destination.index)}},o.a.createElement(ut.c,{droppableId:"droppable"},(function(e,n){return o.a.createElement(lt.a,{rootRef:e.innerRef},o.a.createElement(Be.a,{dense:!0,subheader:o.a.createElement(Te.a,{className:w.subheader},"Channels",o.a.createElement(N.a,{edge:"end","aria-label":"channels-options",size:"small",className:w.channelsOptionsIcon,onClick:function(e){return me(e,"channels-options")}},o.a.createElement(_e.a,{fontSize:"small"})),o.a.createElement(st.a,{id:"menu-channels-options",anchorEl:D,keepMounted:!0,open:"channels-options"===W,onClose:he},o.a.createElement(ct.a,{onClick:function(){return fe()}},o.a.createElement(Ze.a,{className:w.menuIcon})," Export"),o.a.createElement(ct.a,{onClick:function(){return he(),void te(!0)}},o.a.createElement(tt.a,{className:w.menuIcon}),"Import"),o.a.createElement(ke.a,{title:"Cache size: "+r,"aria-label":"clear-cache"},o.a.createElement(ct.a,{onClick:function(){return he(),void $(!0)}},o.a.createElement(Xe.a,{className:w.menuIcon}),"Clear cache")))),style:(n.isDraggingOver,{})},o.a.createElement(ze.a,{button:!0,key:"all",selected:a===ue.All,onClick:function(){return c()}},o.a.createElement(Le.a,null,o.a.createElement(it.a,{color:"secondary",badgeContent:t.length},o.a.createElement(de.a,null,o.a.createElement(Me.a,null)))),o.a.createElement(De.a,{primary:"All"}),(null===t||void 0===t?void 0:t.length)>0&&o.a.createElement(He.a,null,o.a.createElement(ke.a,{title:"Refresh","aria-label":"refresh"},o.a.createElement(N.a,{edge:"end","aria-label":"refresh",size:"small",onClick:function(e){return function(e){h(ue.All,e)}(e)}},o.a.createElement(Ke.a,{fontSize:"small"}))))),o.a.createElement(ze.a,{button:!0,key:"today",selected:a===ue.TodaysVideos,onClick:function(){return d()}},o.a.createElement(Le.a,null,o.a.createElement(it.a,{color:"secondary",badgeContent:i},o.a.createElement(de.a,null,o.a.createElement(Vt.a,null)))),o.a.createElement(De.a,{primary:"Today's videos"}),(null===t||void 0===t?void 0:t.length)>0&&o.a.createElement(He.a,null,o.a.createElement(ke.a,{title:"Refresh","aria-label":"refresh"},o.a.createElement(N.a,{edge:"end","aria-label":"refresh",size:"small",onClick:function(e){return function(e){he(),h(ue.TodaysVideos,e)}(e)}},o.a.createElement(Ke.a,{fontSize:"small"}))))),o.a.createElement(ze.a,{button:!0,key:"recent",selected:a===ue.RecentVideos,onClick:function(){return m()}},o.a.createElement(Le.a,null,o.a.createElement(it.a,{color:"secondary",badgeContent:l},o.a.createElement(de.a,null,o.a.createElement(Rt.a,null)))),o.a.createElement(De.a,{primary:"Recent videos"}),(null===t||void 0===t?void 0:t.length)>0&&o.a.createElement(He.a,null,o.a.createElement(N.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return me(e,ue.RecentVideos)}},o.a.createElement(_e.a,{fontSize:"small"})),o.a.createElement(st.a,{id:"menu-recent-videos",anchorEl:D,keepMounted:!0,open:W===ue.RecentVideos,onClose:he},o.a.createElement(ct.a,{onClick:function(e){return function(e){he(),h(ue.RecentVideos,e)}(e)}},o.a.createElement(Ke.a,{className:w.menuIcon})," Refresh"),l>0&&o.a.createElement(ct.a,{onClick:function(){return he(),void X(!0)}},o.a.createElement(at.a,{className:w.menuIcon})," Clear")))),t.map((function(e,n){return o.a.createElement(ut.b,{key:e.id,draggableId:e.id,index:n},(function(r,i){return o.a.createElement(ze.a,Object.assign({ContainerProps:{ref:r.innerRef}},r.draggableProps,r.dragHandleProps,{style:(l=i.isDragging,c=e.isHidden,u=r.draggableProps.style,Object(s.a)(Object(s.a)(Object(s.a)({},u),l&&{background:"rgb(235,235,235)"}),c&&{opacity:.5,textDecoration:"line-through"})),button:!0,selected:n===a,onClick:function(){return p(e,n)}}),o.a.createElement(Le.a,null,o.a.createElement(de.a,{alt:e.title,src:e.thumbnail})),o.a.createElement(De.a,{primary:e.title}),o.a.createElement(He.a,null,o.a.createElement(N.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return me(e,n)}},o.a.createElement(_e.a,{fontSize:"small"})),o.a.createElement(st.a,{id:"menu-"+n,anchorEl:D,keepMounted:!0,open:W===n,onClose:he},o.a.createElement(ct.a,{onClick:function(){return function(e){he(),Ct()?wt(e.url):window.open(e.url,"_blank")}(e)}},o.a.createElement(rt.a,{className:w.menuIcon})," Open channel"),o.a.createElement(ct.a,{onClick:function(){return function(e,t){he(),p(e,t,!0)}(e,n)}},o.a.createElement(Ke.a,{className:w.menuIcon})," Refresh"),Ct()&&kt()&&n>0&&o.a.createElement(ct.a,{onClick:function(){return le(n,n-1)}},o.a.createElement($e.a,{className:w.menuIcon}),"Move up"),Ct()&&kt()&&n<t.length-1&&o.a.createElement(ct.a,{onClick:function(){return le(n,n+1)}},o.a.createElement(Ye.a,{className:w.menuIcon}),"Move down"),Ct()&&kt()&&o.a.createElement(ct.a,{onClick:function(){return e=n,he(),void re(e);var e}},o.a.createElement(jt.a,{className:w.menuIcon}),"Move to position"),e.isHidden?o.a.createElement(ct.a,{onClick:function(){return function(e,t){e.isHidden=!1,se(e,t)}(e,n)}},o.a.createElement(Ot.a,{className:w.menuIcon})," Unhide"):o.a.createElement(ct.a,{onClick:function(){return function(e,t){e.isHidden=!0,se(e,t)}(e,n)}},o.a.createElement(Ve.a,{className:w.menuIcon})," Hide"),o.a.createElement(ct.a,{onClick:function(){return function(e,t){he(),V(e),T(t),S(!0)}(e,n)}},o.a.createElement(at.a,{className:w.menuIcon})," Delete"))));var l,c,u}))})),e.placeholder))}))),o.a.createElement(gt,{open:J,title:"Clear cache",description:"This action is irreversible, would you like to continue?",confirmButtonText:"Clear",onClose:pe,onConfirm:function(){E(),pe()}}),o.a.createElement(gt,{open:q,title:"Clear recent videos",description:"Would you like to reset/clear recent videos?",confirmButtonText:"Clear",onClose:be,onConfirm:function(){y(),be()}}),o.a.createElement(gt,{open:O,title:"Delete Channel",description:"Would you like to delete <strong>"+(null===I||void 0===I?void 0:I.title)+"</strong> channel?",confirmButtonText:"Delete",onClose:ce,onConfirm:function(){var e=ie();f(B),e&&a!==B&&b(t.filter((function(e,t){return t!==B})).indexOf(e)),ce()}}),o.a.createElement(Et,{open:ee,title:"Import Channels",description:"Copy & paste below the content of <strong>channels.json</strong> file. Notice that your current channels list will be overrided!",textFieldId:"channels-to-import",textFieldLabel:"Channels (json)",onClose:ve,onConfirm:function(e){C(e),ve()},onValidate:function(e){var t=!0;return e.forEach((function(e){e.id&&e.title&&e.thumbnail&&e.description&&e.url||(t=!1)})),t}}),o.a.createElement(yt,{open:oe>-1,title:"Move Channel To Position",min:1,max:t.length,positionFieldId:"channel-position",positionFieldLabel:"Position",onClose:ge,onConfirm:function(e){var t=e-1;t!==oe&&le(oe,t),ge()}}))}var Bt=n(305);function Tt(e){var t=e.message,n=e.open,a=e.onClose,r=e.autoHideDuration,i=void 0===r?6e3:r,l=e.anchorOrigin,c=void 0===l?{vertical:"top",horizontal:"center"}:l;return o.a.createElement(Bt.a,{anchorOrigin:c,open:n,autoHideDuration:i,onClose:function(){return a()},message:t&&o.a.createElement(fe,null,t),action:o.a.createElement(dt.a,{color:"secondary",size:"small",onClick:function(){return a()}},"Close")})}var zt=n(234),Lt=n(309),Dt=n(302),Ht=Object(E.a)((function(e){return Object(y.a)({settingsAppBar:{position:"relative",backgroundColor:"#f44336"},settingsTitle:{marginLeft:e.spacing(2),flex:1},container:{width:"223px",height:"40px"},select:{padding:"10px 26px 10px 12px","&:-moz-focusring":{color:"transparent",textShadow:"0 0 0 #000"}},optionLabel:{maxWidth:"70%"}})})),Ft=o.a.forwardRef((function(e,t){return o.a.createElement(zt.a,Object.assign({direction:"up",ref:t},e))}));function Mt(e){var t=e.settings,n=e.open,a=e.onClose,r=e.onSave,i=Ht(),l=function(e){var t=e.target;"number"===t.type&&(!t.value.match(/^\d+$/)||+t.value<+t.min?t.value=t.min:+t.value>+t.max&&(t.value=t.max))};return o.a.createElement(mt.a,{fullScreen:!0,open:n,onClose:function(){return a()},TransitionComponent:Ft},o.a.createElement(x.a,{color:"secondary",className:i.settingsAppBar},o.a.createElement(O.a,null,o.a.createElement(N.a,{edge:"start",color:"inherit",onClick:function(){return a()},"aria-label":"close"},o.a.createElement(pe.a,null)),o.a.createElement(S.a,{variant:"h6",className:i.settingsTitle},"Settings"),o.a.createElement(dt.a,{autoFocus:!0,color:"inherit",onClick:function(){return r()}},"save"))),o.a.createElement(Be.a,null,o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Default channel selection",secondary:"The channel menu that would be selected by default",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Dt.a,{native:!0,inputProps:{id:"defaultChannelSelection",className:i.select},variant:"outlined",color:"secondary",className:i.container,defaultValue:null===t||void 0===t?void 0:t.defaultChannelSelection},o.a.createElement("option",{value:ue.All},"All"),o.a.createElement("option",{value:ue.TodaysVideos},"Today's videos"),o.a.createElement("option",{value:ue.RecentVideos},"Recent videos")))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Max videos per channel",secondary:"The maximum number of videos to show per channel",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(bt.a,{id:"videosPerChannel",type:"number",size:"small",variant:"outlined",color:"secondary",inputProps:{min:3,max:50,step:3},className:i.container,defaultValue:null===t||void 0===t?void 0:t.videosPerChannel,onChange:function(e){return l(e)}}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Anteriority of videos (in days)",secondary:"Number of days to subtract from the current date",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(bt.a,{id:"videosAnteriority",type:"number",size:"small",variant:"outlined",color:"secondary",inputProps:{min:1,max:365,step:7},className:i.container,defaultValue:null===t||void 0===t?void 0:t.videosAnteriority,onChange:function(e){return l(e)}}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Sort videos by",secondary:"Videos sorting criteria",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Dt.a,{native:!0,inputProps:{id:"sortVideosBy",className:i.select},variant:"outlined",color:"secondary",className:i.container,defaultValue:null===t||void 0===t?void 0:t.sortVideosBy},o.a.createElement("option",{value:"date"},"Date"),o.a.createElement("option",{value:"views"},"Views")))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:o.a.createElement(S.a,{variant:"body1",component:"span"},"Custom API key (",o.a.createElement(U.a,{href:"https://www.slickremix.com/docs/get-api-key-for-youtube/",target:"_blank",rel:"noopener"},"How to get an API key?"),")"),secondary:o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{variant:"body2",component:"span"},"Replaces the default youtube API key used to fetch channels & videos data"),o.a.createElement("br",null),o.a.createElement(S.a,{variant:"body2",component:"span"},"(will apply the next time you ",Ct()?"open the extension popup":"reload the app",")")),className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(bt.a,{id:"apiKey",type:"text",placeholder:"AIzaSyDOkg-u9jnhP-WnzX5WPJyV1sc5QQrtuyc",size:"small",variant:"outlined",color:"secondary",inputProps:{minLength:39},className:i.container,defaultValue:null===t||void 0===t?void 0:t.apiKey,onChange:function(e){return l(e)}}))),Ct()&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Auto videos check rate (in minutes)",secondary:"Number of minutes to wait before auto-checking for recent videos",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(bt.a,{id:"autoVideosCheckRate",type:"number",size:"small",variant:"outlined",color:"secondary",inputProps:{min:5,max:720,step:5},className:i.container,defaultValue:null===t||void 0===t?void 0:t.autoVideosCheckRate,onChange:function(e){return l(e)}}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Enable recent videos notifications",secondary:"Notifies you when recent videos get posted",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"enableRecentVideosNotifications",defaultChecked:null===t||void 0===t?void 0:t.enableRecentVideosNotifications,color:"secondary"}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Auto play videos once opened",secondary:"Auto-play permission should be granted for youtube.com",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"autoPlayVideos",defaultChecked:null===t||void 0===t?void 0:t.autoPlayVideos,color:"secondary"}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Open videos in inactive tabs",secondary:"Will open videos in new tabs without losing focus of the current tab",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"openVideosInInactiveTabs",defaultChecked:null===t||void 0===t?void 0:t.openVideosInInactiveTabs,color:"secondary"})))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Open channels on name click",secondary:'Will open channels directly by clicking on their name, replaces the icon button "open channel"',className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"openChannelsOnNameClick",defaultChecked:null===t||void 0===t?void 0:t.openChannelsOnNameClick,color:"secondary"}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Hide empty channels",secondary:"Hide all empty channels by default",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"hideEmptyChannels",defaultChecked:null===t||void 0===t?void 0:t.hideEmptyChannels,color:"secondary"}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Auto clear recent videos",secondary:"Auto-clear recent videos before each startup",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"autoClearRecentVideos",defaultChecked:null===t||void 0===t?void 0:t.autoClearRecentVideos,color:"secondary"}))),o.a.createElement(j.a,null),o.a.createElement(ze.a,null,o.a.createElement(De.a,{primary:"Auto clear videos cache",secondary:"Cache may speed up loading time & reduce API quota consumption",className:i.optionLabel}),o.a.createElement(He.a,null,o.a.createElement(Lt.a,{id:"autoClearCache",defaultChecked:null===t||void 0===t?void 0:t.autoClearCache,color:"secondary"})))))}function Wt(e){var t=e.open,n=e.message,a=e.onClose,r=e.onRefresh;return o.a.createElement(Bt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:6e3,onClose:function(){return a()},message:n,action:o.a.createElement(o.a.Fragment,null,o.a.createElement(dt.a,{color:"secondary",size:"small",onClick:function(e){return r(null,e)}},"Refresh"),o.a.createElement(N.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return a()}},o.a.createElement(pe.a,{fontSize:"small"})))})}var Kt=n(141),Ut=n.n(Kt),_t=n(148),Jt=n.n(_t),$t=Object(E.a)((function(e){return Object(y.a)({root:{display:"flex",minWidth:"700px",minHeight:Ct()?"500px":"100vh",maxWidth:Ct()&&kt()?"700px":"none"},appBar:{backgroundColor:"#f44336",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},grow:{flexGrow:1},title:Object(g.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},container:{display:"flex",width:"100%",height:"80%",justifyContent:"center"},centered:{alignSelf:"center",textAlign:"center",margin:"0 80px"},heartIcon:{color:"#e25555",fontSize:16,verticalAlign:"middle"},madeWithLove:{padding:e.spacing(1,0)}})}));function Gt(e){var t=$t(),n=Object(C.a)(),a=o.a.useState(e.channels),r=Object(u.a)(a,2),i=r[0],l=r[1],c=o.a.useState([]),d=Object(u.a)(c,2),m=d[0],h=d[1],p=o.a.useState(!1),f=Object(u.a)(p,2),E=f[0],y=f[1],R=o.a.useState(e.isReady),V=Object(u.a)(R,2),A=V[0],T=V[1],L=o.a.useState(!1),H=Object(u.a)(L,2),M=H[0],J=H[1],$=o.a.useState(ue.All),G=Object(u.a)($,2),Y=G[0],q=G[1],X=o.a.useState(e.settings),Q=Object(u.a)(X,2),Z=Q[0],ae=Q[1],oe=o.a.useState(!1),ie=Object(u.a)(oe,2),le=ie[0],de=ie[1],me=o.a.useState(""),he=Object(u.a)(me,2),pe=he[0],fe=he[1],ve=o.a.useState(null),be=Object(u.a)(ve,2),Ee=be[0],ye=be[1],Ce=o.a.useState({}),we=Object(u.a)(Ce,2),ke=we[0],xe=we[1],Oe=o.a.useState(0),Ie=Object(u.a)(Oe,2),Ve=Ie[0],Pe=Ie[1],Be=o.a.useState(0),Te=Object(u.a)(Be,2),ze=Te[0],Le=Te[1];o.a.useEffect((function(){return l(e.channels)}),[e.channels]),o.a.useEffect((function(){return ae(e.settings)}),[e.settings]),o.a.useEffect((function(){return xe(e.cache)}),[e.cache]),o.a.useEffect((function(){return T(e.isReady)}),[e.isReady]),o.a.useEffect((function(){je("isReady changed",A),A&&(i.length&&!m.length?Je(Z.defaultChannelSelection,!0):Y!==Z.defaultChannelSelection&&q(Z.defaultChannelSelection))}),[A]),o.a.useEffect((function(){je("channels changed",{isReady:A}),A&&re({channels:i})}),[i]),o.a.useEffect((function(){je("settings changed",{isReady:A}),A&&re({settings:Z})}),[Z]),o.a.useEffect((function(){if(je("cache or channels changed",{isReady:A}),A){Se("----------------------"),Se("counting todays & recent videos");var e=0,t=0;Object.keys(ke).forEach((function(n){var a=i.find((function(e){return e.id===n}));if(a&&!a.isHidden){var o=ke[n].filter((function(e){return e.isRecent})).length,r=ke[n].filter((function(e){return te(e.publishedAt)})).length;Se(a.title,{recent:o,todays:r}),e+=o,t+=r}})),Se("total count",{recent:e,todays:t}),Pe(e),Le(t)}}),[ke,i]);var De=function(){y(!1)},He=function(e){console.error(e),ye(e)},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,a){var o;!t&&(null===(o=ke[e.id])||void 0===o?void 0:o.length)?(Se("----------------------"),Se("load videos from cache",e.title,ke[e.id]),n(ke[e.id].slice(0,Z.videosPerChannel))):ce(e.id,ee(Z.videosAnteriority)).then((function(t){if(Se("----------------------"),Se("activities of",e.title,t),null===t||void 0===t?void 0:t.items){var a,o,r=t.items.map((function(e){var t;return null===(t=e.contentDetails.upload)||void 0===t?void 0:t.videoId})).filter((function(e){return null===e||void 0===e?void 0:e.length})),i=(null===(a=ke[e.id])||void 0===a?void 0:a.length)?ke[e.id].map((function(e){return e.id})):[],l=r.filter((function(e,t){return r.indexOf(e)===t})).slice(0,Z.videosPerChannel).filter((function(e){return-1===i.indexOf(e)}));if(l.length)Se("getting recent videos of",e.title,{recentVideosIds:l,cacheVideosIds:i}),se(l).then((function(t){var a;Se("recent videos data",t);var o=new Date;t=t.map((function(e){var t=new Date(e.publishedAt);return ne(o,t)<=24&&(e.isRecent=!0),e})),ke[e.id]=(null===(a=ke[e.id])||void 0===a?void 0:a.length)?[].concat(Object(v.a)(t),Object(v.a)(ke[e.id])):t;var r=ke[e.id].sort((function(e,t){var n,a;return"views"===Z.sortVideosBy&&(null===(n=e.views)||void 0===n?void 0:n.count)&&(null===(a=t.views)||void 0===a?void 0:a.count)?t.views.count-e.views.count:t.publishedAt-e.publishedAt})).slice(0,Z.videosPerChannel);xe(Object(s.a)({},ke)),re({cache:ke}),n(r||[])})).catch((function(e){He(e),n([])}));else Se("no recent videos for this channel"),n((null===(o=ke[e.id])||void 0===o?void 0:o.slice(0,Z.videosPerChannel))||[])}else n([])})).catch((function(e){He(e),n([])}))}))},Me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Se("selected channel:",e),q(t),J(!0),Fe(e,n).then((function(e){h(e||[]),J(!1),window.scrollTo(0,0)}))},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;q(e),J(!0),h([]);var o=[],r=[],l=a||i;return l.filter((function(e){return!e.isHidden})).forEach((function(e){var a=Fe(e,n).then((function(n){Se("----------------------"),Se(e.title,n),t&&(n=n.filter((function(e){return t(e)}))),r.push.apply(r,Object(v.a)(n))}));o.push(a)})),Promise.all(o).finally((function(){h(r),J(!1)}))},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return We(ue.All,null,e)},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return We(ue.TodaysVideos,(function(e){return te(e.publishedAt)}),e)},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return We(ue.RecentVideos,(function(e){return e.isRecent}),e)},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case ue.TodaysVideos:return Ue(t);case ue.RecentVideos:return _e(t);case ue.All:default:return Ke(t)}},$e=function(e,t){return t&&t.stopPropagation(),void 0!==e&&null!==e||(e=Y),e>=0?Me(i[e],e,!0):Je(e,!0)},Ge=function(){de(!1)},Ye=function(e,t){var n=document.getElementById(e);if(!n)return Z[e];switch(t){case Re.Number:return+n.value;case Re.Boolean:return n.checked;case Re.String:default:return n.value}},qe=function(e){e.stopPropagation();var t=e.currentTarget.href;Ct()&&t&&(e.preventDefault(),wt(t,!Z.openVideosInInactiveTabs).then((function(e){var t,n;Z.autoPlayVideos&&(t=e.id,n="document.querySelector('#player video').play();",browser.tabs.executeScript(t,{code:n}))})))};return o.a.createElement("div",{className:t.root},o.a.createElement(k.a,null),o.a.createElement(x.a,{color:"secondary",position:"fixed",className:Object(b.a)(t.appBar,Object(g.a)({},t.appBarShift,E))},o.a.createElement(O.a,null,o.a.createElement(N.a,{color:"inherit","aria-label":"open drawer",onClick:function(){y(!0)},edge:"start",className:Object(b.a)(t.menuButton,E&&t.hide)},o.a.createElement(I.a,null)),o.a.createElement(S.a,{className:t.title,variant:"h6",noWrap:!0},"Youtube viewer"),o.a.createElement(ge,{onSelect:function(e){Se("added channel:",e);var t=i.find((function(t){return t.id===e.id}));t?q(i.indexOf(t)):(l([].concat(Object(v.a)(i),[e])),q(i.length)),J(!0),Fe(e).then((function(e){h(e||[]),J(!1)}))},onError:He}),o.a.createElement("div",{className:t.grow}),o.a.createElement(N.a,{edge:"end","aria-label":"settings",color:"inherit",onClick:function(e){return function(e){e.stopPropagation(),de(!0)}(e)}},o.a.createElement(D.a,null)))),o.a.createElement(w.a,{className:t.drawer,variant:"persistent",anchor:"left",open:E,classes:{paper:t.drawerPaper}},o.a.createElement("div",{className:t.drawerHeader},o.a.createElement(N.a,{onClick:De},"ltr"===n.direction?o.a.createElement(P.a,null):o.a.createElement(B.a,null))),o.a.createElement(j.a,null),o.a.createElement(At,{channels:i,selectedIndex:Y,cacheSize:function(e){var t=0;return function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(3)+" KiB":e<1073741824?(e/1048576).toFixed(3)+" MiB":(e/1073741824).toFixed(3)+" GiB"}(function e(n){if(null!==n&&void 0!==n)switch(typeof n){case"number":t+=8;break;case"string":t+=2*n.length;break;case"boolean":t+=4;break;case"object":var a=Object.prototype.toString.call(n).slice(8,-1);if("Object"===a||"Array"===a)for(var o in n)n.hasOwnProperty(o)&&e(n[o]);else t+=2*n.toString().length}return t}(e))}(ke),todaysVideosCount:ze,recentVideosCount:Ve,onShowAll:Ke,onShowTodaysVideos:Ue,onShowRecentVideos:_e,onRefresh:$e,onSelect:Me,onDelete:function(e){l(i.filter((function(t,n){return n!==e}))),Y===e&&(h([]),q(ue.None))},onSave:l,onSelectedIndexChange:q,onClearCache:function(){xe({}),re({cache:{}}),fe("Cache cleared!")},onClearRecentVideos:function(){Object.keys(ke).forEach((function(e){ke[e]=ke[e].map((function(e){return e.isRecent=!1,e}))})),xe(Object(s.a)({},ke)),re({cache:ke}),Y===ue.RecentVideos&&$e(ue.RecentVideos)},onImport:function(e){Se("importing channels",e),l(e),We(ue.All,null,!0,e),fe("Channels imported!")}}),o.a.createElement("div",{className:t.grow}),o.a.createElement(j.a,null),o.a.createElement(S.a,{variant:"caption",align:"center",className:t.madeWithLove},"Made with ",o.a.createElement(F.a,{className:t.heartIcon})," by AXeL",o.a.createElement(U.a,{href:"https://github.com/AXeL-dev/youtube-viewer",target:"_blank",rel:"noopener"},o.a.createElement(N.a,{edge:"end",size:"small","aria-label":"github link"},o.a.createElement(W.a,{fontSize:"inherit"}))))),o.a.createElement("main",{className:Object(b.a)(t.content,Object(g.a)({},t.contentShift,E)),onClick:function(){return De()}},o.a.createElement("div",{className:t.drawerHeader}),A&&Y!==ue.None&&((null===i||void 0===i?void 0:i.length)?o.a.createElement(Ut.a,{onRefresh:function(e,t){(Y>=0?Me(i[Y],Y,!0):$e(Y)).then((function(){e()})).catch((function(){t()}))},icon:!Z.hideEmptyChannels&&Y<0&&function(){var e;return null===(e=i.filter((function(e){return!e.isHidden})))||void 0===e?void 0:e.length}()>0||(null===m||void 0===m?void 0:m.length)>0?o.a.createElement(Jt.a,{className:"arrowicon"}):o.a.createElement("i",null),distanceToRefresh:50,resistance:5,style:{position:"relative"}},Y<0?o.a.createElement(Ae,{channels:i,videos:m,settings:Z,loading:M,maxPerChannel:Z.videosPerChannel,onSelect:Me,onVideoClick:qe,onSave:l,onRefresh:$e}):o.a.createElement(Ne,{videos:m,loading:M,maxPerChannel:Z.videosPerChannel,onVideoClick:qe})):o.a.createElement(_.a,{in:!0,timeout:3e3},o.a.createElement(K.a,{className:t.container},o.a.createElement(S.a,{component:"div",variant:"h5",color:"textSecondary",className:t.centered,style:{cursor:"default"}},o.a.createElement(z.a,{style:{fontSize:38,verticalAlign:"middle"}})," Start by typing a channel name in the search box"))))),o.a.createElement(Mt,{settings:Z,open:le,onClose:Ge,onSave:function(){ae({defaultChannelSelection:Ye("defaultChannelSelection",Re.Number),videosPerChannel:Ye("videosPerChannel",Re.Number),videosAnteriority:Ye("videosAnteriority",Re.Number),sortVideosBy:Ye("sortVideosBy",Re.String),apiKey:Ye("apiKey",Re.String),autoVideosCheckRate:Ye("autoVideosCheckRate",Re.Number),enableRecentVideosNotifications:Ye("enableRecentVideosNotifications",Re.Boolean),autoPlayVideos:Ye("autoPlayVideos",Re.Boolean),openVideosInInactiveTabs:Ye("openVideosInInactiveTabs",Re.Boolean),openChannelsOnNameClick:Ye("openChannelsOnNameClick",Re.Boolean),hideEmptyChannels:Ye("hideEmptyChannels",Re.Boolean),autoClearRecentVideos:Ye("autoClearRecentVideos",Re.Boolean),autoClearCache:Ye("autoClearCache",Re.Boolean)}),Ge(),fe("Settings saved!")}}),o.a.createElement(Wt,{open:!!pe.length,message:pe,onClose:function(){fe("")},onRefresh:$e}),o.a.createElement(Tt,{message:null===Ee||void 0===Ee?void 0:Ee.message,open:!!Ee,onClose:function(){return ye(null)}}))}var Yt=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var a,o;return Object(m.a)(this,n),(a=t.call(this,e)).state={channels:[],settings:{defaultChannelSelection:ue.All,videosPerChannel:9,videosAnteriority:30,sortVideosBy:"date",autoVideosCheckRate:30,enableRecentVideosNotifications:!0,autoPlayVideos:!1,openVideosInInactiveTabs:!1,openChannelsOnNameClick:!1,hideEmptyChannels:!1,autoClearRecentVideos:!0,autoClearCache:!1},cache:{},isReady:!1},a.updateState(),Ct()&&(o="",browser.browserAction.setBadgeText({text:0===o?"":o.toString()})),a}return Object(h.a)(n,[{key:"updateState",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,n,a,o,r,i,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae("channels","settings","cache");case 2:a=e.sent,o=Object(u.a)(a,3),r=o[0],i=o[1],l=o[2],Se("Storage data:",{channels:r,settings:i,cache:l}),i=i?Object(s.a)(Object(s.a)({},this.state.settings),i):this.state.settings,(null===(t=i)||void 0===t?void 0:t.autoClearRecentVideos)&&l&&(d=!1,Object.keys(l).forEach((function(e){l[e]=l[e].map((function(e){return e.isRecent&&(e.isRecent=!1,d=!0),e}))})),d&&re({cache:l})),this.setState({channels:(null===r||void 0===r?void 0:r.length)?r:[],settings:i,cache:!(null===(n=i)||void 0===n?void 0:n.autoClearCache)&&l?l:{},isReady:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(Gt,{channels:this.state.channels,settings:this.state.settings,cache:this.state.cache,isReady:this.state.isReady})}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Yt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[173,1,2]]]);
//# sourceMappingURL=main.9a96540e.chunk.js.map