{"version":3,"sources":["helpers/utils.ts","helpers/storage.ts","helpers/youtube.ts","models/Channel.ts","components/shared/RawHTML.tsx","components/channel/SearchChannelInput.tsx","components/video/Media.tsx","helpers/debug.ts","components/video/VideoGrid.tsx","components/video/MultiVideoGrid.tsx","components/shared/ConfirmationDialog.tsx","components/shared/ImportDialog.tsx","components/shared/MoveToPositionDialog.tsx","helpers/parser.ts","helpers/browser.ts","components/channel/ChannelList.tsx","helpers/download.ts","components/shared/MessageSnackbar.tsx","components/settings/SettingsDialog.tsx","components/shared/CustomSnackbar.tsx","components/Popup.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["niceDuration","ISO_8601_string","time","replace","toUpperCase","h","extract","m","s","join","stop","i","length","val","slice","shortenLargeNumber","num","decimal","digits","units","Math","pow","toFixed","TimeAgo","self","prefix","sufix","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","timeAgo","floor","Date","parseInt","separator","locales","words","interval","intervals","distance","key","trim","getDateBefore","before","date","setDate","getDate","isInToday","timestamp","setHours","diffHours","dt1","dt2","diff","getTime","abs","round","getFromStorage","promises","keys","forEach","push","__get","Promise","all","resolve","reject","browser","storage","local","get","then","error","finalValue","value","localStorage","getItem","JSON","parse","saveToStorage","values","Object","set","stringify","setItem","__save","apiKey","process","apiRequest","a","settings","url","window","fetch","response","ok","json","Error","errors","reason","message","status","setApiKey","action","apiArgs","makeRequest","param","URLSearchParams","toString","apiUrl","getChannelActivities","channelId","after","part","publishedAfter","toISOString","maxResults","Symbol","getVideoInfo","videoIdList","joinedIds","fields","id","items","map","item","title","snippet","duration","contentDetails","views","count","statistics","viewCount","asString","publishedAt","thumbnail","thumbnails","medium","channelTitle","ChannelSelection","RawHTML","children","className","dangerouslySetInnerHTML","__html","useStyles","makeStyles","theme","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","width","breakpoints","up","spacing","searchIcon","height","pointerEvents","display","alignItems","justifyContent","clearButton","right","top","margin","color","inputRoot","inputInput","padding","transition","transitions","create","poper","zIndex","overflow","boxShadow","listbox","border","listStyle","background","paper","maxHeight","cursor","avatar","text","secondary","marginRight","SearchChannelInput","props","onSelect","onError","classes","React","useState","inputValue","setInputValue","options","setOptions","useAutocomplete","getOptionLabel","option","getRootProps","getInputProps","getListboxProps","getOptionProps","groupedOptions","useMemo","throttle","input","callback","query","max","type","order","q","responseJson","payLoad","pageInfo","totalResults","howMany","min","description","searchChannel","results","catch","useEffect","active","InputBase","placeholder","root","inputProps","onChange","event","target","IconButton","aria-label","size","onClick","fontSize","index","Grid","container","Avatar","alt","src","xs","Typography","variant","RegExp","Media","style","anchor","textDecoration","imageContainer","image","bottom","Link","href","rel","Box","pr","mt","gutterBottom","inWords","debug","params","warn","VideoGrid","videos","loading","maxPerChannel","maxSkeletons","onVideoClick","preventLongPress","setPreventLongPress","handleMouseEvent","setTimeout","stopPropagation","preventDefault","minWidth","onMouseDown","onClickCapture","Array","from","marginBottom","draggable","Fragment","Skeleton","pt","breadcrumb","divider","link","outline","youtube","box","MultiVideoGrid","useTheme","channels","onSave","onRefresh","expandedChannelsIndexes","setExpandedChannelsIndexes","channel","isHidden","channelVideos","filter","video","hideEmptyChannels","Breadcrumbs","openChannelsOnNameClick","onChannelNameClick","Tooltip","c","hideChannel","indexOf","edge","Divider","ConfirmationDialog","open","confirmButtonText","cancelButtonText","onClose","onConfirm","Dialog","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","autoFocus","ImportDialog","textFieldId","textFieldLabel","onValidate","textFieldError","setTextFieldError","close","TextField","label","multiline","rows","fullWidth","document","getElementById","data","isValid","MoveToPositionDialog","step","positionFieldId","positionFieldLabel","positionFieldError","setPositionFieldError","defaultValue","isNaN","test","isWebExtension","createTab","isActive","tabs","isFirefox","navigator","userAgent","createStyles","channelsOptionsIcon","transform","menuIcon","verticalAlign","subheader","ChannelList","selectedIndex","All","cacheSize","todaysVideosCount","recentVideosCount","onShowAll","onShowTodaysVideos","onShowRecentVideos","onDelete","onSelectedIndexChange","onClearCache","onClearRecentVideos","onImport","openDeleteChannelDialog","setOpenDeleteChannelDialog","channelToDelete","setChannelToDelete","channelToDeleteIndex","setChannelToDeleteIndex","anchorEl","setAnchorEl","openedMenuIndex","setOpenedMenuIndex","openClearCacheDialog","setOpenClearCacheDialog","openClearRecentVideosDialog","setOpenClearRecentVideosDialog","openImportChannelsDialog","setOpenImportChannelsDialog","moveToPositionChannelIndex","setMoveToPositionChannelIndex","getSelectedChannel","find","_","moveChannel","indexFrom","indexTo","closeMenu","selectedChannel","list","startIndex","endIndex","result","splice","removed","reorder","closeDeleteChannelDialog","setChannel","None","openMenu","currentTarget","closeClearCacheDialog","exportChannels","blob","filename","msSaveOrOpenBlob","createElement","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","Blob","closeImportChannelsDialog","closeMoveChannelToPositionDialog","closeClearRecentVideosDialog","onDragEnd","destination","source","droppableId","provided","snapshot","RootRef","rootRef","innerRef","List","dense","ListSubheader","keepMounted","MenuItem","isDraggingOver","ListItem","button","selected","ListItemIcon","Badge","badgeContent","ListItemText","primary","ListItemSecondaryAction","refreshAll","TodaysVideos","refreshTodaysVideos","RecentVideos","refreshRecentVideos","draggableId","ContainerProps","ref","draggableProps","dragHandleProps","isDragging","draggableStyle","opacity","openChannel","refreshChannel","channelIndex","unhideChannel","deleteChannel","channelsList","MessageSnackbar","autoHideDuration","anchorOrigin","vertical","horizontal","Snackbar","settingsAppBar","settingsTitle","flex","select","textShadow","optionLabel","maxWidth","settingsDialogTransition","forwardRef","Slide","direction","SettingsDialog","validateSettings","match","fullScreen","TransitionComponent","AppBar","Toolbar","Select","native","defaultChannelSelection","videosPerChannel","videosAnteriority","sortVideosBy","component","minLength","autoVideosCheckRate","Switch","defaultChecked","enableRecentVideosNotifications","autoPlayVideos","openVideosInInactiveTabs","autoClearRecentVideos","autoClearCache","CustomSnackbar","minHeight","appBar","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","menuButton","hide","grow","flexGrow","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","content","contentShift","centered","alignSelf","textAlign","heartIcon","madeWithLove","Popup","setChannels","setVideos","openDrawer","setOpenDrawer","isReady","setIsReady","isLoading","setIsLoading","selectedChannelIndex","setSelectedChannelIndex","setSettings","openSettingsDialog","setOpenSettingsDialog","snackbarMessage","setSnackbarMessage","lastError","setLastError","cache","setCache","setRecentVideosCount","setTodaysVideosCount","showChannelSelection","totalRecentVideosCount","totalTodaysVideosCount","recentVideosCountPerChannel","isRecent","todaysVideosCountPerChannel","recent","todays","displayError","console","getChannelVideos","ignoreCache","videosIds","upload","videoId","cacheVideosIds","recentVideosIds","videosData","now","videoDate","sort","b","selectChannel","scrollTo","fetchChannelsVideos","selection","filterFunction","customChannels","promise","newVideos","finally","showAllChannels","showTodaysVideos","showRecentVideos","refreshChannels","undefined","closeSettings","openVideo","videoUrl","tab","tabId","code","executeScript","CssBaseline","clsx","noWrap","found","openSettings","Drawer","obj","bytes","formatByteSize","sizeOf","objClass","prototype","call","hasOwnProperty","memorySizeOf","align","icon","getNotHiddenChannelsCount","distanceToRefresh","resistance","Fade","in","timeout","checked","App","state","updateState","browserAction","setBadgeText","cacheHasChanged","this","setState","Component","Boolean","location","hostname","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6c1026d7.chunk.js","sourcesContent":["\n/**\n * Convert youtube duration to readable format\n * \n * @param ISO_8601_string {string}\n */\nexport function niceDuration (ISO_8601_string: string) {\n  let time = ISO_8601_string.replace(\"PT\", \"\").toUpperCase();\n  let h = extract('H');\n  let m = extract('M');\n  let s = extract('S');\n  return h !== '00' ? [h, m, s].join(':') : [m, s].join(':');\n\n  function extract (stop: string) {\n      for (let i = 0; i < time.length; i++) {\n          if (time[i] === stop) {\n              let val = time.slice(0, i);\n              if (val.length === 1 && stop !== 'H') {\n                  val = '0' + val;\n              }\n              time = time.slice(i + 1);\n              return val;\n          }\n      }\n      return '00';\n  }\n}\n\n// -------------------------------------------------------------------\n\n/**\n * Shorten number to thousands, millions, billions, etc.\n * http://en.wikipedia.org/wiki/Metric_prefix\n *\n * @param {number} num Number to shorten.\n * @param {number} [digits=0] The number of digits to appear after the decimal point.\n * @returns {string|number}\n *\n * @example\n * // returns '12.5k'\n * shortenLargeNumber(12543, 1)\n *\n * @example\n * // returns '-13k'\n * shortenLargeNumber(-12567)\n *\n * @example\n * // returns '51M'\n * shortenLargeNumber(51000000)\n *\n * @example\n * // returns 651\n * shortenLargeNumber(651)\n *\n * @example\n * // returns 0.12345\n * shortenLargeNumber(0.12345)\n */\nexport function shortenLargeNumber(num: number, digits: number = 0) {\n  let units = ['k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n      decimal;\n\n  for(let i=units.length-1; i>=0; i--) {\n      decimal = Math.pow(1000, i+1);\n\n      if(num <= -decimal || num >= decimal) {\n          return +(num / decimal).toFixed(digits) + units[i];\n      }\n  }\n\n  return num;\n}\n\n// -------------------------------------------------------------------\n\n/**\n * Return Date & time in words\n * Stolen from: https://stackoverflow.com/a/37802747\n */\nexport const TimeAgo = (() => {\n  let self: any = {};\n\n  // Public Methods\n  self.locales = {\n    prefix: '',\n    sufix:  'ago',\n    \n    seconds: 'less than a minute',\n    minute:  'about a minute',\n    minutes: '%d minutes',\n    hour:    'about an hour',\n    hours:   'about %d hours',\n    day:     'a day',\n    days:    '%d days',\n    month:   'about a month',\n    months:  '%d months',\n    year:    'about a year',\n    years:   '%d years'\n  };\n  \n  self.inWords = (timeAgo: any) => {\n    let seconds = Math.floor((new Date() as any - parseInt(timeAgo)) / 1000),\n        separator = self.locales.separator || ' ',\n        words = self.locales.prefix + separator,\n        interval = 0,\n        intervals: any = {\n          year:   seconds / 31536000,\n          month:  seconds / 2592000,\n          day:    seconds / 86400,\n          hour:   seconds / 3600,\n          minute: seconds / 60\n        };\n    \n    let distance = self.locales.seconds;\n    \n    for (let key in intervals) {\n      interval = Math.floor(intervals[key]);\n      \n      if (interval > 1) {\n        distance = self.locales[key + 's'];\n        break;\n      } else if (interval === 1) {\n        distance = self.locales[key];\n        break;\n      }\n    }\n    \n    distance = distance.replace(/%d/i, interval);\n    words += distance + separator + self.locales.sufix;\n\n    return words.trim();\n  };\n  \n  return self;\n})();\n\n// -------------------------------------------------------------------\n\n/**\n * Return current date minus number of days before\n * \n * @param before {number}\n */\nexport function getDateBefore(before: number = 0): Date {\n  let date = new Date();\n  date.setDate(date.getDate() - before);\n  return date;\n}\n\n// -------------------------------------------------------------------\n\n/**\n * Check if the given timestamp is in today's date\n * Stolen from: https://stackoverflow.com/a/40628566\n * \n * @param timestamp \n */\nexport function isInToday(timestamp: number) {\n  let today = new Date();\n  if (today.setHours(0, 0, 0, 0) === new Date(timestamp).setHours(0, 0, 0, 0)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n// -------------------------------------------------------------------\n\n/**\n * Returns hours difference between two dates\n * Stolen from: https://www.w3resource.com/javascript-exercises/javascript-date-exercise-45.php\n * \n * @param dt1 \n * @param dt2 \n */\nexport function diffHours(dt1: Date, dt2: Date): number {\n  let diff = (dt2.getTime() - dt1.getTime()) / 1000;\n  diff /= (60 * 60);\n  return Math.abs(Math.round(diff));\n}\n\n// -------------------------------------------------------------------\n\n/**\n * Return a new RegExp object instance\n * \n * @param pattern \n * @param modifiers \n */\nexport function getRegex(pattern: string, modifiers: string): RegExp {\n  return new RegExp(pattern, modifiers);\n}\n\n// -------------------------------------------------------------------\n\n/**\n * Return size of an object\n * Stolen from: https://gist.github.com/zensh/4975495\n * \n * @param obj \n */\nexport function memorySizeOf(obj: any) {\n  var bytes = 0;\n\n  function sizeOf(obj: any) {\n      if(obj !== null && obj !== undefined) {\n          switch(typeof obj) {\n          case 'number':\n              bytes += 8;\n              break;\n          case 'string':\n              bytes += obj.length * 2;\n              break;\n          case 'boolean':\n              bytes += 4;\n              break;\n          case 'object':\n              var objClass = Object.prototype.toString.call(obj).slice(8, -1);\n              if(objClass === 'Object' || objClass === 'Array') {\n                  for(var key in obj) {\n                      if(!obj.hasOwnProperty(key)) continue;\n                      sizeOf(obj[key]);\n                  }\n              } else bytes += obj.toString().length * 2;\n              break;\n          }\n      }\n      return bytes;\n  }\n\n  function formatByteSize(bytes: number) {\n      if(bytes < 1024) return bytes + \" bytes\";\n      else if(bytes < 1048576) return(bytes / 1024).toFixed(3) + \" KiB\";\n      else if(bytes < 1073741824) return(bytes / 1048576).toFixed(3) + \" MiB\";\n      else return(bytes / 1073741824).toFixed(3) + \" GiB\";\n  }\n\n  return formatByteSize(sizeOf(obj));\n}\n","//import { browser } from \"webextension-polyfill-ts\";\n\ndeclare var browser: any;\n\n/**\n * Get data from storage\n * \n * EX: getFromStorage('key1', 'key2', ...)\n * \n * @param keys \n */\nexport function getFromStorage(...keys: string[]): Promise<any> {\n  let promises: Promise<any>[] = [];\n  keys.forEach((key: string) => {\n    promises.push(__get(key));\n  });\n  return Promise.all(promises);\n}\n\nfunction __get(key: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    try {\n      browser.storage.local.get(key).then((storage: any) => {\n        resolve(storage[key]);\n      });\n    }\n    catch(error) {\n      //console.log(error.message);\n      const value: any = localStorage.getItem(key);\n      let finalValue: any;\n      try {\n        finalValue = JSON.parse(value);\n      }\n      catch(error) {\n        finalValue = value;\n      }\n      resolve(finalValue);\n    }\n  });\n}\n\n/**\n * Save data to storage\n * \n * EX: saveToStorage({ key1: value1, key2: value2, ... })\n * \n * @param values \n */\nexport function saveToStorage(values: {[key: string]: any}): Promise<any> {\n  let promises: Promise<any>[] = [];\n  Object.keys(values).forEach((key: string) => {\n    promises.push(__save(key, values[key]));\n  });\n  return Promise.all(promises);\n}\n\nfunction __save(key: string, value: any): Promise<void> {\n  return new Promise((resolve, reject) => {\n    try {\n      browser.storage.local.set({[key]: value}).then(() => {\n        resolve();\n      });\n    }\n    catch(error) {\n      //console.log(error.message);\n      let finalValue: any;\n      try {\n        finalValue = JSON.stringify(value);\n      }\n      catch(error) {\n        finalValue = value;\n      }\n      localStorage.setItem(key, finalValue);\n      resolve();\n    }\n  });\n}\n","/*\nThis Source Code Form is subject to the terms of the\nMozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file,\nYou can obtain one at http://mozilla.org/MPL/2.0/.\nAuthor(s): XrXr, AXeL-dev\n\nThis module provide functions for making api certain YouTube Data API V3\nrequests. All functions return promise.\n*/\n\nimport { niceDuration, shortenLargeNumber } from './utils';\nimport { getFromStorage } from './storage';\n\nlet apiKey = process.env.REACT_APP_YOUTUBE_API_KEY;\n\n/**\n * Send API requests to youtube\n */\nconst apiRequest = (() => {\n    async function setApiKey() {\n        const [settings] = await getFromStorage('settings');\n        apiKey = settings?.apiKey?.length ? settings.apiKey : apiKey;\n    }\n\n    async function makeRequest (url: string) {\n        let response = await window.fetch(url);\n        //console.log(`HTTP ${response.status}: ${response.url}`);\n        if (!response.ok) {\n            const json = await response.json();\n            //console.log(json);\n            throw Error(json?.error?.errors[0] ? `<strong>${json.error.errors[0].reason}</strong>: ${json.error.errors[0].message.replace(/<\\/?[^>]+(>|$)/g, '')}` : `HTTP ${response.status}: ${response.url}`);\n        }\n        return await response.json();\n    }\n\n    function apiUrl (action: string, param: any) {\n        let url = \"https://www.googleapis.com/youtube/v3/\" + action + '?';\n        url += new URLSearchParams({...param, key: apiKey }).toString();\n        return url;\n    }\n\n    setApiKey();\n\n    return (action: string, apiArgs: any) => makeRequest(apiUrl(action, apiArgs));\n})();\n\n/**\n * Request a channel's activities after a date\n * Return a promise that resolves to api response\n * \n * @param channelId \n * @param after \n */\nfunction getChannelActivities (channelId: string, after: Date = new Date()) {\n    return apiRequest(\"activities\", {\n        part: \"snippet,contentDetails\",\n        channelId: channelId,\n        publishedAfter: after.toISOString(),\n        maxResults: 50\n    });\n}\n\n/**\n * Return video duration\n * \n * @param videoId \n */\nconst VIDEO_DOES_NOT_EXIST = Symbol(\"Video does not exist\");\nfunction getDuration (videoId: string) {\n    return apiRequest(\"videos\", {\n        part: \"contentDetails\",\n        fields: \"items/contentDetails/duration\",\n        id: videoId,\n    }).then(json => {\n        if (json.items.length === 0) {\n            throw VIDEO_DOES_NOT_EXIST;\n        }\n        return {\n            videoId,\n            duration: niceDuration(json.items[0].contentDetails.duration)\n        };\n    });\n}\n\n/**\n * Return video tags & duration\n * \n * @param videoId \n */\nfunction getTagsAndDuration (videoId: string) {\n    return apiRequest(\"videos\", {\n        part: \"snippet,contentDetails\",\n        fields: \"items/contentDetails/duration,items/snippet/tags\",\n        id: videoId,\n    }).then(res => {\n        res = res.items[0];\n        return {\n            duration: niceDuration(res.contentDetails.duration),\n            tags: (res.snippet && res.snippet.tags) || []\n        };\n    });\n}\n\n/**\n * Return video informations\n * \n * @param videoIdList \n */\nfunction getVideoInfo (videoIdList: string[]) {\n    let joinedIds = videoIdList.join(\",\");\n    return apiRequest(\"videos\", {\n        part: \"snippet,contentDetails,statistics,id\",\n        fields: \"items(id,contentDetails/duration,statistics/viewCount,snippet(title,channelTitle,channelId,publishedAt,thumbnails/medium))\",\n        id: joinedIds,\n        maxResults: 50, // not working when id is filled (which is the case here)\n    }).then(response => {\n        //console.log(response);\n        return response.items.map((item: any) => ({\n            id: item.id,\n            title: item.snippet.title,\n            url: 'https://www.youtube.com/watch?v=' + item.id,\n            duration: niceDuration(item.contentDetails.duration),\n            views: {\n                count: item.statistics.viewCount,\n                asString: shortenLargeNumber(item.statistics.viewCount),\n            },\n            publishedAt: new Date(item.snippet.publishedAt).getTime(),\n            thumbnail: item.snippet.thumbnails.medium.url,\n            channelId: item.snippet.channelId,\n            channelTitle: item.snippet.channelTitle,\n        }));\n    });\n}\n\n//getVideoInfo.batch_size = 50;\n\n/**\n * Request to search channel matching `query`. Return a promise that will\n * resolve to either [] or [channels]\n * \n * @param query \n * @param max \n */\nfunction searchChannel (query: string, max: number = 3) {\n    return apiRequest(\"search\", {\n        part: \"snippet\",\n        type: \"channel\",\n        order: \"relevance\",\n        q: query\n    }).then(responseJson => {\n        //console.log(responseJson);\n        let payLoad: any = [];\n        if (responseJson.pageInfo.totalResults > 0) {\n            const howMany = Math.min(responseJson.pageInfo.totalResults, max);\n            for (let i = 0; i < howMany; i++) {\n                if (responseJson.items[i]) {\n                    payLoad.push({\n                        title: responseJson.items[i].snippet.title,\n                        url: 'https://www.youtube.com/channel/' + responseJson.items[i].id.channelId + '/videos',\n                        description: responseJson.items[i].snippet.description,\n                        thumbnail: responseJson.items[i].snippet.thumbnails.medium.url,\n                        id: responseJson.items[i].id.channelId\n                    });\n                }\n            }\n        }\n        return payLoad;\n    });\n}\n\nexport {\n    searchChannel,\n    getDuration,\n    getChannelActivities,\n    getTagsAndDuration,\n    getVideoInfo,\n    VIDEO_DOES_NOT_EXIST,\n};\n","\nexport interface Channel {\n  id: string,\n  thumbnail: string,\n  title: string,\n  url: string,\n  description: string,\n  isHidden: boolean\n}\n\nexport enum ChannelSelection {\n  All = -1,\n  None = -2,\n  RecentVideos = -3,\n  TodaysVideos = -4\n}\n","import React from 'react';\n\n// Stolen from: https://stackoverflow.com/a/45810395\nexport const RawHTML = ({children, className = ''}: any): any =>\n  <span className={className} dangerouslySetInnerHTML={{ __html: children.replace(/\\n/g, '<br />')}} />\n","import React from 'react';\nimport useAutocomplete from '@material-ui/lab/useAutocomplete';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, Theme, fade } from '@material-ui/core/styles';\nimport throttle from 'lodash/throttle';\nimport { searchChannel } from '../../helpers/youtube';\nimport Avatar from '@material-ui/core/Avatar';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Channel } from '../../models/Channel';\nimport { getRegex } from '../../helpers/utils';\nimport { RawHTML } from '../shared/RawHTML';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(3),\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    width: theme.spacing(6),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  clearButton: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    margin: theme.spacing(0.75),\n    color: theme.palette.common.white,\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 4, 1, 6),\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 200,\n      '&:focus': {\n        width: 260,\n      },\n    },\n  },\n  poper: {\n    position: 'absolute',\n    width: '100%',\n    zIndex: 1,\n    margin: '4px 0',\n    overflow: 'hidden',\n    borderRadius: '4px',\n    boxShadow: '0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)',\n  },\n  listbox: {\n    position: 'relative',\n    margin: 0,\n    padding: '8px 0',\n    border: 'none',\n    listStyle: 'none',\n    backgroundColor: theme.palette.background.paper,\n    overflow: 'auto',\n    maxHeight: '40vh',\n    '& li': {\n      padding: '6px 16px'\n    },\n    '& li[data-focus=\"true\"]': {\n      backgroundColor: 'rgba(0, 0, 0, 0.08)',\n      cursor: 'pointer',\n    },\n    '& li:active': {\n      backgroundColor: 'rgba(0, 0, 0, 0.14)'\n    },\n  },\n  avatar: {\n    color: theme.palette.text.secondary,\n    marginRight: theme.spacing(2),\n  },\n}));\n\ninterface SearchProps {\n  onSelect: Function;\n  onError: Function;\n}\n\nexport default function SearchChannelInput(props: SearchProps) {\n  const { onSelect, onError } = props;\n  const classes = useStyles();\n  const [inputValue, setInputValue] = React.useState('');\n  const [options, setOptions] = React.useState<Channel[]>([]);\n  const {\n    getRootProps,\n    getInputProps,\n    getListboxProps,\n    getOptionProps,\n    groupedOptions,\n  } = useAutocomplete({\n    id: 'search-autocomplete',\n    options: options,\n    getOptionLabel: option => {\n      //console.log(option);\n      if (option?.title) {\n        setInputValue(option.title);\n        return option.title;\n      }\n      return option;\n    },\n    value: inputValue,\n  });\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(event.target.value);\n  };\n\n  const fetch = React.useMemo(\n    () =>\n      throttle((input: any, callback: Function) => {\n        //console.log(input);\n        searchChannel(input.value, 5).then((results: Channel[]) => {\n          //console.log(results);\n          callback(results);\n        }).catch((error) => {\n          onError(error);\n        });\n      }, 200),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  );\n\n  React.useEffect(() => {\n    let active = true;\n\n    if (inputValue === '') {\n      setOptions([]);\n      return undefined;\n    }\n\n    fetch({ value: inputValue }, (results?: Channel[]) => {\n      if (active) {\n        setOptions(results || []);\n      }\n    });\n\n    return () => {\n      active = false;\n    };\n  }, [inputValue, fetch]);\n\n  return (\n    <div className={classes.search}>\n      <div {...getRootProps()}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          placeholder=\"Search for a channel…\"\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput,\n          }}\n          inputProps={{ ...getInputProps(), 'aria-label': 'search' }}\n          onChange={handleChange}\n        />\n        {inputValue?.length > 0 && (\n          <IconButton aria-label=\"clear\" size=\"small\" className={classes.clearButton} onClick={() => setInputValue('')}>\n            <CloseIcon fontSize=\"inherit\" />\n          </IconButton>\n        )}\n      </div>\n      {groupedOptions.length > 0 ? (\n        <div className={classes.poper}>\n          <ul className={classes.listbox} {...getListboxProps()}>\n            {groupedOptions.map((option, index) => (\n              <li {...getOptionProps({ option, index })}>\n                <Grid container alignItems=\"center\" onClick={() => onSelect(option)}>\n                  <Grid item>\n                    <Avatar className={classes.avatar} alt={option.title} src={option.thumbnail} />\n                  </Grid>\n                  <Grid item xs>\n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                      <RawHTML>{option.title.replace(getRegex('(' + inputValue + ')', 'gi'), `<strong>$1</strong>`)}</RawHTML>\n                    </Typography>\n                  </Grid>\n                </Grid>\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport { Video } from '../../models/Video';\nimport { TimeAgo } from '../../helpers/utils';\n\ninterface MediaProps {\n  item: Video;\n  onClick: Function;\n}\n\nexport default function Media(props: MediaProps) {\n  const { item, onClick } = props;\n  const style = {\n    anchor: {\n      textDecoration: 'none',\n      color: 'inherit',\n      display: 'inline-block'\n    },\n    imageContainer: {\n      position: 'relative'\n    } as React.CSSProperties,\n    image: {\n      width: 210,\n      height: 118,\n      display: 'inherit'\n    },\n    duration: {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      margin: '4px',\n      color: '#fff',\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      padding: '2px 4px',\n      borderRadius: '2px'\n    } as React.CSSProperties\n  };\n\n  return (\n    <Link href={item.url} style={style.anchor} target=\"_blank\" rel=\"noopener\" onClick={(event: any) => onClick(event)}>\n      <Box style={style.imageContainer}>\n        <img style={style.image} alt=\"\" src={item.thumbnail} />\n        <Typography variant=\"caption\" style={style.duration}>\n          {item.duration}\n        </Typography>\n      </Box>\n      <Box pr={2} mt={1}>\n        <Typography gutterBottom variant=\"body2\">\n          {item.title}\n        </Typography>\n        <Typography display=\"block\" variant=\"caption\" color=\"textSecondary\">\n          {item.channelTitle}\n        </Typography>\n        <Typography variant=\"caption\" color=\"textSecondary\">\n          {`${item.views.asString || item.views} • ${TimeAgo.inWords(item.publishedAt)}`}\n        </Typography>\n      </Box>\n    </Link>\n  );\n}\n","// no need to import process Object since it will be defined by create-react-app\n\nexport const isDevEnv: boolean = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n\nexport function debug(message: any, ...params: any) {\n  isDevEnv && console.log(message, ...params);\n}\n\nexport function warn(message: any, ...params: any) {\n  isDevEnv && console.warn(message, ...params);\n}\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { Video } from '../../models/Video';\nimport Media from './Media';\nimport { debug } from '../../helpers/debug';\n\ninterface VideoGridProps {\n  loading?: boolean;\n  videos: Video[];\n  maxPerChannel?: number;\n  maxSkeletons?: number;\n  onVideoClick: Function;\n}\n\nexport default function VideoGrid(props: VideoGridProps) {\n  const { videos, loading = false, maxPerChannel = 9, maxSkeletons = 9, onVideoClick } = props;\n  const [preventLongPress, setPreventLongPress] = React.useState(false);\n  const style = {\n    grid: {\n      minWidth: '428px'\n    }\n  };\n\n  const handleMouseEvent = (event: any) => {\n    debug(event.type, { preventLongPress: preventLongPress });\n    if (event.type === 'mousedown') {\n      setPreventLongPress(false); // always reset preventLongPress state on mousedown\n      setTimeout(() => {\n        // delay of 200 ms used here to wait for the click event\n        // if it fires immediately after the mousedown event then preventLongPress value will be false, otherwise it's probably a long press click\n        setPreventLongPress(true);\n      }, 200);\n    } else {\n      if (!preventLongPress) {\n        return true;\n      }\n      setPreventLongPress(false);\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    return false;\n  };\n\n  return (\n    <Grid container style={style.grid} onMouseDown={(event: any) => handleMouseEvent(event)} onClickCapture={(event: any) => handleMouseEvent(event)}>\n      {(loading ? Array.from(new Array(Math.min(maxPerChannel, maxSkeletons))) : videos.slice(0, maxPerChannel)).map((item, index) => (\n        <Box key={index} width={210} marginRight={0.5} marginBottom={3} draggable=\"false\">\n          {item ? (\n            <Media item={item} onClick={onVideoClick}></Media>\n          ) : (\n            <React.Fragment>\n              <Skeleton variant=\"rect\" width={210} height={118} />\n              <Box pt={0.5}>\n                <Skeleton />\n                <Skeleton width=\"60%\" />\n              </Box>\n            </React.Fragment>\n          )}\n        </Box>\n      ))}\n    </Grid>\n  );\n}\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles, Theme, useTheme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport YouTubeIcon from '@material-ui/icons/YouTube';\nimport Link from '@material-ui/core/Link';\nimport Avatar from '@material-ui/core/Avatar';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Video } from '../../models/Video';\nimport { Channel } from '../../models/Channel';\nimport { Settings } from '../../models/Settings';\nimport VideoGrid from './VideoGrid';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  breadcrumb: {\n    marginBottom: theme.spacing(2.5),\n  },\n  divider: {\n    marginBottom: theme.spacing(2.5),\n  },\n  link: {\n    display: 'flex',\n    alignItems: 'center',\n    cursor: 'pointer',\n    outline: 'none',\n    '&:hover': {\n      backgroundColor: 'transparent'\n    },\n  },\n  title: {\n    marginLeft: theme.spacing(1),\n  },\n  youtube: {\n    '& :hover': {\n      color: '#f44336',\n    },\n  },\n  box: {\n    '& :last-child': {\n      '& hr.divider': {\n        display: 'none'\n      }\n    }\n  }\n}));\n\ninterface MultiVideoGridProps {\n  loading?: boolean;\n  channels: Channel[];\n  videos: Video[];\n  settings: Settings;\n  maxPerChannel?: number;\n  onSelect: Function;\n  onVideoClick: Function;\n  onSave: Function;\n  onRefresh: Function;\n}\n\nexport default function MultiVideoGrid(props: MultiVideoGridProps) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const { channels, videos, settings, loading = false, maxPerChannel = 9, onSelect, onVideoClick, onSave, onRefresh } = props;\n  const [expandedChannelsIndexes, setExpandedChannelsIndexes] = React.useState<number[]>([]);\n\n  const hideChannel = (channel: Channel) => {\n    channels.forEach((c: Channel) => {\n      if (c.id === channel.id) {\n        c.isHidden = true;\n        onSave([...channels]);\n        onRefresh();\n        return;\n      }\n    });\n  };\n\n  const onChannelNameClick = (event: any, channel: Channel, index: number) => {\n    if (!settings?.openChannelsOnNameClick) {\n      event.preventDefault();\n      onSelect(channel, index);\n    }\n  };\n\n  return (\n    <Box overflow=\"hidden\" className={classes.box}>\n      {channels.map((channel: Channel, index: number) => {\n        if (channel.isHidden) {\n          // eslint-disable-next-line\n          return;\n        }\n        const channelVideos: Video[] = videos.filter((video: Video) => video.channelId === channel.id);\n        // hide empty channels\n        if (!loading && settings.hideEmptyChannels && channelVideos.length === 0) {\n          // eslint-disable-next-line\n          return;\n        }\n        return (\n          <Box key={index}>\n            <Breadcrumbs aria-label=\"breadcrumb\" className={classes.breadcrumb}>\n              <Link color=\"inherit\" className={classes.link} href={channel.url} target=\"_blank\" rel=\"noopener\" onClick={(event: any) => onChannelNameClick(event, channel, index)}>\n                <Avatar alt={channel.title} src={channel.thumbnail} />\n                <Typography variant=\"subtitle1\" color=\"textPrimary\" className={classes.title}>\n                  {channel.title}\n                </Typography>\n              </Link>\n              {!settings?.openChannelsOnNameClick && \n                <Link color=\"inherit\" className={`${classes.link} ${classes.youtube}`} href={channel.url} target=\"_blank\" rel=\"noopener\">\n                  <Tooltip title=\"Open channel\" aria-label=\"open-channel\">\n                    <YouTubeIcon />\n                  </Tooltip>\n                </Link>\n              }\n              <IconButton size=\"small\" className={classes.link} onClick={() => hideChannel(channel)}>\n                <Tooltip title=\"Hide channel\" aria-label=\"hide-channel\">\n                  <VisibilityOffIcon />\n                </Tooltip>\n              </IconButton>\n            </Breadcrumbs>\n            <VideoGrid videos={expandedChannelsIndexes.indexOf(index) > -1 ? channelVideos : channelVideos.slice(0, 3)} loading={loading} maxPerChannel={maxPerChannel} maxSkeletons={3} onVideoClick={onVideoClick} />\n            {channelVideos.length > 3 && expandedChannelsIndexes.indexOf(index) === -1 &&\n              <Tooltip title=\"Show more\" aria-label=\"show-more\">\n                <IconButton edge=\"end\" aria-label=\"show-more\" size=\"small\" style={{ marginBottom: theme.spacing(2.5) }} onClick={() => setExpandedChannelsIndexes([...expandedChannelsIndexes, index])}>\n                  <MoreHorizIcon fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            }\n            <Divider className={`divider ${classes.divider}`} />\n          </Box>\n      )}\n    )}\n    </Box>\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { RawHTML } from './RawHTML';\n\ninterface ConfirmationDialogProps {\n  open: boolean;\n  title: string;\n  description: string;\n  confirmButtonText?: string;\n  cancelButtonText?: string;\n  onClose: Function;\n  onConfirm: Function;\n}\n\nexport function ConfirmationDialog(props: ConfirmationDialogProps) {\n  const { open, title, description, confirmButtonText = 'Confirm', cancelButtonText = 'Cancel', onClose, onConfirm } = props;\n\n  return (\n    <Dialog\n      open={open}\n      onClose={() => onClose()}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n    <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          <RawHTML>{description}</RawHTML>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => onClose()} color=\"primary\">\n          {cancelButtonText}\n        </Button>\n        <Button onClick={() => onConfirm()} color=\"primary\" autoFocus>\n          {confirmButtonText}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport { RawHTML } from './RawHTML';\n\ninterface ImportDialogDialogProps {\n  open: boolean;\n  title: string;\n  description: string;\n  textFieldId: string;\n  textFieldLabel: string;\n  confirmButtonText?: string;\n  cancelButtonText?: string;\n  onClose: Function;\n  onConfirm: Function;\n  onValidate: Function;\n}\n\nexport function ImportDialog(props: ImportDialogDialogProps) {\n  const { open, title, description, textFieldId, textFieldLabel, confirmButtonText = 'Import', cancelButtonText = 'Cancel', onClose, onConfirm, onValidate } = props;\n  const [textFieldError, setTextFieldError] = React.useState(false);\n\n  const confirm = () => {\n    try {\n      const json = (document.getElementById(textFieldId) as any).value;\n      const data = JSON.parse(json);\n      const isValid = onValidate(data);\n      setTextFieldError(!isValid); // == false when isValid is true & vise versa\n      if (isValid) {\n        onConfirm(data);\n      }\n    } catch(error) {\n      setTextFieldError(true);\n    }\n  };\n\n  const close = () => {\n    setTextFieldError(false);\n    onClose();\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={close}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n    <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          <RawHTML>{description}</RawHTML>\n        </DialogContentText>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id={textFieldId}\n          label={textFieldLabel}\n          error={textFieldError}\n          multiline\n          rows=\"10\"\n          variant=\"outlined\"\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={close} color=\"primary\">\n          {cancelButtonText}\n        </Button>\n        <Button onClick={confirm} color=\"primary\" autoFocus>\n          {confirmButtonText}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport { isNumber } from '../../helpers/parser';\n\ninterface MoveToPositionDialogProps {\n  open: boolean;\n  title: string;\n  min?: number;\n  max?: number;\n  step?: number;\n  positionFieldId: string;\n  positionFieldLabel: string;\n  confirmButtonText?: string;\n  cancelButtonText?: string;\n  onClose: Function;\n  onConfirm: Function;\n}\n\nexport function MoveToPositionDialog(props: MoveToPositionDialogProps) {\n  const { open, title, min = 0, max = 100, step = 1, positionFieldId, positionFieldLabel, confirmButtonText = 'Move', cancelButtonText = 'Cancel', onClose, onConfirm } = props;\n  const [positionFieldError, setPositionFieldError] = React.useState(false);\n\n  const confirm = () => {\n    const position = (document.getElementById(positionFieldId) as any).value;\n    const isValid = isNumber(position);\n    setPositionFieldError(!isValid); // == false when isValid is true & vise versa\n    if (isValid) {\n      onConfirm(+position);\n    }\n  };\n\n  const close = () => {\n    setPositionFieldError(false);\n    onClose();\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={close}\n      aria-labelledby=\"alert-dialog-title\"\n    >\n    <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <TextField\n          autoFocus\n          id={positionFieldId}\n          label={positionFieldLabel}\n          error={positionFieldError}\n          inputProps={{ min: min, max: max, step: step }}\n          defaultValue={min}\n          type=\"number\"\n          size=\"small\"\n          variant=\"outlined\"\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={close} color=\"primary\">\n          {cancelButtonText}\n        </Button>\n        <Button onClick={confirm} color=\"primary\" autoFocus>\n          {confirmButtonText}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","\nexport function isNumber(value: string) {\n  return !isNaN(+value) && /^-?(0|[1-9][0-9]*)(\\.[0-9]*)?$/.test(value);\n}\n","//import { browser } from \"webextension-polyfill-ts\";\n\ndeclare var browser: any;\n\nexport function isWebExtension(): boolean {\n  try {\n    return !!browser;\n  } catch(error) {\n    return false;\n  }\n}\n\nexport function createTab(url: string, isActive: boolean = true): Promise<any> {\n  return browser.tabs.create({\n    url: url,\n    active: isActive\n  });\n}\n\nexport function executeScript(tabId: number, code: string): void {\n  browser.tabs.executeScript(\n    tabId, {\n      code: code\n    }\n  );\n}\n\nexport function sendNotification(message: string, type: string|any = 'basic'): void {\n  browser.notifications.create({\n    type: type,\n    title: 'Youtube viewer',\n    iconUrl: 'icons/128.png',\n    message: message\n  });\n}\n\nexport function setBadgeText(text: string|number): void {\n  browser.browserAction.setBadgeText({\n    text: text === 0 ? '' : text.toString()\n  });\n}\n\nexport function setBadgeColors(backgroundColor: string, textColor: string): void {\n  if (isFirefox()) {\n    browser.browserAction.setBadgeTextColor({ color: textColor });\n  }\n  browser.browserAction.setBadgeBackgroundColor({ color: backgroundColor });\n}\n\nexport function getBadgeText(): Promise<string> {\n  return browser.browserAction.getBadgeText({});\n}\n\nexport function isFirefox(): boolean {\n  return navigator.userAgent.indexOf(\"Firefox\") !== -1;\n}\n\nexport function isChrome(): boolean {\n  return navigator.userAgent.indexOf(\"Chrome\") !== -1;\n}\n","import React from 'react';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport SubscriptionsIcon from '@material-ui/icons/Subscriptions';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport ImportExportIcon from '@material-ui/icons/ImportExport';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport RootRef from '@material-ui/core/RootRef';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { Channel, ChannelSelection } from '../../models/Channel';\nimport { ConfirmationDialog } from '../shared/ConfirmationDialog';\nimport { ImportDialog } from '../shared/ImportDialog';\nimport { MoveToPositionDialog } from '../shared/MoveToPositionDialog';\nimport { download } from '../../helpers/download';\nimport { isWebExtension, createTab, isFirefox } from '../../helpers/browser';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport ControlCameraIcon from '@material-ui/icons/ControlCamera';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport TodayIcon from '@material-ui/icons/Today';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    channelsOptionsIcon: {\n      top: '50%',\n      right: '16px',\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n    },\n    menuIcon: {\n      fontSize: 20,\n      marginRight: theme.spacing(1),\n      verticalAlign: 'middle',\n    },\n    subheader: {\n      position: 'relative',\n    }\n  }),\n);\n\nconst getListStyle = (isDraggingOver: boolean) => ({\n  //background: isDraggingOver ? 'lightblue' : 'lightgrey',\n});\n\nconst getListItemStyle = (isDragging: boolean, isHidden: boolean, draggableStyle: any) => ({\n  // styles we need to apply on draggables\n  ...draggableStyle,\n  ...(isDragging && {\n    background: \"rgb(235,235,235)\"\n  }),\n  ...(isHidden && {\n    opacity: 0.5,\n    textDecoration: \"line-through\"\n  })\n});\n\n// a little function to help us with reordering the dnd result\nconst reorder = (list: any, startIndex: number, endIndex: number) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n\ninterface ChannelListProps {\n  channels: Channel[];\n  selectedIndex: number;\n  cacheSize: string;\n  todaysVideosCount: number;\n  recentVideosCount: number;\n  onShowAll: Function;\n  onShowTodaysVideos: Function;\n  onShowRecentVideos: Function;\n  onRefresh: Function;\n  onSelect: Function;\n  onDelete: Function;\n  onSave: Function;\n  onSelectedIndexChange: Function;\n  onClearCache: Function;\n  onClearRecentVideos: Function;\n  onImport: Function;\n}\n\nexport function ChannelList(props: ChannelListProps) {\n  const { channels, selectedIndex = ChannelSelection.All, cacheSize, todaysVideosCount, recentVideosCount, onShowAll, onShowTodaysVideos, onShowRecentVideos, onRefresh, onSelect, onDelete, onSave, onSelectedIndexChange, onClearCache, onClearRecentVideos, onImport } = props;\n  const classes = useStyles();\n  const [openDeleteChannelDialog, setOpenDeleteChannelDialog] = React.useState(false);\n  const [channelToDelete, setChannelToDelete] = React.useState<Channel>();\n  const [channelToDeleteIndex, setChannelToDeleteIndex] = React.useState(0);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [openedMenuIndex, setOpenedMenuIndex] = React.useState<number|string>(-1);\n  const [openClearCacheDialog, setOpenClearCacheDialog] = React.useState(false);\n  const [openClearRecentVideosDialog, setOpenClearRecentVideosDialog] = React.useState(false);\n  const [openImportChannelsDialog, setOpenImportChannelsDialog] = React.useState(false);\n  const [moveToPositionChannelIndex, setMoveToPositionChannelIndex] = React.useState<number>(-1);\n\n  const onDragEnd = (result: any) => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n    moveChannel(result.source.index, result.destination.index);\n  };\n\n  const getSelectedChannel = (): Channel | undefined => channels.find((_, i) => i === selectedIndex);\n\n  const moveChannel = (indexFrom: number, indexTo: number) => {\n    closeMenu();\n    const selectedChannel = getSelectedChannel();\n    const items: Channel[] = reorder(\n      channels,\n      indexFrom,\n      indexTo\n    ) as Channel[];\n    //console.log(items);\n    onSave(items);\n    if (selectedChannel) {\n      onSelectedIndexChange(items.indexOf(selectedChannel));\n    }\n  };\n\n  const deleteChannel = (channel: Channel, index: number) => {\n    closeMenu();\n    setChannelToDelete(channel);\n    setChannelToDeleteIndex(index);\n    setOpenDeleteChannelDialog(true);\n  };\n\n  const confirmDeleteChannel = () => {\n    const selectedChannel = getSelectedChannel();\n    onDelete(channelToDeleteIndex);\n    if (selectedChannel && selectedIndex !== channelToDeleteIndex) {\n      onSelectedIndexChange(channels.filter((_, i) => i !== channelToDeleteIndex).indexOf(selectedChannel));\n    }\n    closeDeleteChannelDialog();\n  };\n\n  const closeDeleteChannelDialog = () => {\n    setOpenDeleteChannelDialog(false);\n  };\n\n  const openChannel = (channel: Channel) => {\n    closeMenu();\n    if (isWebExtension()) {\n      createTab(channel.url);\n    } else {\n      window.open(channel.url, '_blank');\n    }\n  };\n\n  const refreshChannel = (channel: Channel, index: number) => {\n    closeMenu();\n    onSelect(channel, index, true);\n  };\n\n  const setChannel = (channel: Channel, index: number) => {\n    closeMenu();\n    channels[index] = channel;\n    onSave([...channels]);\n    if (selectedIndex < 0 && selectedIndex !== ChannelSelection.None) {\n      onRefresh(selectedIndex);\n    }\n  };\n\n  const hideChannel = (channel: Channel, index: number) => {\n    channel.isHidden = true;\n    setChannel(channel, index);\n  };\n\n  const unhideChannel = (channel: Channel, index: number) => {\n    channel.isHidden = false;\n    setChannel(channel, index);\n  };\n\n  const openMenu = (event: any, index: number|string) => {\n    event.stopPropagation();\n    setAnchorEl(event.currentTarget);\n    setOpenedMenuIndex(index);\n  };\n\n  const closeMenu = () => {\n    setAnchorEl(null);\n    setOpenedMenuIndex(-1);\n  };\n\n  const confirmClearCache = () => {\n    onClearCache();\n    closeClearCacheDialog();\n  };\n\n  const closeClearCacheDialog = () => {\n    setOpenClearCacheDialog(false);\n  };\n\n  const exportChannels = () => {\n    closeMenu();\n    const data = JSON.stringify(channels, null, 4);\n    const file = new Blob([data], {type: 'text/json'});\n    download(file, 'channels.json');\n  };\n\n  const importChannels = () => {\n    closeMenu();\n    setOpenImportChannelsDialog(true);\n  };\n\n  const closeImportChannelsDialog = () => {\n    setOpenImportChannelsDialog(false);\n  };\n\n  const confirmImportChannels = (channelsList: Channel[]) => {\n    onImport(channelsList);\n    closeImportChannelsDialog();\n  };\n\n  const openMoveChannelToPositionDialog = (channelIndex: number) => {\n    closeMenu();\n    setMoveToPositionChannelIndex(channelIndex);\n  };\n\n  const closeMoveChannelToPositionDialog = () => {\n    setMoveToPositionChannelIndex(-1);\n  };\n\n  const moveChannelToPosition = (position: number) => {\n    const indexTo = position - 1;\n    if (indexTo !== moveToPositionChannelIndex) {\n      moveChannel(moveToPositionChannelIndex, indexTo);\n    }\n    closeMoveChannelToPositionDialog();\n  };\n\n  const validateChannels = (channelsList: Channel[]): boolean => {\n    let isValid = true;\n    channelsList.forEach((channel: Channel) => {\n      if (!channel.id || !channel.title || !channel.thumbnail || !channel.description || !channel.url) {\n        //return false; // not working in foreach loop @see https://medium.com/front-end-weekly/3-things-you-didnt-know-about-the-foreach-loop-in-js-ff02cec465b1\n        isValid = false;\n      }\n    });\n    return isValid;\n  };\n\n  const clearCache = () => {\n    closeMenu();\n    setOpenClearCacheDialog(true);\n  };\n\n  const refreshRecentVideos = (event: any) => {\n    closeMenu();\n    onRefresh(ChannelSelection.RecentVideos, event);\n  };\n\n  const clearRecentVideos = () => {\n    closeMenu();\n    setOpenClearRecentVideosDialog(true);\n  };\n\n  const confirmClearRecentVideos = () => {\n    onClearRecentVideos();\n    closeClearRecentVideosDialog();\n  };\n\n  const closeClearRecentVideosDialog = () => {\n    setOpenClearRecentVideosDialog(false);\n  };\n\n  const refreshAll = (event?: any) => {\n    onRefresh(ChannelSelection.All, event);\n  };\n\n  const refreshTodaysVideos = (event: any) => {\n    closeMenu();\n    onRefresh(ChannelSelection.TodaysVideos, event);\n  };\n\n  return (\n    <React.Fragment>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable droppableId=\"droppable\">\n        {(provided: any, snapshot: any) => (\n          <RootRef rootRef={provided.innerRef}>\n            <List\n              dense\n              subheader={<ListSubheader className={classes.subheader}>Channels\n                <IconButton edge=\"end\" aria-label=\"channels-options\" size=\"small\" className={classes.channelsOptionsIcon} onClick={(event) => openMenu(event, 'channels-options')}>\n                  <MoreVertIcon fontSize=\"small\" />\n                </IconButton>\n                <Menu\n                  id=\"menu-channels-options\"\n                  anchorEl={anchorEl}\n                  keepMounted\n                  open={openedMenuIndex === 'channels-options'}\n                  onClose={closeMenu}\n                >\n                  <MenuItem onClick={() => exportChannels()}><GetAppIcon className={classes.menuIcon} /> Export</MenuItem>\n                  <MenuItem onClick={() => importChannels()}><ImportExportIcon className={classes.menuIcon} />Import</MenuItem>\n                  <Tooltip title={\"Cache size: \" + cacheSize} aria-label=\"clear-cache\">\n                    <MenuItem onClick={() => clearCache()}><DeleteSweepIcon className={classes.menuIcon} />Clear cache</MenuItem>\n                  </Tooltip>\n                </Menu>\n              </ListSubheader>}\n              style={getListStyle(snapshot.isDraggingOver)}\n            >\n              <ListItem button key=\"all\" selected={selectedIndex === ChannelSelection.All} onClick={() => onShowAll()}>\n                <ListItemIcon>\n                  <Badge color=\"secondary\" badgeContent={channels.length}>\n                    <Avatar>\n                      <SubscriptionsIcon />\n                    </Avatar>\n                  </Badge>\n                </ListItemIcon>\n                <ListItemText primary=\"All\" />\n                {channels?.length > 0 && <ListItemSecondaryAction>\n                  <Tooltip title=\"Refresh\" aria-label=\"refresh\">\n                    <IconButton edge=\"end\" aria-label=\"refresh\" size=\"small\" onClick={(event) => refreshAll(event)}>\n                      <RefreshIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Tooltip>\n                </ListItemSecondaryAction>}\n              </ListItem>\n              <ListItem button key=\"today\" selected={selectedIndex === ChannelSelection.TodaysVideos} onClick={() => onShowTodaysVideos()}>\n                <ListItemIcon>\n                  <Badge color=\"secondary\" badgeContent={todaysVideosCount}>\n                    <Avatar>\n                      <TodayIcon />\n                    </Avatar>\n                  </Badge>\n                </ListItemIcon>\n                <ListItemText primary=\"Today's videos\" />\n                {channels?.length > 0 && <ListItemSecondaryAction>\n                  <Tooltip title=\"Refresh\" aria-label=\"refresh\">\n                    <IconButton edge=\"end\" aria-label=\"refresh\" size=\"small\" onClick={(event) => refreshTodaysVideos(event)}>\n                      <RefreshIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Tooltip>\n                </ListItemSecondaryAction>}\n              </ListItem>\n              <ListItem button key=\"recent\" selected={selectedIndex === ChannelSelection.RecentVideos} onClick={() => onShowRecentVideos()}>\n                <ListItemIcon>\n                  <Badge color=\"secondary\" badgeContent={recentVideosCount}>\n                    <Avatar>\n                      <AccessTimeIcon />\n                    </Avatar>\n                  </Badge>\n                </ListItemIcon>\n                <ListItemText primary=\"Recent videos\" />\n                {channels?.length > 0 && <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"more\" size=\"small\" onClick={(event) => openMenu(event, ChannelSelection.RecentVideos)}>\n                    <MoreVertIcon fontSize=\"small\" />\n                  </IconButton>\n                  <Menu\n                    id=\"menu-recent-videos\"\n                    anchorEl={anchorEl}\n                    keepMounted\n                    open={openedMenuIndex === ChannelSelection.RecentVideos}\n                    onClose={closeMenu}\n                  >\n                    <MenuItem onClick={(event) => refreshRecentVideos(event)}><RefreshIcon className={classes.menuIcon} /> Refresh</MenuItem>\n                    {recentVideosCount > 0 && <MenuItem onClick={() => clearRecentVideos()}><DeleteIcon className={classes.menuIcon} /> Clear</MenuItem>}\n                  </Menu>\n                </ListItemSecondaryAction>}\n              </ListItem>\n              {channels.map((channel: Channel, index: number) => (\n                <Draggable key={channel.id} draggableId={channel.id} index={index}>\n                {(provided: any, snapshot: any) => (\n                  <ListItem\n                    ContainerProps={{ ref: provided.innerRef }}\n                    {...provided.draggableProps}\n                    {...provided.dragHandleProps}\n                    style={getListItemStyle(\n                      snapshot.isDragging,\n                      channel.isHidden,\n                      provided.draggableProps.style\n                    )}\n                    button\n                    selected={index === selectedIndex}\n                    onClick={() => onSelect(channel, index)}\n                  >\n                    <ListItemIcon><Avatar alt={channel.title} src={channel.thumbnail} /></ListItemIcon>\n                    <ListItemText primary={channel.title} />\n                    <ListItemSecondaryAction>\n                      <IconButton edge=\"end\" aria-label=\"more\" size=\"small\" onClick={(event) => openMenu(event, index)}>\n                        <MoreVertIcon fontSize=\"small\" />\n                      </IconButton>\n                      <Menu\n                        id={\"menu-\" + index}\n                        anchorEl={anchorEl}\n                        keepMounted\n                        open={openedMenuIndex === index}\n                        onClose={closeMenu}\n                      >\n                        <MenuItem onClick={() => openChannel(channel)}><OpenInNewIcon className={classes.menuIcon} /> Open channel</MenuItem>\n                        <MenuItem onClick={() => refreshChannel(channel, index)}><RefreshIcon className={classes.menuIcon} /> Refresh</MenuItem>\n                        {isWebExtension() && isFirefox() && index > 0 && <MenuItem onClick={() => moveChannel(index, index - 1)}><KeyboardArrowUpIcon className={classes.menuIcon} />Move up</MenuItem>}\n                        {isWebExtension() && isFirefox() && index < channels.length - 1 && <MenuItem onClick={() => moveChannel(index, index + 1)}><KeyboardArrowDownIcon className={classes.menuIcon} />Move down</MenuItem>}\n                        {isWebExtension() && isFirefox() && <MenuItem onClick={() => openMoveChannelToPositionDialog(index)}><ControlCameraIcon className={classes.menuIcon} />Move to position</MenuItem>}\n                        {channel.isHidden ? \n                          <MenuItem onClick={() => unhideChannel(channel, index)}><VisibilityIcon className={classes.menuIcon} /> Unhide</MenuItem> : \n                          <MenuItem onClick={() => hideChannel(channel, index)}><VisibilityOffIcon className={classes.menuIcon} /> Hide</MenuItem>\n                        }\n                        <MenuItem onClick={() => deleteChannel(channel, index)}><DeleteIcon className={classes.menuIcon} /> Delete</MenuItem>\n                      </Menu>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </List>\n          </RootRef>\n        )}\n        </Droppable>\n      </DragDropContext>\n      <ConfirmationDialog\n        open={openClearCacheDialog}\n        title=\"Clear cache\"\n        description=\"This action is irreversible, would you like to continue?\"\n        confirmButtonText=\"Clear\"\n        onClose={closeClearCacheDialog}\n        onConfirm={confirmClearCache}\n      />\n      <ConfirmationDialog\n        open={openClearRecentVideosDialog}\n        title=\"Clear recent videos\"\n        description=\"Would you like to reset/clear recent videos?\"\n        confirmButtonText=\"Clear\"\n        onClose={closeClearRecentVideosDialog}\n        onConfirm={confirmClearRecentVideos}\n      />\n      <ConfirmationDialog\n        open={openDeleteChannelDialog}\n        title=\"Delete Channel\"\n        description={\"Would you like to delete <strong>\" + channelToDelete?.title + \"</strong> channel?\"}\n        confirmButtonText=\"Delete\"\n        onClose={closeDeleteChannelDialog}\n        onConfirm={confirmDeleteChannel}\n      />\n      <ImportDialog\n        open={openImportChannelsDialog}\n        title=\"Import Channels\"\n        description=\"Copy & paste below the content of <strong>channels.json</strong> file. Notice that your current channels list will be overrided!\"\n        textFieldId=\"channels-to-import\"\n        textFieldLabel=\"Channels (json)\"\n        onClose={closeImportChannelsDialog}\n        onConfirm={confirmImportChannels}\n        onValidate={validateChannels}\n      />\n      <MoveToPositionDialog\n        open={moveToPositionChannelIndex > -1}\n        title=\"Move Channel To Position\"\n        min={1}\n        max={channels.length}\n        positionFieldId=\"channel-position\"\n        positionFieldLabel=\"Position\"\n        onClose={closeMoveChannelToPositionDialog}\n        onConfirm={moveChannelToPosition}\n      />\n    </React.Fragment>\n  )\n}\n","/**\n * Stolen from https://stackoverflow.com/a/44737041\n */\nexport function download(blob: Blob, filename: string) {\n  if (window.navigator.msSaveOrOpenBlob) { // IE10+\n    window.navigator.msSaveOrOpenBlob(blob, filename);\n  } else { // Others\n    let a = document.createElement('a'),\n        url = URL.createObjectURL(blob);\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);  \n    }, 0);\n  }\n}\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport { RawHTML } from './RawHTML';\n\ninterface MessageSnackbarProps {\n  message: string|undefined;\n  open: boolean;\n  onClose: Function;\n  autoHideDuration?: number;\n  anchorOrigin?: any;\n}\n\nexport function MessageSnackbar(props: MessageSnackbarProps) {\n  const { message, open, onClose, autoHideDuration = 6000, anchorOrigin = { vertical: 'top', horizontal: 'center' } } = props;\n\n  return (\n    <Snackbar\n      anchorOrigin={anchorOrigin}\n      open={open}\n      autoHideDuration={autoHideDuration}\n      onClose={() => onClose()}\n      message={message && <RawHTML>{message}</RawHTML>}\n      action={\n        <Button color=\"secondary\" size=\"small\" onClick={() => onClose()}>\n          Close\n        </Button>\n      }\n    />\n  )\n}\n","import React from 'react';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Divider from '@material-ui/core/Divider';\nimport Slide from '@material-ui/core/Slide';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport Link from '@material-ui/core/Link';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { Settings } from '../../models/Settings';\nimport { ChannelSelection } from '../../models/Channel';\nimport { isWebExtension } from '../../helpers/browser';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    settingsAppBar: {\n      position: 'relative',\n      backgroundColor: '#f44336',\n    },\n    settingsTitle: {\n      marginLeft: theme.spacing(2),\n      flex: 1,\n    },\n    container: {\n      width: '223px',\n      height: '40px',\n    },\n    select: {\n      padding: '10px 26px 10px 12px',\n      '&:-moz-focusring': { // removes the ugly dotted outline around the selected option in Firefox\n        color: 'transparent',\n        textShadow: '0 0 0 #000',\n      },\n    },\n    optionLabel: {\n      maxWidth: '70%',\n    },\n  }),\n);\n\nconst settingsDialogTransition = React.forwardRef<unknown, TransitionProps>(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\ninterface SettingsDialogProps {\n  settings: Settings;\n  open: boolean;\n  onClose: Function;\n  onSave: Function;\n}\n\nexport function SettingsDialog(props: SettingsDialogProps) {\n  const { settings, open, onClose, onSave } = props;\n  const classes = useStyles();\n\n  const validateSettings = (event: any) => {\n    let input = event.target;\n    //console.log(input.type, input.min, input.max, input.value);\n    if (input.type === \"number\") {\n      if (!input.value.match(/^\\d+$/) || +input.value < +input.min) {\n        input.value = input.min;\n      } else if (+input.value > +input.max) {\n        input.value = input.max;\n      }\n    }\n  };\n\n  return (\n    <Dialog fullScreen open={open} onClose={() => onClose()} TransitionComponent={settingsDialogTransition}>\n      <AppBar color=\"secondary\" className={classes.settingsAppBar}>\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" onClick={() => onClose()} aria-label=\"close\">\n            <CloseIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.settingsTitle}>\n            Settings\n          </Typography>\n          <Button autoFocus color=\"inherit\" onClick={() => onSave()}>\n            save\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <List>\n        <ListItem>\n          <ListItemText primary=\"Default channel selection\" secondary=\"The channel menu that would be selected by default\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <Select\n              native\n              inputProps={{ id: 'defaultChannelSelection', className: classes.select }}\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.container}\n              defaultValue={settings?.defaultChannelSelection}\n            >\n              <option value={ChannelSelection.All}>All</option>\n              <option value={ChannelSelection.TodaysVideos}>Today's videos</option>\n              <option value={ChannelSelection.RecentVideos}>Recent videos</option>\n            </Select>\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Max videos per channel\" secondary=\"The maximum number of videos to show per channel\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <TextField\n              id=\"videosPerChannel\"\n              type=\"number\"\n              size=\"small\"\n              variant=\"outlined\"\n              color=\"secondary\"\n              inputProps={{ min: 3, max: 50, step: 3 }}\n              className={classes.container}\n              defaultValue={settings?.videosPerChannel}\n              onChange={(event) => validateSettings(event)}\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Anteriority of videos (in days)\" secondary=\"Number of days to subtract from the current date\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <TextField\n              id=\"videosAnteriority\"\n              type=\"number\"\n              size=\"small\"\n              variant=\"outlined\"\n              color=\"secondary\"\n              inputProps={{ min: 1, max: 365, step: 7 }}\n              className={classes.container}\n              defaultValue={settings?.videosAnteriority}\n              onChange={(event) => validateSettings(event)}\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Sort videos by\" secondary=\"Videos sorting criteria\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <Select\n              native\n              inputProps={{ id: 'sortVideosBy', className: classes.select }}\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.container}\n              defaultValue={settings?.sortVideosBy}\n            >\n              <option value=\"date\">Date</option>\n              <option value=\"views\">Views</option>\n            </Select>\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary={\n            <Typography variant=\"body1\" component=\"span\">Custom API key (<Link href=\"https://www.slickremix.com/docs/get-api-key-for-youtube/\" target=\"_blank\" rel=\"noopener\">How to get an API key?</Link>)</Typography>\n          } secondary={\n            <React.Fragment>\n              <Typography variant=\"body2\" component=\"span\">Replaces the default youtube API key provided with the extension</Typography>\n              <br/>\n              <Typography variant=\"body2\" component=\"span\">(will apply the next time you {isWebExtension() ? 'open the extension popup' : 'reload the app'})</Typography>\n            </React.Fragment>\n          } className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <TextField\n              id=\"apiKey\"\n              type=\"text\"\n              placeholder=\"AIzaSyDOkg-u9jnhP-WnzX5WPJyV1sc5QQrtuyc\"\n              size=\"small\"\n              variant=\"outlined\"\n              color=\"secondary\"\n              inputProps={{ minLength: 39 }}\n              className={classes.container}\n              defaultValue={settings?.apiKey}\n              onChange={(event) => validateSettings(event)}\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        {isWebExtension() &&\n          <React.Fragment>\n            <Divider />\n            <ListItem>\n              <ListItemText primary=\"Auto videos check rate (in minutes)\" secondary=\"Number of minutes to wait before auto-checking for recent videos\" className={classes.optionLabel} />\n              <ListItemSecondaryAction>\n                <TextField\n                  id=\"autoVideosCheckRate\"\n                  type=\"number\"\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"secondary\"\n                  inputProps={{ min: 5, max: 720, step: 5 }}\n                  className={classes.container}\n                  defaultValue={settings?.autoVideosCheckRate}\n                  onChange={(event) => validateSettings(event)}\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n            <Divider />\n            <ListItem>\n              <ListItemText primary=\"Enable recent videos notifications\" secondary=\"Notifies you when recent videos get posted\" className={classes.optionLabel} />\n              <ListItemSecondaryAction>\n                <Switch\n                  id=\"enableRecentVideosNotifications\"\n                  defaultChecked={settings?.enableRecentVideosNotifications}\n                  color=\"secondary\"\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n            <Divider />\n            <ListItem>\n              <ListItemText primary=\"Auto play videos once opened\" secondary=\"Auto-play permission should be granted for youtube.com\" className={classes.optionLabel} />\n              <ListItemSecondaryAction>\n                <Switch\n                  id=\"autoPlayVideos\"\n                  defaultChecked={settings?.autoPlayVideos}\n                  color=\"secondary\"\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n            <Divider />\n            <ListItem>\n              <ListItemText primary=\"Open videos in inactive tabs\" secondary=\"Will open videos in new tabs without losing focus of the current tab\" className={classes.optionLabel} />\n              <ListItemSecondaryAction>\n                <Switch\n                  id=\"openVideosInInactiveTabs\"\n                  defaultChecked={settings?.openVideosInInactiveTabs}\n                  color=\"secondary\"\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n          </React.Fragment>\n        }\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Open channels on name click\" secondary='Will open channels directly by clicking on their name, replaces the icon button \"open channel\"' className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <Switch\n              id=\"openChannelsOnNameClick\"\n              defaultChecked={settings?.openChannelsOnNameClick}\n              color=\"secondary\"\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Hide empty channels\" secondary=\"Hide all empty channels by default\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <Switch\n              id=\"hideEmptyChannels\"\n              defaultChecked={settings?.hideEmptyChannels}\n              color=\"secondary\"\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Auto clear recent videos\" secondary=\"Auto-clear recent videos before each startup\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <Switch\n              id=\"autoClearRecentVideos\"\n              defaultChecked={settings?.autoClearRecentVideos}\n              color=\"secondary\"\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText primary=\"Auto clear videos cache\" secondary=\"Cache may speed up loading time & reduce API quota consumption\" className={classes.optionLabel} />\n          <ListItemSecondaryAction>\n            <Switch\n              id=\"autoClearCache\"\n              defaultChecked={settings?.autoClearCache}\n              color=\"secondary\"\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    </Dialog>\n  )\n}\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\ninterface CustomSnackbarProps {\n  open: boolean;\n  message: string;\n  onClose: Function;\n  onRefresh: Function;\n}\n\nexport function CustomSnackbar(props: CustomSnackbarProps) {\n  const { open, message, onClose, onRefresh } = props;\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      open={open}\n      autoHideDuration={6000}\n      onClose={() => onClose()}\n      message={message}\n      action={\n        <React.Fragment>\n          <Button color=\"secondary\" size=\"small\" onClick={(event) => onRefresh(null, event)}>\n            Refresh\n          </Button>\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={() => onClose()}>\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </React.Fragment>\n      }\n    />\n  )\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme, Theme, createStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport FavoriteRoundedIcon from '@material-ui/icons/FavoriteRounded';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport Box from '@material-ui/core/Box';\nimport Link from '@material-ui/core/Link';\nimport Fade from '@material-ui/core/Fade';\nimport SearchChannelInput from './channel/SearchChannelInput';\nimport { Channel, ChannelSelection } from '../models/Channel';\nimport { getChannelActivities, getVideoInfo } from '../helpers/youtube';\nimport { Video } from '../models/Video';\nimport { getDateBefore, memorySizeOf, isInToday, diffHours } from '../helpers/utils';\nimport MultiVideoGrid from './video/MultiVideoGrid';\nimport VideoGrid from './video/VideoGrid';\nimport { Settings } from '../models/Settings';\nimport { saveToStorage } from '../helpers/storage';\nimport { ChannelList } from './channel/ChannelList';\nimport { MessageSnackbar } from './shared/MessageSnackbar';\nimport { SettingsDialog } from './settings/SettingsDialog';\nimport { CustomSnackbar } from './shared/CustomSnackbar';\nimport { isWebExtension, isFirefox, createTab, executeScript } from '../helpers/browser';\nimport { debug, warn } from '../helpers/debug';\n// @ts-ignore\nimport ReactPullToRefresh from 'react-pull-to-refresh';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      minWidth: '700px',\n      minHeight: isWebExtension() ? '500px' : '100vh',\n      maxWidth: isWebExtension() && isFirefox() ? '700px' : 'none',\n    },\n    appBar: {\n      backgroundColor: '#f44336',\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    hide: {\n      display: 'none',\n    },\n    grow: {\n      flexGrow: 1,\n    },\n    title: {\n      display: 'none',\n      [theme.breakpoints.up('sm')]: {\n        display: 'block',\n      },\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    drawerHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      padding: theme.spacing(0, 1),\n      ...theme.mixins.toolbar,\n      justifyContent: 'flex-end',\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      marginLeft: -drawerWidth,\n    },\n    contentShift: {\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n      marginLeft: 0,\n    },\n    container: {\n      display: 'flex',\n      width: '100%',\n      height: '80%',\n      justifyContent: 'center',\n    },\n    centered: {\n      alignSelf: 'center',\n      textAlign: 'center',\n      margin: '0 80px'\n    },\n    heartIcon: {\n      color: '#e25555',\n      fontSize: 16,\n      verticalAlign: 'middle',\n    },\n    madeWithLove: {\n      padding: theme.spacing(1, 0),\n    },\n  }),\n);\n\ninterface PopupProps {\n  channels: Channel[];\n  settings: Settings;\n  cache: any;\n  isReady: boolean;\n}\n\nexport default function Popup(props: PopupProps) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [channels, setChannels] = React.useState<Channel[]>(props.channels);\n  const [videos, setVideos] = React.useState<Video[]>([]);\n  const [openDrawer, setOpenDrawer] = React.useState(false);\n  const [isReady, setIsReady] = React.useState(props.isReady);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [selectedChannelIndex, setSelectedChannelIndex] = React.useState(ChannelSelection.All);\n  const [settings, setSettings] = React.useState<Settings>(props.settings);\n  const [openSettingsDialog, setOpenSettingsDialog] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState('');\n  const [lastError, setLastError] = React.useState<Error|null>(null);\n  const [cache, setCache] = React.useState<any>({});\n  const [recentVideosCount, setRecentVideosCount] = React.useState(0);\n  const [todaysVideosCount, setTodaysVideosCount] = React.useState(0);\n\n  React.useEffect(() => setChannels(props.channels), [props.channels]);\n  React.useEffect(() => setSettings(props.settings), [props.settings]);\n  React.useEffect(() => setCache(props.cache), [props.cache]);\n  React.useEffect(() => setIsReady(props.isReady), [props.isReady]);\n\n  React.useEffect(() => {\n    warn('isReady changed', isReady);\n    if (isReady) {\n      if (channels.length && !videos.length) {\n        showChannelSelection(settings.defaultChannelSelection, true);\n      } else if (selectedChannelIndex !== settings.defaultChannelSelection) {\n        setSelectedChannelIndex(settings.defaultChannelSelection);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isReady]);\n\n  React.useEffect(() => {\n    warn('channels changed', { isReady: isReady });\n    if (isReady) {\n      saveToStorage({ channels: channels });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [channels]);\n\n  React.useEffect(() => {\n    warn('settings changed', { isReady: isReady });\n    if (isReady) {\n      saveToStorage({ settings: settings });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [settings]);\n\n  React.useEffect(() => {\n    warn('cache or channels changed', { isReady: isReady });\n    if (isReady) {\n      debug('----------------------');\n      debug('counting todays & recent videos');\n      let totalRecentVideosCount: number = 0, totalTodaysVideosCount: number = 0;\n      Object.keys(cache).forEach((channelId: string) => {\n        const channel = channels.find((c: Channel) => c.id === channelId);\n        if (!channel || channel.isHidden) {\n          return;\n        }\n        const recentVideosCountPerChannel = (cache[channelId].filter((video: Video) => video.isRecent)).length;\n        const todaysVideosCountPerChannel = (cache[channelId].filter((video: Video) => isInToday(video.publishedAt))).length;\n        debug(channel.title, { recent: recentVideosCountPerChannel, todays: todaysVideosCountPerChannel });\n        totalRecentVideosCount += recentVideosCountPerChannel;\n        totalTodaysVideosCount += todaysVideosCountPerChannel;\n      });\n      debug('total count', { recent: totalRecentVideosCount, todays: totalTodaysVideosCount });\n      setRecentVideosCount(totalRecentVideosCount);\n      setTodaysVideosCount(totalTodaysVideosCount);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cache, channels]);\n\n  const handleDrawerOpen = () => {\n    setOpenDrawer(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpenDrawer(false);\n  };\n\n  const displayError = (error: Error) => {\n    console.error(error);\n    setLastError(error);\n  };\n\n  const getChannelVideos = (channel: Channel, ignoreCache: boolean = false): Promise<Video[]> => {\n    return new Promise((resolve, reject) => {\n      if (!ignoreCache && cache[channel.id]?.length) {\n        debug('----------------------');\n        debug('load videos from cache', channel.title, cache[channel.id]);\n        resolve(cache[channel.id].slice(0, settings.videosPerChannel));\n      } else {\n        getChannelActivities(channel.id, getDateBefore(settings.videosAnteriority)).then((results) => {\n          debug('----------------------');\n          debug('activities of', channel.title, results);\n          if (results?.items) {\n            // get recent videos ids\n            const videosIds: string[] = results.items.map((item: any) => item.contentDetails.upload?.videoId).filter((id: string) => id?.length);\n            const cacheVideosIds: string[] = cache[channel.id]?.length ? cache[channel.id].map((video: Video) => video.id) : [];\n            const recentVideosIds: string[] = videosIds.filter((videoId: string, index: number) => videosIds.indexOf(videoId) === index) // remove duplicates\n                                                       .slice(0, settings.videosPerChannel)\n                                                       .filter((videoId: string) => cacheVideosIds.indexOf(videoId) === -1); // remove videos already in cache\n            // get recent videos informations\n            if (!recentVideosIds.length) {\n              debug('no recent videos for this channel');\n              resolve(cache[channel.id]?.slice(0, settings.videosPerChannel) || []);\n            } else {\n              debug('getting recent videos of', channel.title, { recentVideosIds: recentVideosIds, cacheVideosIds: cacheVideosIds });\n              getVideoInfo(recentVideosIds).then((videosData: Video[]) => {\n                debug('recent videos data', videosData);\n                // mark new videos as recent\n                const now = new Date();\n                videosData = videosData.map((video: Video) => {\n                  const videoDate = new Date(video.publishedAt); // convert timestamp to Date object\n                  if (diffHours(now, videoDate) <= 24) { // avoid marking too old videos as recent when cache is empty\n                    video.isRecent = true;\n                  }\n                  return video;\n                });\n                // merge cached & new videos\n                cache[channel.id] = cache[channel.id]?.length ? [...videosData, ...cache[channel.id]] : videosData;\n                // sort videos\n                const videos = cache[channel.id].sort((a: Video, b: Video) => {\n                  if (settings.sortVideosBy === 'views' && a.views?.count && b.views?.count) {\n                    return b.views.count - a.views.count;\n                  } else {\n                    return b.publishedAt - a.publishedAt;\n                  }\n                }).slice(0, settings.videosPerChannel);\n                // save to cache\n                setCache({...cache});\n                saveToStorage({ cache: cache });\n                resolve(videos || []);\n              }).catch((error: Error) => {\n                displayError(error);\n                resolve([]);\n              });\n            }\n          } else {\n            resolve([]);\n          }\n        }).catch((error: Error) => {\n          displayError(error);\n          resolve([]);\n        });\n      }\n    });\n  };\n\n  const addChannel = (channel: Channel) => {\n    // Add channel\n    debug('added channel:', channel);\n    const found: Channel | undefined = channels.find((c: Channel) => c.id === channel.id);\n    if (!found) {\n      setChannels([...channels, channel]);\n      setSelectedChannelIndex(channels.length);\n    } else {\n      setSelectedChannelIndex(channels.indexOf(found));\n    }\n    // Get channel videos\n    setIsLoading(true);\n    getChannelVideos(channel).then((videos: Video[]) => {\n      setVideos(videos || []);\n      setIsLoading(false);\n    });\n  };\n\n  const selectChannel = (channel: Channel, index: number, ignoreCache: boolean = false) => {\n    // Select channel\n    debug('selected channel:', channel);\n    setSelectedChannelIndex(index);\n    // Get its videos\n    setIsLoading(true);\n    return getChannelVideos(channel, ignoreCache).then((videos: Video[]) => {\n      setVideos(videos || []);\n      setIsLoading(false);\n      window.scrollTo(0, 0); // scroll to top\n    });\n  };\n  \n  const deleteChannel = (index: number) => {\n    setChannels(channels.filter((_, i) => i !== index));\n    if (selectedChannelIndex === index) {\n      setVideos([]);\n      setSelectedChannelIndex(ChannelSelection.None);\n    }\n  };\n\n  const fetchChannelsVideos = (selection: ChannelSelection, filterFunction: Function|null = null, ignoreCache: boolean = false, customChannels?: Channel[]) => {\n    // Update channel selection\n    setSelectedChannelIndex(selection);\n    // Get channels videos\n    setIsLoading(true);\n    setVideos([]);\n    let promises: Promise<any>[] = [];\n    let videos: Video[] = [];\n    const channelsList = customChannels || channels;\n\n    channelsList.filter((channel: Channel) => !channel.isHidden).forEach((channel: Channel) => {\n\n      const promise = getChannelVideos(channel, ignoreCache).then((newVideos: Video[]) => {\n        debug('----------------------');\n        debug(channel.title, newVideos);\n        if (filterFunction) {\n          newVideos = newVideos.filter((video: Video) => filterFunction(video));\n        }\n        videos.push(...newVideos);\n      });\n      promises.push(promise);\n\n    });\n\n    return Promise.all(promises).finally(() => {\n      setVideos(videos);\n      setIsLoading(false);\n    });\n  };\n\n  const showAllChannels = (ignoreCache: boolean = false) => {\n    return fetchChannelsVideos(ChannelSelection.All, null, ignoreCache);\n  };\n\n  const showTodaysVideos = (ignoreCache: boolean = false) => {\n    return fetchChannelsVideos(ChannelSelection.TodaysVideos, (video: Video) => isInToday(video.publishedAt), ignoreCache);\n  };\n\n  const showRecentVideos = (ignoreCache: boolean = false) => {\n    return fetchChannelsVideos(ChannelSelection.RecentVideos, (video: Video) => video.isRecent, ignoreCache);\n  };\n\n  const showChannelSelection = (selection: ChannelSelection, ignoreCache: boolean = false) => {\n    switch(selection) {\n      case ChannelSelection.TodaysVideos:\n        return showTodaysVideos(ignoreCache);\n      case ChannelSelection.RecentVideos:\n        return showRecentVideos(ignoreCache);\n      case ChannelSelection.All:\n      default:\n        return showAllChannels(ignoreCache);\n    }\n  };\n\n  const clearRecentVideos = () => {\n    Object.keys(cache).forEach((channelId: string) => {\n      cache[channelId] = cache[channelId].map((video: Video) => {\n        video.isRecent = false;\n        return video;\n      });\n    });\n    setCache({...cache});\n    saveToStorage({ cache: cache });\n    if (selectedChannelIndex === ChannelSelection.RecentVideos) {\n      refreshChannels(ChannelSelection.RecentVideos);\n    }\n  };\n\n  const refreshChannels = (selection?: ChannelSelection, event?: any) => {\n    if (event) {\n      event.stopPropagation();\n    }\n    if (selection === undefined || selection === null) {\n      selection = selectedChannelIndex;\n    }\n    if (selection > 0) {\n      return selectChannel(channels[selection], selection, true);\n    } else {\n      return showChannelSelection(selection, true);\n    }\n  };\n\n  const importChannels = (channelsList: Channel[]) => {\n    debug('importing channels', channelsList);\n    // Update channels\n    setChannels(channelsList);\n    fetchChannelsVideos(ChannelSelection.All, null, true, channelsList);\n    setSnackbarMessage('Channels imported!');\n  };\n\n  const clearCache = () => {\n    setCache({});\n    saveToStorage({ cache: {} });\n    setSnackbarMessage('Cache cleared!');\n  };\n\n  const getCacheSize = () => {\n    const size = memorySizeOf(cache);\n    //console.log(size);\n    return size;\n  };\n\n  const openSettings = (event: any) => {\n    event.stopPropagation();\n    setOpenSettingsDialog(true);\n  };\n\n  const closeSettings = () => {\n    setOpenSettingsDialog(false);\n  };\n\n  const saveSettings = () => {\n    // Update settings\n    setSettings({\n      defaultChannelSelection: +(document.getElementById('defaultChannelSelection') as any).value,\n      videosPerChannel: +(document.getElementById('videosPerChannel') as any).value,\n      videosAnteriority: +(document.getElementById('videosAnteriority') as any).value,\n      sortVideosBy: (document.getElementById('sortVideosBy') as any).value,\n      apiKey: (document.getElementById('apiKey') as any).value,\n      autoVideosCheckRate: +(document.getElementById('autoVideosCheckRate') as any)?.value || settings.autoVideosCheckRate,\n      enableRecentVideosNotifications: (document.getElementById('enableRecentVideosNotifications') as any)?.checked || settings.enableRecentVideosNotifications,\n      autoPlayVideos: (document.getElementById('autoPlayVideos') as any)?.checked || settings.autoPlayVideos,\n      openVideosInInactiveTabs: (document.getElementById('openVideosInInactiveTabs') as any)?.checked || settings.openVideosInInactiveTabs,\n      openChannelsOnNameClick: (document.getElementById('openChannelsOnNameClick') as any).checked,\n      hideEmptyChannels: (document.getElementById('hideEmptyChannels') as any).checked,\n      autoClearRecentVideos: (document.getElementById('autoClearRecentVideos') as any).checked,\n      autoClearCache: (document.getElementById('autoClearCache') as any).checked\n    });\n    closeSettings();\n    setSnackbarMessage('Settings saved!');\n  };\n\n  const closeSettingsSnackbar = () => {\n    setSnackbarMessage('');\n  };\n\n  const openVideo = (event: any) => {\n    event.stopPropagation();\n    const videoUrl = event.currentTarget.href;\n    if (isWebExtension() && videoUrl) {\n      event.preventDefault();\n      createTab(videoUrl, !settings.openVideosInInactiveTabs).then((tab: any) => {\n        if (settings.autoPlayVideos) {\n          executeScript(tab.id, `document.querySelector('#player video').play();`);\n        }\n      });\n    }\n  };\n\n  const handlePullToRefresh = (resolve: Function, reject: Function) => {\n    let promise: Promise<any>;\n    if (selectedChannelIndex >= 0) {\n      promise = selectChannel(channels[selectedChannelIndex], selectedChannelIndex, true);\n    } else {\n      promise = refreshChannels(selectedChannelIndex);\n    }\n    promise.then(() => {\n      resolve();\n    }).catch(() => {\n      reject();\n    });\n  };\n\n  const getNotHiddenChannelsCount = () => {\n    return channels.filter((channel: Channel) => !channel.isHidden)?.length;\n  };\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        color=\"secondary\"\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: openDrawer,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, openDrawer && classes.hide)}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            Youtube viewer\n          </Typography>\n          <SearchChannelInput onSelect={addChannel} onError={displayError} />\n          <div className={classes.grow} />\n          <IconButton edge=\"end\" aria-label=\"settings\" color=\"inherit\" onClick={(event) => openSettings(event)}>\n            <SettingsIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        className={classes.drawer}\n        variant=\"persistent\"\n        anchor=\"left\"\n        open={openDrawer}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <ChannelList\n          channels={channels}\n          selectedIndex={selectedChannelIndex}\n          cacheSize={getCacheSize()}\n          todaysVideosCount={todaysVideosCount}\n          recentVideosCount={recentVideosCount}\n          onShowAll={showAllChannels}\n          onShowTodaysVideos={showTodaysVideos}\n          onShowRecentVideos={showRecentVideos}\n          onRefresh={refreshChannels}\n          onSelect={selectChannel}\n          onDelete={deleteChannel}\n          onSave={setChannels}\n          onSelectedIndexChange={setSelectedChannelIndex}\n          onClearCache={clearCache}\n          onClearRecentVideos={clearRecentVideos}\n          onImport={importChannels}\n        />\n        <div className={classes.grow} />\n        <Divider />\n        <Typography variant=\"caption\" align=\"center\" className={classes.madeWithLove}>\n          Made with <FavoriteRoundedIcon className={classes.heartIcon} /> by AXeL\n          <Link href=\"https://github.com/AXeL-dev/youtube-viewer\" target=\"_blank\" rel=\"noopener\">\n            <IconButton edge=\"end\" size=\"small\" aria-label=\"github link\">\n              <GitHubIcon fontSize=\"inherit\" />\n            </IconButton>\n          </Link>\n        </Typography>\n      </Drawer>\n      <main\n        className={clsx(classes.content, {\n          [classes.contentShift]: openDrawer,\n        })}\n        //onClick={() => handleDrawerClose()}\n      >\n        <div className={classes.drawerHeader} />\n        {isReady && selectedChannelIndex !== ChannelSelection.None && (channels?.length ? (\n          <ReactPullToRefresh\n            onRefresh={handlePullToRefresh}\n            icon={(!settings.hideEmptyChannels && selectedChannelIndex < 0 && getNotHiddenChannelsCount() > 0) || videos?.length > 0 ? <ArrowDownwardIcon className=\"arrowicon\" /> : <i></i>}\n            distanceToRefresh={50}\n            resistance={5}\n            style={{ position: 'relative' }}\n          >\n            {selectedChannelIndex < 0 ? (\n              <MultiVideoGrid\n                channels={channels}\n                videos={videos}\n                settings={settings}\n                loading={isLoading}\n                maxPerChannel={settings.videosPerChannel}\n                onSelect={selectChannel}\n                onVideoClick={openVideo}\n                onSave={setChannels}\n                onRefresh={refreshChannels}\n              />\n            ) : (\n              <VideoGrid\n                videos={videos}\n                loading={isLoading}\n                maxPerChannel={settings.videosPerChannel}\n                onVideoClick={openVideo}\n              />\n            )}\n          </ReactPullToRefresh>\n        ) : (\n          <Fade in={true} timeout={3000}>\n            <Box className={classes.container}>\n              <Typography component=\"div\" variant=\"h5\" color=\"textSecondary\" className={classes.centered} style={{ cursor: 'default' }}>\n                <SearchIcon style={{ fontSize: 38, verticalAlign: 'middle' }} /> Start by typing a channel name in the search box\n              </Typography>\n            </Box>\n          </Fade>\n        ))}\n      </main>\n      <SettingsDialog settings={settings} open={openSettingsDialog} onClose={closeSettings} onSave={saveSettings} />\n      <CustomSnackbar open={!!snackbarMessage.length} message={snackbarMessage} onClose={closeSettingsSnackbar} onRefresh={refreshChannels} />\n      <MessageSnackbar message={lastError?.message} open={!!lastError} onClose={() => setLastError(null)} />\n    </div>\n  )\n}\n","import React from 'react';\nimport './App.css';\nimport Popup from './components/Popup';\nimport { getFromStorage, saveToStorage } from './helpers/storage';\nimport { Channel, ChannelSelection } from './models/Channel';\nimport { Settings } from './models/Settings';\nimport { isWebExtension, setBadgeText } from './helpers/browser';\nimport { debug } from './helpers/debug';\nimport { Video } from './models/Video';\n\ninterface AppProps {}\n\ninterface AppState {\n  channels: Channel[];\n  settings: Settings;\n  cache: any;\n  isReady: boolean;\n}\n\nclass App extends React.Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n    this.state = {\n      channels: [],\n      settings: {\n        defaultChannelSelection: ChannelSelection.All,\n        videosPerChannel: 9,\n        videosAnteriority: 30, // days\n        sortVideosBy: 'date',\n        autoVideosCheckRate: 30, // minutes\n        enableRecentVideosNotifications: true,\n        autoPlayVideos: false,\n        openVideosInInactiveTabs: false,\n        openChannelsOnNameClick: false,\n        hideEmptyChannels: false,\n        autoClearRecentVideos: true,\n        autoClearCache: false\n      },\n      cache: {},\n      isReady: false\n    };\n    this.updateState();\n    if (isWebExtension()) {\n      setBadgeText(''); // reset webextension badge\n    }\n  }\n\n  async updateState() {\n    // get data from storage\n    const [channels, settings, cache] = await getFromStorage('channels', 'settings', 'cache'); // to know: const object properties can be modified, only reference cannot be changed\n    debug('Storage data:', {channels: channels, settings: settings, cache: cache});\n    // clear recent videos\n    if (settings?.autoClearRecentVideos && cache) {\n      let cacheHasChanged: boolean = false;\n      Object.keys(cache).forEach((channelId: string) => {\n        cache[channelId] = cache[channelId].map((video: Video) => {\n          if (video.isRecent) {\n            video.isRecent = false;\n            cacheHasChanged = true;\n          }\n          return video;\n        });\n      });\n      // update cache\n      if (cacheHasChanged) {\n        saveToStorage({ cache: cache });\n      }\n    }\n    // update state\n    this.setState({\n      channels: channels?.length ? channels : this.state.channels,\n      settings: settings ? {...this.state.settings, ...settings} : this.state.settings,\n      cache: !settings?.autoClearCache && cache ? cache : this.state.cache,\n      isReady: true\n    });\n  }\n\n  render() {\n    return (\n      <Popup channels={this.state.channels} settings={this.state.settings} cache={this.state.cache} isReady={this.state.isReady} />\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}