(this["webpackJsonpyoutube-viewer"]=this["webpackJsonpyoutube-viewer"]||[]).push([[0],{124:function(e,t){},125:function(e,t){},126:function(e,t,n){"use strict";var i,r,a;n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.All="all",e.Recent="recent",e.WatchLater="watch-later"}(i||(i={})),function(e){e[e.OneDay=1]="OneDay",e[e.ThreeDays=3]="ThreeDays",e[e.SevenDays=7]="SevenDays"}(r||(r={})),function(e){e[e.String=0]="String",e[e.Secret=1]="Secret",e[e.Number=2]="Number",e[e.Boolean=3]="Boolean",e[e.List=4]="List"}(a||(a={}))},127:function(e,t){},128:function(e,t){},129:function(e,t){},20:function(e,t,n){"use strict";var i=n(124);n.o(i,"HomeView")&&n.d(t,"HomeView",(function(){return i.HomeView})),n.o(i,"SettingType")&&n.d(t,"SettingType",(function(){return i.SettingType})),n.o(i,"VideosSeniority")&&n.d(t,"VideosSeniority",(function(){return i.VideosSeniority}));var r=n(125);n.o(r,"HomeView")&&n.d(t,"HomeView",(function(){return r.HomeView})),n.o(r,"SettingType")&&n.d(t,"SettingType",(function(){return r.SettingType})),n.o(r,"VideosSeniority")&&n.d(t,"VideosSeniority",(function(){return r.VideosSeniority}));var a=n(126);n.d(t,"HomeView",(function(){return a.a})),n.d(t,"SettingType",(function(){return a.b})),n.d(t,"VideosSeniority",(function(){return a.c}));n(127),n(128),n(129)},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(49),o=n.n(a),c=n(81),s=n(29),l=n(8),d=n(299),u=n(288),b=n(3),j=n(1);function h(e){var t=e.children,n=e.sx;return Object(j.jsxs)(d.a,{sx:{display:"flex",flexDirection:"row",height:"100vh"},children:[Object(j.jsx)(Ht,{}),Object(j.jsx)(d.a,{sx:Object(b.a)({flexGrow:1,display:"flex",flexDirection:"column"},n),children:t})]})}var f=n(301),p=n(102),x=n(302),v=n(139),O=n.n(v),m=n(140),g=n.n(m),y=n(141),w=n.n(y),C=n(142),S=n.n(C),k=n(143),V=n.n(k),R=n(272),D=n(136),A=n.n(D),T=n(6),I=n(300),L=function(e){return{backgroundColor:e.palette.primary.main,color:"#fff","& .MuiListItemIcon-root":{color:"#fff"}}},E=Object(T.a)(I.a)((function(e){var t=e.theme;return{borderRadius:"5px 0 0 5px",marginBottom:t.spacing(1),"&.Mui-selected":L(t),"&.Mui-selected:hover":L(t)}})),M=n(271),P=Object(T.a)(M.a)((function(e){e.theme;return{"& .MuiTypography-root":{display:"flex",alignItems:"center"}}})),W=n(292),z=Object(T.a)(W.a)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{position:"relative",transform:"none",backgroundColor:t.palette.primary.dark,color:t.palette.common.white,minWidth:24,height:24,fontSize:"0.75rem",marginLeft:t.spacing(3),borderRadius:t.spacing(1.5)}}}));function B(e){var t=e.icon,n=e.text,i=e.badge,a=e.hasWarning,o=e.to,l=Object(s.h)().pathname===o,d=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return Object(j.jsx)(c.b,Object(b.a)({to:o,ref:t},e))}))}),[o]);return Object(j.jsxs)(E,{component:d,selected:l,disableRipple:!0,children:[t?Object(j.jsx)(R.a,{children:t}):null,Object(j.jsx)(P,{primary:Object(j.jsxs)(j.Fragment,{children:[n,i&&l?Object(j.jsx)(z,{badgeContent:i}):null,a&&!l?Object(j.jsx)(A.a,{sx:{ml:3},color:"warning"}):null]})})]})}var H=Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-viewer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"YouTube viewer",REACT_APP_VERSION:"1.1.0",REACT_APP_YOUTUBE_API_KEY:"AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo"}),_=H.REACT_APP_NAME,N=H.REACT_APP_VERSION;function F(e){var t=e.showVersion;return Object(j.jsxs)(d.a,{component:"span",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",cursor:"default",userSelect:"none"},children:[Object(j.jsx)(_t,{size:32}),Object(j.jsxs)(d.a,{component:"span",sx:{display:"flex",alignItems:"center",color:"text.primary"},children:[Object(j.jsx)(p.a,{variant:"subtitle1",children:_}),t?Object(j.jsxs)(p.a,{variant:"caption",sx:{marginLeft:1,bgcolor:function(e){return"light"===e.palette.mode?"#eee":"transparent"},padding:"3px 6px",border:1,borderColor:function(e){return"light"===e.palette.mode?"transparent":"divider"},borderRadius:"4px",color:"text.primary",fontSize:"0.75rem",lineHeight:1},children:["v",N]}):null]})]})}var G=n(27),U=n.n(G),K=n(42),Y=n(4),J=n(14),q=n(33),Q=n(20),X={defaultView:Q.HomeView.All,apiKey:"AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo",darkMode:!1,autoPlayVideos:!0,recentVideosSeniority:Q.VideosSeniority.OneDay,recentVideosDisplayOptions:{hideViewedVideos:!1,hideWatchLaterVideos:!1},enableNotifications:!0},Z=Object(b.a)({},X),$=Object(J.d)({name:"settings",initialState:Z,reducers:{setSettings:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},resetSettings:function(e){return Object(b.a)(Object(b.a)({},e),X)},setRecentVideosDisplayOptions:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{recentVideosDisplayOptions:Object(b.a)(Object(b.a)({},e.recentVideosDisplayOptions),t.payload)})}}}),ee=$.actions,te=ee.setSettings,ne=(ee.resetSettings,ee.setRecentVideosDisplayOptions),ie=$.reducer,re=n(67),ae=Object(J.d)({name:"channels",initialState:{list:[]},reducers:{setChannels:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},addChannel:function(e,t){var n=t.payload.id;e.list.find((function(e){return e.id===n}))||e.list.push(t.payload)},removeChannel:function(e,t){var n=t.payload.id;e.list=e.list.filter((function(e){return e.id!==n}))},moveChannel:function(e,t){var n=t.payload,i=n.from,r=n.to;e.list=Object(re.b)(e.list,i,r)},toggleChannel:function(e,t){var n=t.payload.id,i=e.list.find((function(e){return e.id===n}));i&&(i.isHidden=!i.isHidden)},toggleChannelNotifications:function(e,t){var n=t.payload.id,i=e.list.find((function(e){return e.id===n}));i&&(i.notifications=Object(b.a)(Object(b.a)({},i.notifications),{},{isDisabled:!i.notifications||!i.notifications.isDisabled}))}}}),oe=ae.actions,ce=oe.setChannels,se=oe.addChannel,le=oe.removeChannel,de=oe.moveChannel,ue=oe.toggleChannel,be=oe.toggleChannelNotifications,je=ae.reducer,he=n(68);function fe(e){var t=e.replace("PT","").toUpperCase(),n=a("H"),i=a("M"),r=a("S");return"00"!==n?[n,i,r].join(":"):[i,r].join(":");function a(e){for(var n=0;n<t.length;n++)if(t[n]===e){var i=t.slice(0,n);return 1===i.length&&"H"!==e&&(i="0"+i),t=t.slice(n+1),i}return"00"}}function pe(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=["k","M","G","T","P","E","Z","Y"],r=i.length-1;r>=0;r--)if(e<=-(t=Math.pow(1e3,r+1))||e>=t)return+(e/t).toFixed(n)+i[r];return e}var xe=function(){var e={locales:{prefix:"",sufix:"ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},inWords:function(t){var n=Math.floor((new Date-parseInt(t))/1e3),i=e.locales.separator||" ",r=e.locales.prefix+i,a=0,o={year:n/31536e3,month:n/2592e3,day:n/86400,hour:n/3600,minute:n/60},c=e.locales.seconds;for(var s in o){if((a=Math.floor(o[s]))>1){c=e.locales[s+"s"];break}if(1===a){c=e.locales[s];break}}return(r+=(c=c.replace(/%d/i,a))+i+e.locales.sufix).trim()}};return e}();function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;return t.setDate(t.getDate()-e),t.setHours(0,0,0,0),t}function Oe(e){return function(e,t){var n=e instanceof Date?e.getTime():e,i=((t instanceof Date?t.getTime():t)-n)/864e5;return Math.floor(i)}(e,new Date)}function me(e,t,n){var i=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var c=this;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(c,a)}),t),n&&!i&&e.apply(c,a)}}function ge(e){e.stopPropagation(),e.preventDefault()}function ye(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"".concat(e," ").concat(t).concat(n&&e>1?"s":"")}var we=n(25);var Ce=function(){try{return!!browser}catch(e){return!1}}();function Se(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return browser.tabs.create({url:e,active:t})}var ke,Ve=Ce?(ke="index.html",browser.runtime.getURL(ke)):"";function Re(e){browser.browserAction.setBadgeText({text:0===e?"":e.toString()})}function De(e,t){-1!==navigator.userAgent.indexOf("Firefox")&&browser.browserAction.setBadgeTextColor({color:t}),browser.browserAction.setBadgeBackgroundColor({color:e})}var Ae=n(43),Te=n(138),Ie=Object(Ae.d)({baseUrl:"https://www.googleapis.com/youtube/v3/",prepareHeaders:function(e,t){var n=(0,t.getState)().settings.apiKey;return n&&e.set("X-Goog-Api-Key",n),e}}),Le=Object(Te.a)({reducerPath:"youtubeApi",baseQuery:Ie,endpoints:function(){return{}}}),Ee={findChannelByName:{query:function(e){var t=e.name,n=e.maxResults;return{url:"search",params:{part:"snippet",fields:"pageInfo,items(snippet)",type:"channel",order:"relevance",maxResults:void 0===n?10:n,q:t}}},transformResponse:function(e){return{items:e.items.map((function(e){return{title:e.snippet.title,url:"https://www.youtube.com/channel/".concat(e.snippet.channelId,"/videos"),description:e.snippet.description,thumbnail:e.snippet.thumbnails.medium.url,id:e.snippet.channelId}})),total:e.pageInfo.totalResults}}},getChannelActivities:{query:function(e){var t=e.channel,n=e.publishedAfter,i=e.publishedBefore,r=e.maxResults,a=void 0===r?10:r;return{url:"activities",params:Object(b.a)(Object(b.a)(Object(b.a)({part:"contentDetails",fields:"pageInfo,items(contentDetails)",channelId:t.id},n?{publishedAfter:n}:{}),i?{publishedBefore:i}:{}),{},{maxResults:a})}},transformResponse:function(e){return{items:e.items.filter((function(e){var t;return null===(t=e.contentDetails.upload)||void 0===t?void 0:t.videoId})).map((function(e){return{videoId:e.contentDetails.upload.videoId}})),total:e.pageInfo.totalResults}}},getVideosById:{query:function(e){var t=e.ids,n=e.maxResults,i=void 0===n?10:n;return{url:"videos",params:{part:"snippet,contentDetails,statistics,id",fields:"pageInfo,items(id,contentDetails/duration,statistics/viewCount,snippet(title,channelTitle,channelId,publishedAt,thumbnails/medium))",id:t.slice(0,i).join(",")}}},transformResponse:function(e){return{items:e.items.map((function(e){var t=new Date(e.snippet.publishedAt).getTime();return{id:e.id,title:e.snippet.title,url:"https://www.youtube.com/watch?v=".concat(e.id),duration:fe(e.contentDetails.duration),views:pe(e.statistics.viewCount),thumbnail:e.snippet.thumbnails.medium.url,channelId:e.snippet.channelId,channelTitle:e.snippet.channelTitle,publishedAt:t,publishedSince:xe.inWords(t)}})),total:e.pageInfo.totalResults}}}},Me=Le.injectEndpoints({endpoints:function(e){return{findChannelByName:e.query(Ee.findChannelByName),getChannelActivities:e.query(Ee.getChannelActivities),getVideosById:e.query({queryFn:function(){var e=Object(K.a)(U.a.mark((function e(t,n,i,r){var a,o,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.ids,o=t.maxResults,0!==a.length){e.next=3;break}return e.abrupt("return",{data:{items:[],total:0}});case 3:return e.next=5,r(Ee.getVideosById.query({ids:a,maxResults:o}));case 5:return c=e.sent,e.abrupt("return",c.data?{data:Ee.getVideosById.transformResponse(c.data)}:{error:c.error});case 7:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}()}),getChannelVideos:e.query({queryFn:function(){var e=Object(K.a)(U.a.mark((function e(t,n,i,r){var a,o,c,s,l,d,u,j,h;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.channel,o=t.publishedAfter,c=t.maxResults,e.next=3,r(Ee.getChannelActivities.query({channel:a,publishedAfter:o,maxResults:c}));case 3:if(!(s=e.sent).error){e.next=6;break}return e.abrupt("return",{error:s.error});case 6:if(l=Ee.getChannelActivities.transformResponse(s.data),d=l.items,u=l.total,0!==(j=d.map((function(e){return e.videoId}))).length){e.next=10;break}return e.abrupt("return",{data:{items:[],total:0}});case 10:return e.next=12,r(Ee.getVideosById.query({ids:j,maxResults:c}));case 12:return h=e.sent,e.abrupt("return",h.data?{data:Object(b.a)(Object(b.a)({},Ee.getVideosById.transformResponse(h.data)),{},{total:u})}:{error:h.error});case 14:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),onQueryStarted:function(){var e=Object(K.a)(U.a.mark((function e(t,n){var i,r,a,o,c,s,l;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.dispatch,r=n.queryFulfilled,a=t.persistVideos,o=t.persistVideosFlags,c=void 0===o?{}:o,e.prev=2,!a){e.next=9;break}return e.next=6,r;case 6:s=e.sent,l=s.data,i(vt({videos:l.items,flags:c}));case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()})}},overrideExisting:!1}),Pe=Me.useFindChannelByNameQuery,We=(Me.useGetChannelActivitiesQuery,Me.useGetVideosByIdQuery),ze=Me.useGetChannelVideosQuery,Be=n(47),He=function(e){return e.channels.list},_e=Object(Be.a)(He,(function(e){return e.filter((function(e){return!e.isHidden}))})),Ne=Object(Be.a)(He,(function(e){return e.filter((function(e){return e.isHidden}))})),Fe=Object(Be.a)(He,(function(e){return e.filter((function(e){var t=e.isHidden,n=e.notifications;return!t&&!(null===n||void 0===n?void 0:n.isDisabled)}))})),Ge=Object(Be.a)(_e,(function(e){return e.length})),Ue=Object(Be.a)(He,_e,(function(e,t){return e.length===t.length?e.length:"".concat(t.length,"/").concat(e.length)})),Ke=function(e){return e.videos.list},Ye=function(e){return Object(Be.a)(Ke,(function(t){return t.filter((function(t){var n=t.channelId;return e.id===n}))}))},Je=function(e){return Object(Be.a)(Ke,(function(t){return t.filter((function(t){var n=t.flags,i=t.channelId;return n.toWatchLater&&(!e||e.id===i)})).sort((function(e,t){return t.publishedAt-e.publishedAt}))}))},qe=Object(Be.a)(Ke,Ne,(function(e,t){var n=t.map((function(e){return e.id}));return e.filter((function(e){var t=e.flags,i=e.channelId;return t.toWatchLater&&!n.includes(i)})).length})),Qe=Object(Be.a)(Ke,Ne,(function(e,t){var n=t.map((function(e){return e.id}));return e.filter((function(e){var t=e.flags,i=e.channelId;return t.toWatchLater&&t.viewed&&!n.includes(i)})).length})),Xe=function(e){return Object(Be.a)(Ke,(function(t){var n=(t.find((function(t){return t.id===e.id}))||{}).flags;return{isViewed:(null===n||void 0===n?void 0:n.viewed)||!1,isToWatchLater:(null===n||void 0===n?void 0:n.toWatchLater)||!1}}))};var Ze=n(17),$e=n(32),et=n(274);function tt(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xs",t=Object($e.a)();return Object(Ze.a)(t.breakpoints.keys).reverse().reduce((function(e,n){var i=Object(et.a)(t.breakpoints.up(n));return!e&&i?n:e}),null)||e}(null);return{itemsPerRow:t?e[t]:void 0}}var nt=Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-viewer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"YouTube viewer",REACT_APP_VERSION:"1.1.0",REACT_APP_YOUTUBE_API_KEY:"AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo"}).REACT_APP_DEBUG;function it(){var e=new Date;return"[".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),"]")}function rt(e){if(nt){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,[it(),e].concat(i))}}var at=30,ot=1;function ct(e){var t=e.channel,n=e.onCheckEnd,r=Object(i.useState)(!1),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Mt(Ye(t)),d=ve(ot).toISOString(),u=6e4*at,b=ze({channel:t,publishedAfter:d},{skip:!o}),j=b.data,h=b.isFetching,f=b.refetch;return function(e,t){var n=Object(i.useRef)(e);Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){o?f():c(!0)}),u),Object(i.useEffect)((function(){if(!h&&j){var e=[],i=(null===j||void 0===j?void 0:j.items)||[],r=(null===j||void 0===j?void 0:j.total)||0;if(rt("Fetch ended:",r,j),r>0){var a=s.filter((function(e){var t=e.flags;return t.viewed||t.toWatchLater||t.notified||t.recent})).map((function(e){return e.id}));(e=i.filter((function(e){return!a.includes(e.id)}))).length>0&&rt("New videos for channel ".concat(t.title,":"),e)}n({channel:t,newVideos:e})}}),[h]),null}function st(e,t,n){var i=e.list.find((function(e){return e.id===t.id}));i?i.flags=Object(b.a)(Object(b.a)({},i.flags),n):e.list.push({id:t.id,channelId:t.channelId,publishedAt:t.publishedAt,flags:n})}function lt(e,t,n){var i=e.list.find((function(e){return e.id===t.id}));i&&(i.flags[n]=!1)}var dt=Object(J.d)({name:"videos",initialState:{list:[]},reducers:{setVideos:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},addViewedVideo:function(e,t){st(e,t.payload,{viewed:!0})},removeViewedVideo:function(e,t){lt(e,t.payload,"viewed")},addWatchLaterVideo:function(e,t){st(e,t.payload,{toWatchLater:!0})},removeWatchLaterVideo:function(e,t){lt(e,t.payload,"toWatchLater"),Ce||dt.caseReducers.removeOutdatedVideos(e)},clearWatchLaterList:function(e,t){var n=(t.payload||{}).viewedOnly;e.list=e.list.map((function(e){return e.flags.toWatchLater?Object(b.a)(Object(b.a)({},e),{},{flags:Object(b.a)(Object(b.a)({},e.flags),{},{toWatchLater:!!n&&!e.flags.viewed})}):e}))},saveVideos:function(e,t){var n,i=t.payload,r=i.videos,a=i.flags,o=Object(he.a)(r);try{for(o.s();!(n=o.n()).done;){st(e,n.value,a)}}catch(c){o.e(c)}finally{o.f()}},removeOutdatedVideos:function(e){e.list=e.list.filter((function(e){var t=e.flags,n=e.publishedAt;return t.viewed||t.toWatchLater||(t.notified||t.recent)&&Oe(n)<=ot}))}}}),ut=dt.actions,bt=ut.setVideos,jt=ut.addViewedVideo,ht=ut.removeViewedVideo,ft=ut.addWatchLaterVideo,pt=ut.removeWatchLaterVideo,xt=ut.clearWatchLaterList,vt=ut.saveVideos,Ot=ut.removeOutdatedVideos,mt=dt.reducer,gt=Object(J.d)({name:"app",initialState:{loaded:!1},reducers:{setApp:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)}}}),yt=gt.actions.setApp,wt=gt.reducer;function Ct(){return(Ct=Object(K.a)(U.a.mark((function e(){var t,n,i,r,a,o,c,s,l,d=arguments;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=d.length,n=new Array(t),i=0;i<t;i++)n[i]=d[i];return e.prev=1,e.next=4,browser.storage.local.get(n);case 4:return r=e.sent,e.abrupt("return",n.length>1?r:r[n[0]]);case 8:e.prev=8,e.t0=e.catch(1),a={},o=Object(he.a)(n);try{for(o.s();!(c=o.n()).done;)s=c.value,l=localStorage.getItem(s),a[s]=St(l)}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",n.length>1?a:a[n[0]]);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function St(e){if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function kt(e){try{return JSON.stringify(e)}catch(t){return e}}var Vt={get:function(){return Ct.apply(this,arguments)},save:function(e){try{browser.storage.local.set(e)}catch(a){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],r=kt(e[i]);localStorage.setItem(i,r)}}}},Rt="APP_YOUTUBE_VIEWER",Dt=!0,At="",Tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Dt=t,Pt.dispatch(e)},It=function(){var e=Object(K.a)(U.a.mark((function e(){var t,n,i,r,a,o,c,s;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt.get(Rt);case 2:if(t=e.sent,n=!t,t){e.next=15;break}return e.next=7,Vt.get("settings","channels");case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:(i=e.t0).settings&&(r=i.settings.apiKey)&&Tt(te({apiKey:r})),i.channels&&Tt(ce({list:i.channels})),e.next=19;break;case 15:o=(a=t||{}).settings,c=a.channels,s=a.videos,o&&Tt(te(o)),c&&Tt(ce(c)),s&&(s.list.filter((function(e){return!!Object.keys(e).find((function(e){return["isViewed","isToWatchLater","isNotified"].includes(e)}))})).length>0?(n=!0,Tt(bt({list:s.list.map((function(e){var t=e.isViewed,n=e.isToWatchLater,i=e.isNotified,r=Object(we.a)(e,["isViewed","isToWatchLater","isNotified"]);return Object(b.a)(Object(b.a)({},r),{},{flags:{viewed:t||!1,toWatchLater:n||!1,notified:i||!1}})}))}))):Tt(bt(s)));case 19:Tt(yt({loaded:!0}),n);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Lt=Object(J.a)({reducer:Object(Y.a)({settings:ie,channels:je,videos:mt,app:wt},Le.reducerPath,Le.reducer),middleware:function(e){return e().concat(Le.middleware)}});Lt.subscribe(me((function(){!function(e,t){if(rt("Persist state:",{canPersistState:Dt,state:e}),Dt){var n=e.settings,i=e.channels,r=e.videos;if(t){var a=JSON.stringify({settings:n,channels:i,videos:r});if(At===a)return void rt("State did not change!");At=a}Vt.save(Object(Y.a)({},Rt,{settings:n,channels:i,videos:r}))}else Dt=!0}(Lt.getState())}),1e3)),Object(K.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))();var Et=function(){return Object(q.d)()},Mt=q.e,Pt=Lt,Wt=function(e){return e.settings},zt=Object(Be.a)(Wt,(function(e){return e.darkMode?"dark":"light"})),Bt=function(e){return e.app};function Ht(e){var t=Mt(Bt),n=Mt(Ue),i=Mt(Wt);return Object(j.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",minWidth:280,maxWidth:280,bgcolor:"custom.lightGrey",borderRight:1,borderColor:"divider"},children:[Object(j.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",py:2.5,pl:3},children:[Object(j.jsx)(d.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:6},children:Object(j.jsx)(F,{showVersion:!0})}),Object(j.jsx)(d.a,{sx:{flexGrow:1,paddingLeft:1,width:"100%"},children:Object(j.jsxs)(f.a,{component:"nav","aria-label":"main",children:[Object(j.jsx)(B,{icon:Object(j.jsx)(O.a,{}),text:"Home",to:"/"}),Object(j.jsx)(B,{icon:Object(j.jsx)(g.a,{}),text:"Channels",to:"/channels",badge:n}),Object(j.jsx)(B,{icon:Object(j.jsx)(w.a,{}),text:"Settings",to:"/settings",hasWarning:t.loaded&&!i.apiKey}),Object(j.jsx)(B,{icon:Object(j.jsx)(S.a,{}),text:"About",to:"/about"})]})})]}),Object(j.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",py:2,px:3,borderTop:1,borderColor:"divider"},children:[Object(j.jsx)(p.a,{sx:{fontSize:"0.8rem",mb:1},variant:"caption",color:"text.secondary",children:"Facing issues or have some feedback?"}),Object(j.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",gap:.5,fontSize:"0.8rem",textDecoration:"none","&:hover":{textDecoration:"underline"}},href:"https://github.com/AXeL-dev/youtube-viewer/issues",target:"_blank",color:"secondary",rel:"noopener",children:[Object(j.jsx)(V.a,{sx:{fontSize:18}}),"Report a bug | Feedback"]})]})]})}function _t(e){var t=e.size,n=void 0===t?32:t,i=e.sx,r=void 0===i?{}:i;return Object(j.jsx)(d.a,{sx:Object(b.a)({display:"flex","> img":{width:n,height:n,filter:"contrast(150%) brightness(100%)"}},r),children:Object(j.jsx)("img",{alt:"logo",src:"icons/128.png"})})}var Nt=n(290),Ft=n(303),Gt=n(305),Ut=n(63),Kt=n.n(Ut);function Yt(e){var t,n=e.open,r=void 0===n||n,a=e.error,o=e.severity,c=void 0===o?"error":o,s=e.closable,d=e.syncOpen,u=e.onClose,b=e.children||(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error.message)||(null===a||void 0===a?void 0:a.error),h=Object(i.useState)(r),f=Object(l.a)(h,2),p=f[0],x=f[1];Object(i.useEffect)((function(){d&&r!==p&&x(r)}),[r,d]);return Object(j.jsx)(Ft.a,{in:p,children:Object(j.jsx)(Nt.a,{sx:{borderRadius:"unset"},severity:c,action:s?Object(j.jsx)(Gt.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){x(!1),u&&u()},children:Object(j.jsx)(Kt.a,{fontSize:"inherit"})}):null,children:b})})}var Jt=n(144),qt=n.n(Jt),Qt=n(39),Xt=Object(T.a)(Qt.c)((function(e){var t=e.theme;return{flexGrow:1,color:t.palette.text.primary,backgroundColor:t.palette.custom.lightGrey,border:"1px solid ".concat(t.palette.custom.lightBorder),borderRadius:20,"& .MuiInputBase-input":{padding:t.spacing(1,5,1,6),width:"100%"}}}));function Zt(e){var t=e.placeholder,n=void 0===t?"Search\u2026":t,i=e.width,a=e.clearable,o=e.debounceTime,c=void 0===o?300:o,s=e.onChange,u=e.onClear,b=r.a.useState(""),h=Object(l.a)(b,2),f=h[0],p=h[1],x=r.a.useMemo((function(){return me((function(e){s(e)}),c)}),[]);return r.a.useEffect((function(){""!==f&&x(f)}),[f,x]),Object(j.jsxs)(d.a,{sx:{position:"relative",display:"flex",flexGrow:1,maxWidth:i},children:[Object(j.jsx)(d.a,{sx:{width:48,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"action.active",zIndex:1},children:Object(j.jsx)(qt.a,{})}),Object(j.jsx)(Xt,{placeholder:n,inputProps:{value:f,"aria-label":"search"},onChange:function(e){p(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&s(f)}}),a&&(null===f||void 0===f?void 0:f.length)>0?Object(j.jsx)(Gt.a,{sx:{position:"absolute",right:0,top:0,my:.75,mx:1,color:"action.active"},"aria-label":"clear",size:"small",onClick:function(){p(""),u&&u()},children:Object(j.jsx)(Kt.a,{fontSize:"inherit"})}):null]})}var $t=n(275),en=n(145),tn=Object(T.a)($t.a)((function(e){var t,n=e.theme;return t={height:3},Object(Y.a)(t,"&.".concat(en.a.colorPrimary),{backgroundColor:n.palette.grey["light"===n.palette.mode?200:800]}),Object(Y.a)(t,"& .".concat(en.a.bar),{borderRadius:5,backgroundColor:"light"===n.palette.mode?"#1a90ff":"#308fe8"}),t}));function nn(e){var t=e.variant,n=void 0===t?"determinate":t,i=e.value,r=void 0===i?0:i;return Object(j.jsx)(d.a,{sx:{flexGrow:1},children:Object(j.jsx)(tn,{variant:n,value:r})})}n(276),n(146);var rn=n(120),an=n(172),on=Object(T.a)((function(e){return Object(j.jsx)(an.a,Object(b.a)({anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},MenuListProps:{dense:!0}},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,marginRight:t.spacing(1.5),"&:not(.inherit-color)":{color:t.palette.text.secondary}},"&:active":{backgroundColor:Object(rn.a)(t.palette.action.selected,t.palette.action.selectedOpacity)}}}}})),cn=n(306),sn=Object(T.a)(W.a)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{position:"relative",transform:"none",backgroundColor:t.palette.primary.main,color:t.palette.common.white,minWidth:20,height:20,fontSize:"0.75rem",marginLeft:t.spacing(1.5),borderRadius:t.spacing(1.5)}}}));function ln(e){var t=e.label,n=e.badge,i=e.selected,r=Object(we.a)(e,["label","badge","selected"]);return Object(j.jsx)(cn.a,Object(b.a)({sx:{fontSize:"0.975rem",fontWeight:400,minWidth:140,textTransform:"capitalize"},label:Object(j.jsxs)(d.a,{sx:{display:"flex",alignItems:"center"},children:[t,n&&i?Object(j.jsx)(sn,{badgeContent:n}):null]}),disableRipple:!0},r))}var dn=n(147),un=n(307),bn=n(308);function jn(e){var t=e.onClick;return Object(j.jsx)(Gt.a,{sx:{position:"absolute",top:function(e){return e.spacing(-1.75)},right:function(e){return e.spacing(-1.75)},bgcolor:"primary.main",color:"common.white",fontSize:"1.275rem","&:hover":{bgcolor:"primary.main",color:"common.white"}},size:"small",onClick:t,children:Object(j.jsx)(Kt.a,{fontSize:"inherit"})})}function hn(e){var t=e.open,n=e.video,i=e.onClose,r={height:"100%",width:"100%",playerVars:{autoplay:Mt(Wt).autoPlayVideos?1:0}},a=function(e,t){if("backdropClick"===t)return ge(e);i()};return Object(j.jsxs)(un.a,{sx:{"& .MuiPaper-root":{overflow:"visible",width:"80%",maxWidth:1200,height:"80%"}},open:t,onClose:a,children:[Object(j.jsx)(jn,{onClick:a}),Object(j.jsx)(bn.a,{sx:{display:"flex",p:2.5,"> div":{flexGrow:1}},children:n?Object(j.jsx)(dn.a,{videoId:n.id,opts:r}):null})]})}function fn(e,t){var n,i;return e.open===t.open&&(null===(n=e.video)||void 0===n?void 0:n.id)===(null===(i=t.video)||void 0===i?void 0:i.id)}var pn=r.a.memo(hn,fn),xn=n(296);var vn=function(e){var t=e.channel,n=e.children;return Object(j.jsx)(x.a,{sx:{outline:"none",textDecoration:"none"},href:t.url,target:"_blank",rel:"noopener",children:n})};function On(e){var t=e.channel;return Object(j.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",pb:2},children:[Object(j.jsx)(vn,{channel:t,children:Object(j.jsx)(xn.a,{alt:t.title,src:t.thumbnail})}),Object(j.jsx)(vn,{channel:t,children:Object(j.jsx)(p.a,{sx:{ml:1.5},variant:"subtitle1",color:"text.primary",children:t.title})})]})}function mn(e,t){return e.channel.id===t.channel.id}var gn=r.a.memo(On,mn),yn=n(298),wn=n(286),Cn=n(151),Sn=n.n(Cn),kn=n(152),Vn=n.n(kn),Rn=n(150),Dn=n.n(Rn);var An=function(e){var t=e.video,n=e.view,i=Mt(Xe(t)).isToWatchLater,r=Et();return i?n===Q.HomeView.WatchLater?Object(j.jsx)(wn.a,{title:"Remove","aria-label":"remove-from-watch-later",children:Object(j.jsx)(Gt.a,{sx:{color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"4px",borderRadius:"2px","&:hover":{color:"#fff"}},size:"small",onClick:function(){r(pt(t))},children:Object(j.jsx)(Kt.a,{sx:{fontSize:"1.125rem"}})})}):null:Object(j.jsx)(wn.a,{title:"Watch later","aria-label":"watch-later",children:Object(j.jsx)(Gt.a,{sx:{color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"4px",borderRadius:"2px","&:hover":{color:"#fff"}},size:"small",onClick:function(){r(ft(t))},children:Object(j.jsx)(Dn.a,{sx:{fontSize:"1.25rem"}})})})},Tn=n(97),In=n.n(Tn),Ln=n(72),En=n.n(Ln);var Mn=function(e){var t=e.video,n=Mt(Xe(t)).isViewed,i=Et();return n?Object(j.jsx)(wn.a,{title:"Mark as unviewed","aria-label":"mark-as-unviewed",children:Object(j.jsx)(Gt.a,{sx:{color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"4px",borderRadius:"2px","&:hover":{color:"#fff"}},size:"small",onClick:function(){i(ht(t))},children:Object(j.jsx)(En.a,{sx:{fontSize:"1.125rem"}})})}):Object(j.jsx)(wn.a,{title:"Mark as viewed","aria-label":"mark-as-viewed",children:Object(j.jsx)(Gt.a,{sx:{color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"4px",borderRadius:"2px","&:hover":{color:"#fff"}},size:"small",onClick:function(){i(jt(t))},children:Object(j.jsx)(In.a,{sx:{fontSize:"1.125rem"}})})})};function Pn(e){var t=e.video,n=e.view;return Object(j.jsxs)(d.a,{sx:{display:"flex",position:"absolute",top:0,right:0,margin:"4px",gap:"4px"},children:[Object(j.jsx)(Mn,{video:t}),Object(j.jsx)(An,{video:t,view:n})]})}function Wn(e,t){return e.view===t.view&&e.video.id===t.video.id}var zn=r.a.memo(Pn,Wn);function Bn(e){var t=e.video;return Mt(Xe(t)).isViewed?Object(j.jsx)(wn.a,{title:"Viewed","aria-label":"viewed",children:Object(j.jsx)(d.a,{sx:{display:"flex",position:"absolute",bottom:0,left:0,margin:"4px",color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"3px 5px",borderRadius:"2px","&:hover":{color:"#fff"}},children:Object(j.jsx)(In.a,{sx:{fontSize:"1rem"}})})}):null}function Hn(e,t){return e.video.id===t.video.id}var _n=r.a.memo(Bn,Hn);function Nn(e){var t=e.video,n=e.view,i=e.thumbnailWidth,r=void 0===i?"100%":i,a=e.thumbnailHeight,o=void 0===a?120:a,c=e.onVideoPlay,s=Et();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(d.a,{sx:{position:"relative","&:hover .overlay":{opacity:1},"&:hover .options":{opacity:1}},children:[Object(j.jsx)(d.a,{sx:{display:"flex",width:r,height:o,backgroundImage:'url("'.concat(t.thumbnail,'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),Object(j.jsx)(d.a,{sx:{backgroundColor:"rgba(0, 0, 0, 0.7)",position:"absolute",height:"100%",width:"100%",left:0,top:0,bottom:0,right:0,opacity:0,transition:"opacity 0.4s ease-in-out 0s"},className:"overlay"}),Object(j.jsxs)(d.a,{sx:{position:"absolute",top:0,left:0,opacity:0,width:"100%",height:"100%",transition:"opacity 0.3s ease-in-out 0s"},className:"options",children:[Object(j.jsxs)(d.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",textAlign:"center",paddingLeft:"1rem",paddingRight:"1rem"},children:[Object(j.jsx)(x.a,{sx:{textDecoration:"none",outline:"none"},href:t.url,target:"_blank",rel:"noopener",onClick:function(e){Ce&&(e.preventDefault(),Se(t.url,!1)),s(jt(t))},children:Object(j.jsx)(Gt.a,{sx:{color:"#fff",margin:.5},size:"small",children:Object(j.jsx)(wn.a,{title:"Open in Youtube","aria-label":"watch-later",children:Object(j.jsx)(Sn.a,{sx:{fontSize:"1.5rem"}})})})}),Object(j.jsx)(Gt.a,{sx:{color:"#fff",margin:.5},size:"small",onClick:function(){c(t),s(jt(t))},children:Object(j.jsx)(wn.a,{title:"Watch","aria-label":"watch",children:Object(j.jsx)(Vn.a,{sx:{fontSize:"2.1rem"}})})})]}),Object(j.jsx)(zn,{video:t,view:n})]}),Object(j.jsx)(_n,{video:t}),Object(j.jsx)(p.a,{sx:{position:"absolute",bottom:0,right:0,margin:"4px",color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"2px 4px",borderRadius:"2px"},variant:"caption",children:t.duration})]}),Object(j.jsxs)(d.a,{pr:2,mt:1,children:[Object(j.jsx)(wn.a,{title:t.title,enterDelay:700,enterNextDelay:700,"aria-label":"video-title",children:Object(j.jsx)(p.a,{sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},gutterBottom:!0,variant:"body2",children:t.title})}),Object(j.jsx)(p.a,{display:"block",variant:"caption",color:"textSecondary",children:t.channelTitle}),Object(j.jsx)(p.a,{variant:"caption",color:"textSecondary",children:"".concat(t.views," \u2022 ").concat(t.publishedSince)})]})]})}function Fn(e,t){return e.view===t.view&&e.thumbnailHeight===t.thumbnailHeight&&e.thumbnailWidth===t.thumbnailWidth&&e.video.id===t.video.id}var Gn=r.a.memo(Nn,Fn),Un=n(297);function Kn(e){var t=e.width,n=void 0===t?"100%":t,i=e.height,r=void 0===i?120:i;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Un.a,{variant:"rectangular",width:n,height:r}),Object(j.jsxs)(d.a,{pt:.5,children:[Object(j.jsx)(Un.a,{}),Object(j.jsx)(Un.a,{width:"60%"})]})]})}function Yn(e){var t=e.children,n=Object(we.a)(e,["children"]);return Object(j.jsx)(yn.a,Object(b.a)(Object(b.a)(Object(b.a)({item:!0},{xxs:1,xs:1,sm:1,md:1,lg:1,xl:1}),n),{},{children:t}))}var Jn={gridSpacing:{xxs:1,sm:2},gridColumns:{xxs:1,xs:2,sm:3,md:4,lg:5,xl:6}},qn=n(153),Qn=n.n(qn);function Xn(e){var t=e.isLoading,n=e.hasMore,i=e.onClick;return Object(j.jsx)(d.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",minWidth:function(e){return e.spacing(3.5)},ml:2,gap:2},children:n?Object(j.jsx)(Gt.a,{sx:{height:216,borderRadius:0},disabled:t,size:"small",onClick:i,children:Object(j.jsx)(Qn.a,{fontSize:"inherit"})}):null})}var Zn=function(e){var t=e.videos,n=e.view,i=e.isLoading,r=e.itemsPerRow,a=e.maxResults,o=e.hasMore,c=e.onVideoPlay,s=e.onLoadMore,l=Math.min(a-t.length,r);return Object(j.jsxs)(d.a,{sx:{display:"flex",pl:6},children:[Object(j.jsxs)(yn.a,{container:!0,spacing:Jn.gridSpacing,columns:Jn.gridColumns,children:[t.map((function(e,t){return Object(j.jsx)(Yn,{children:Object(j.jsx)(Gn,{video:e,view:n,onVideoPlay:c})},t)})),i&&l>0?Array.from(new Array(l)).map((function(e,t){return Object(j.jsx)(Yn,{children:Object(j.jsx)(Kn,{})},t)})):null]}),Object(j.jsx)(Xn,{isLoading:i,hasMore:o,onClick:s})]})};function $n(e){var t=e.channel,n=e.videos,i=e.total,r=e.isLoading,a=e.maxResults,o=Object(we.a)(e,["channel","videos","total","isLoading","maxResults"]),c=r||n.length>0,s=i>a,l=n.length>0&&(r&&s||s);return c?Object(j.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",pb:3},children:[Object(j.jsx)(gn,{channel:t}),Object(j.jsx)(Zn,Object(b.a)({videos:n,isLoading:r,maxResults:a,hasMore:l},o))]}):null}function ei(e,t){return e.view===t.view&&e.channel.id===t.channel.id&&e.total===t.total&&e.isLoading===t.isLoading&&e.itemsPerRow===t.itemsPerRow&&e.maxResults===t.maxResults&&JSON.stringify(e.videos.map((function(e){return e.id})))===JSON.stringify(t.videos.map((function(e){return e.id})))}var ti=r.a.memo($n,ei);var ni=function(e){var t=e.channel,n=e.publishedAfter,r=e.excludedVideosIds,a=void 0===r?[]:r,o=e.persistVideos,c=void 0!==o&&o,s=e.persistVideosFlags,d=e.onError,u=e.onChange,h=Object(we.a)(e,["channel","publishedAfter","excludedVideosIds","persistVideos","persistVideosFlags","onError","onChange"]),f=Object(i.useState)(1),p=Object(l.a)(f,2),x=p[0],v=p[1],O=tt(Jn.gridColumns).itemsPerRow,m=void 0===O?0:O,g=m*x,y=ze({channel:t,publishedAfter:n,maxResults:g,persistVideos:c,persistVideosFlags:s},{skip:0===m}),w=y.data,C=y.error,S=y.isLoading,k=y.isFetching,V=(null===w||void 0===w?void 0:w.items.filter((function(e){return!a.includes(e.id)})))||[],R=(null===w||void 0===w?void 0:w.total)||0;return Object(i.useEffect)((function(){C&&d&&d(C)}),[C,d]),Object(i.useEffect)((function(){!k&&w&&u&&u({channel:t,items:V,total:R})}),[k,u,V]),Object(j.jsx)(ti,Object(b.a)({channel:t,videos:V,total:R,isLoading:S||k,itemsPerRow:m,maxResults:g,onLoadMore:function(){v(x+1)}},h))};var ii=function(e){var t=e.channel,n=Mt(Wt),r=Mt(Ye(t)),a=n.recentVideosDisplayOptions,o=a.hideViewedVideos,c=a.hideWatchLaterVideos,s=Object(i.useMemo)((function(){return[].concat(Object(Ze.a)(o?r.filter((function(e){return e.flags.viewed})).map((function(e){return e.id})):[]),Object(Ze.a)(c?r.filter((function(e){return e.flags.toWatchLater})).map((function(e){return e.id})):[]))}),[r,o,c]),l=ve(n.recentVideosSeniority).toISOString();return Object(j.jsx)(ni,Object(b.a)({publishedAfter:l,excludedVideosIds:s,persistVideos:Ce,persistVideosFlags:{recent:!0}},e))};var ri=function(e){var t=e.channel,n=e.onError,r=e.onVideoPlay,a=Object(i.useState)(1),o=Object(l.a)(a,2),c=o[0],s=o[1],d=tt(Jn.gridColumns).itemsPerRow,u=void 0===d?0:d,b=Mt(Je(t)).map((function(e){return e.id})),h=b.length,f=Math.min(h,u*c),p=We({ids:b,maxResults:Math.max(f,u)},{skip:0===u}),x=p.data,v=p.error,O=p.isLoading,m=p.isFetching,g=((null===x||void 0===x?void 0:x.items)||[]).filter((function(e){return b.includes(e.id)}));return Object(i.useEffect)((function(){v&&n&&n(v)}),[v,n]),Object(j.jsx)(ti,{view:Q.HomeView.WatchLater,channel:t,videos:g,total:h,isLoading:O||m,itemsPerRow:u,maxResults:f,onLoadMore:function(){s(c+1)},onVideoPlay:r})};function ai(e){var t=e.view,n=e.channels,r=e.onError,a=e.onChange,o=e.onVideoPlay,c=Object(i.useMemo)((function(){switch(t){case Q.HomeView.WatchLater:return ri;case Q.HomeView.Recent:return ii;default:return ni}}),[t]);return Object(j.jsx)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"auto",px:3,pt:3},children:n.map((function(e,n){return Object(j.jsx)(c,{view:t,channel:e,onError:r,onChange:a,onVideoPlay:o},n)}))})}function oi(e,t){return e.view===t.view&&JSON.stringify(e.channels.map((function(e){return e.id})))===JSON.stringify(t.channels.map((function(e){return e.id})))}var ci=r.a.memo(ai,oi),si=n(309),li=n(154),di=n.n(li);function ui(e){var t=Mt(Bt),n=Object(s.g)();return t.loaded?Object(j.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(j.jsx)(p.a,{sx:{textAlign:"center",fontSize:"1.125rem",mb:2},variant:"body1",color:"text.secondary",children:"Welcome, stranger! To get started, you should add some channels"}),Object(j.jsxs)(si.a,{sx:{textTransform:"capitalize"},variant:"contained",color:"secondary",onClick:function(){n.push("/channels")},children:[Object(j.jsx)(di.a,{sx:{fontSize:"1.25rem",mr:.5}}),"Add channels"]})]}):null}function bi(e){var t=e.tab,n=e.onCountChange,r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Object(i.useState)(null),d=Object(l.a)(s,2),u=d[0],b=d[1],h=Mt(_e),f=Object(i.useRef)([]);return o?Object(j.jsx)(Yt,{error:o,closable:!0}):Object(j.jsxs)(j.Fragment,{children:[h.length>0?Object(j.jsx)(ci,{view:t,channels:h,onError:function(e){c(e)},onChange:function(e){if(n&&(f.current.push(e),f.current.length===h.length)){var i=f.current.reduce((function(e,t){var n;return{displayed:e.displayed+((null===(n=t.items)||void 0===n?void 0:n.length)||0),total:e.total+(t.total||0)}}),{displayed:0,total:0});n(t,i),f.current=[]}},onVideoPlay:function(e){b(e)}}):Object(j.jsx)(ui,{}),Object(j.jsx)(pn,{open:!!u,video:u,onClose:function(){b(null)}})]})}var ji=r.a.memo(bi),hi=n(313),fi=n(73),pi=n.n(fi),xi=n(156),vi=n.n(xi),Oi=n(157),mi=n.n(Oi),gi=n(310),yi=n(311),wi=n(312);function Ci(e){var t=e.open,n=e.title,i=e.text,r=e.onClose,a=function(){r(!1)};return Object(j.jsxs)(un.a,{open:t,onClose:a,children:[Object(j.jsxs)(bn.a,{children:[Object(j.jsx)(gi.a,{sx:{px:0,pt:0},children:n}),Object(j.jsx)(yi.a,{children:i})]}),Object(j.jsxs)(wi.a,{sx:{px:2,pb:2},children:[Object(j.jsx)(si.a,{color:"inherit",onClick:a,autoFocus:!0,children:"Cancel"}),Object(j.jsx)(si.a,{color:"primary",variant:"contained",onClick:function(){r(!0)},children:"Confirm"})]})]})}function Si(e,t){return e.open===t.open}var ki=r.a.memo(Ci,Si);function Vi(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=document.createElement("a"),i=URL.createObjectURL(e);n.href=i,n.download=t,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),0)}}var Ri=function(e){var t=Mt(Je()),n=Mt(Qe),r=Et(),a=Object(i.useState)(null),o=Object(l.a)(a,2),c=o[0],s=o[1],d=Boolean(c),u=Object(i.useState)({open:!1,title:"",text:"",onClose:function(){}}),h=Object(l.a)(u,2),f=h[0],p=h[1],x=function(){s(null)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Gt.a,{id:"more-button","aria-label":"more","aria-controls":d?"more-menu":void 0,"aria-expanded":d?"true":void 0,"aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(j.jsx)(pi.a,{})}),Object(j.jsxs)(on,{id:"more-menu",MenuListProps:{"aria-labelledby":"more-button",dense:!0},anchorEl:c,open:d,onClose:x,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(j.jsxs)(hi.a,{onClick:function(){p({open:!0,title:"Remove all videos",text:"Are you sure that you want to remove all the videos from the watch later list?",onClose:function(e){e&&r(xt()),p((function(e){return Object(b.a)(Object(b.a)({},e),{},{open:!1})}))}}),x()},children:[Object(j.jsx)(R.a,{children:Object(j.jsx)(vi.a,{})}),Object(j.jsx)(M.a,{children:"Remove all videos"})]}),n>0?Object(j.jsxs)(hi.a,{onClick:function(){p({open:!0,title:"Remove viewed videos",text:"Are you sure that you want to remove all viewed videos from the watch later list?",onClose:function(e){e&&r(xt({viewedOnly:!0})),p((function(e){return Object(b.a)(Object(b.a)({},e),{},{open:!1})}))}}),x()},children:[Object(j.jsx)(R.a,{children:Object(j.jsx)(En.a,{})}),Object(j.jsx)(M.a,{children:"Remove viewed videos"})]}):null,Object(j.jsxs)(hi.a,{onClick:function(){var e=t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{url:"https://www.youtube.com/watch?v=".concat(e.id)})})),n=JSON.stringify(e,null,4);Vi(new Blob([n],{type:"text/json"}),"watch_later_videos.json"),x()},children:[Object(j.jsx)(R.a,{children:Object(j.jsx)(mi.a,{})}),Object(j.jsx)(M.a,{children:"Export"})]})]}),Object(j.jsx)(ki,Object(b.a)({},f))]})},Di=n(158),Ai=n.n(Di),Ti=n(84),Ii=n.n(Ti);var Li=function(e){var t=Mt(Wt),n=Et(),r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Boolean(o),d=t.recentVideosDisplayOptions,u=d.hideViewedVideos,b=d.hideWatchLaterVideos,h=Object(i.useMemo)((function(){return Object.keys(t.recentVideosDisplayOptions).reduce((function(e,n){return t.recentVideosDisplayOptions[n]||e}),!1)}),[t.recentVideosDisplayOptions]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Gt.a,{id:"more-button","aria-label":"more","aria-controls":s?"more-menu":void 0,"aria-expanded":s?"true":void 0,"aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},children:Object(j.jsx)(pi.a,{})}),Object(j.jsxs)(on,{id:"more-menu",MenuListProps:{"aria-labelledby":"more-button",dense:!0},anchorEl:o,open:s,onClose:function(){c(null)},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(j.jsxs)(hi.a,{onClick:function(){n(ne({hideViewedVideos:!u}))},children:[Object(j.jsx)(R.a,{children:u?Object(j.jsx)(Ii.a,{}):!h&&Object(j.jsx)(En.a,{})}),Object(j.jsx)(M.a,{children:"Filter viewed videos"})]}),Object(j.jsxs)(hi.a,{onClick:function(){n(ne({hideWatchLaterVideos:!b}))},children:[Object(j.jsx)(R.a,{children:b?Object(j.jsx)(Ii.a,{}):!h&&Object(j.jsx)(Ai.a,{})}),Object(j.jsx)(M.a,{children:"Filter watch later videos"})]})]})]})};function Ei(e){var t=e.tab,n=e.recentVideosCount,i=e.watchLaterVideosCount,r=Mt(Ge);switch(t){case Q.HomeView.Recent:return r>0&&n>0?Object(j.jsx)(Li,{}):null;case Q.HomeView.WatchLater:return r>0&&i>0?Object(j.jsx)(Ri,{}):null;default:return null}}var Mi=r.a.memo(Ei);function Pi(e){var t=Mt(Wt),n=Object(i.useState)(t.defaultView),r=Object(l.a)(n,2),a=r[0],o=r[1],c=Object(i.useState)({displayed:0,total:0}),s=Object(l.a)(c,2),b=s[0],f=s[1],p=Mt(qe);Object(i.useEffect)((function(){a!==t.defaultView&&o(t.defaultView)}),[t.defaultView]);return Object(j.jsxs)(h,{children:[Object(j.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",borderBottom:1,borderColor:"divider",gap:2,px:3},children:[Object(j.jsxs)(u.a,{sx:{flexGrow:1,pt:1},value:a,onChange:function(e,t){o(t)},"aria-label":"tabs",children:[Object(j.jsx)(ln,{label:"All",value:Q.HomeView.All}),Object(j.jsx)(ln,{label:"Recent",value:Q.HomeView.Recent,badge:b.displayed}),Object(j.jsx)(ln,{label:"Watch later",value:Q.HomeView.WatchLater,badge:p})]}),Object(j.jsx)(Mi,{tab:a,recentVideosCount:b.total,watchLaterVideosCount:p})]}),Object(j.jsx)(ji,{tab:a,onCountChange:function(e,t){e===Q.HomeView.Recent&&f(t)}})]})}var Wi=n(277),zi=n(168),Bi=n.n(zi),Hi=n(166),_i=n.n(Hi),Ni=n(167),Fi=n.n(Ni),Gi=n(281),Ui=n(282),Ki=n(314),Yi=n(315);function Ji(e){var t=e.channel;return Object(j.jsx)(Wi.a,{in:!0,children:Object(j.jsx)(x.a,{sx:{textDecoration:"none"},href:t.url,target:"_blank",rel:"noopener",children:Object(j.jsx)(xn.a,{sx:{width:60,height:60},alt:t.title,src:t.thumbnail,"aria-label":"channel"})})})}function qi(e,t){return e.channel.title===t.channel.title&&e.channel.thumbnail===t.channel.thumbnail&&e.channel.url===t.channel.url}var Qi=r.a.memo(Ji,qi);function Xi(e){var t=e.channel;return Object(j.jsx)(x.a,{sx:{color:"text.primary",textDecoration:"none"},href:t.url,target:"_blank",rel:"noopener",children:t.title})}function Zi(e,t){return e.channel.title===t.channel.title&&e.channel.url===t.channel.url}var $i=r.a.memo(Xi,Zi);function er(e){var t=e.channel,n=Object(i.useState)(!1),r=Object(l.a)(n,2),a=r[0],o=r[1],c=Mt(function(e){return Object(Be.a)(He,(function(t){return t.find((function(t){return t.id===e.id}))}))}(t)),s=Et();return Object(j.jsx)(d.a,{sx:{display:"flex"},children:Object(j.jsx)(Ki.a,{elevation:0,sx:{flexGrow:1,bgcolor:"transparent"},children:Object(j.jsx)(Yi.a,{sx:{pt:2.5,pl:0,pr:1,"& .MuiCardHeader-title":{fontSize:"0.975rem",mb:.25},"& .MuiCardHeader-action":{alignSelf:"center",ml:2}},avatar:Object(j.jsx)(Qi,{channel:t}),action:Object(j.jsx)(wn.a,{title:c?a?"Remove channel":"":"Add channel",placement:"left",arrow:!0,children:Object(j.jsx)(Gt.a,{sx:Object(b.a)({border:1,transition:function(e){return e.transitions.create(["color","background-color","border-color"])}},c?{bgcolor:"secondary.main",color:"common.white",borderColor:"secondary.main",":hover":{bgcolor:"secondary.main",color:"common.white",borderColor:"secondary.main"},"&.Mui-disabled":{bgcolor:"secondary.light",color:"common.white",opacity:.5}}:{borderColor:"custom.lightBorder",":hover":{bgcolor:"transparent",color:"secondary.main",borderColor:"secondary.main"}}),size:"small","aria-label":"add",disabled:c&&!a,onClick:function(){s((c?le:se)(t)),o(!0)},disableRipple:!0,children:Object(j.jsx)(Ii.a,{})})}),title:Object(j.jsx)($i,{channel:t}),subheader:t.description})})})}function tr(e){var t=e.search,n=Pe({name:t},{skip:""===t}),i=n.data,r=n.error,a=n.isLoading,o=(null===i||void 0===i?void 0:i.items)||[];return r?Object(j.jsx)(Yt,{error:r,closable:!0}):a?Object(j.jsx)(nn,{variant:"indeterminate"}):Object(j.jsx)(Gi.a,{sx:{px:3,overflow:"auto"},divider:Object(j.jsx)(Ui.a,{}),children:o.map((function(e,t){return Object(j.jsx)(er,{channel:e},t)}))})}var nr=n(304),ir=n(159),rr=n.n(ir),ar=n(160),or=n.n(ar),cr=n(161),sr=n.n(cr),lr=n(162),dr=n.n(lr),ur=n(163),br=n.n(ur);function jr(e){var t=e.open,n=e.channel,i=e.onClose,r=function(){i(!1)};return Object(j.jsxs)(un.a,{open:t,onClose:r,children:[Object(j.jsx)(bn.a,{children:Object(j.jsxs)(d.a,{sx:{display:"flex"},children:[Object(j.jsx)(Qi,{channel:n}),Object(j.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",px:2},children:[Object(j.jsxs)(gi.a,{sx:{px:0,pt:0},children:["Remove ",n.title,"'s channel ?"]}),Object(j.jsx)(yi.a,{children:"Are you sure that you want to remove this channel?"})]})]})}),Object(j.jsxs)(wi.a,{sx:{px:2,pb:2},children:[Object(j.jsx)(si.a,{color:"inherit",onClick:r,autoFocus:!0,children:"Cancel"}),Object(j.jsx)(si.a,{color:"primary",variant:"contained",onClick:function(){i(!0)},children:"Confirm"})]})]})}function hr(e){var t=e.channel,n=e.openedDialog,i=e.onClose,r=Et();return Object(j.jsx)(jr,{open:"remove-channel"===n,channel:t,onClose:function(e){e&&r(le(t)),i()}})}function fr(e,t){return e.openedDialog===t.openedDialog&&e.channel.id===t.channel.id}var pr=r.a.memo(hr,fr);function xr(e){var t,n=e.channel,r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Object(i.useState)(null),d=Object(l.a)(s,2),u=d[0],b=d[1],h=Et(),f=Boolean(o),p=function(){c(null)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Gt.a,{"aria-label":"settings",onClick:function(e){c(e.currentTarget)},children:Object(j.jsx)(pi.a,{})}),Object(j.jsxs)(on,{anchorEl:o,open:f,onClose:p,children:[Object(j.jsx)(hi.a,{onClick:function(){h(be(n)),p()},disableRipple:!0,children:(null===(t=n.notifications)||void 0===t?void 0:t.isDisabled)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(rr.a,{}),"Enable notifications"]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(or.a,{}),"Disable notifications"]})}),Object(j.jsx)(Ui.a,{sx:{my:.5}}),Object(j.jsx)(hi.a,{onClick:function(){h(ue(n)),p()},disableRipple:!0,children:n.isHidden?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(sr.a,{}),"Unhide"]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(dr.a,{}),"Hide"]})}),Object(j.jsxs)(hi.a,{sx:{color:"primary.main"},onClick:function(){b("remove-channel"),p()},disableRipple:!0,children:[Object(j.jsx)(br.a,{className:"inherit-color"}),"Remove"]})]}),Object(j.jsx)(pr,{channel:n,openedDialog:u,onClose:function(){b(null)}})]})}function vr(e,t){return JSON.stringify(e.channel)===JSON.stringify(t.channel)}var Or=r.a.memo(xr,vr),mr=n(164),gr=n.n(mr);function yr(e){return Object(j.jsx)(Gt.a,Object(b.a)(Object(b.a)({sx:{cursor:"move",mr:1.5},"aria-label":"drag-handle"},e),{},{children:Object(j.jsx)(gr.a,{})}))}var wr=r.a.forwardRef((function(e,t){var n=e.channel,i=e.isOverlay,a=e.showDragHandle,o=e.listeners,c=Object(we.a)(e,["channel","isOverlay","showDragHandle","listeners"]),s=r.a.useMemo((function(){return Object(j.jsx)(Ki.a,{elevation:0,sx:{flexGrow:1,bgcolor:"transparent"},children:Object(j.jsx)(Yi.a,{sx:Object(b.a)({pt:2.5,pl:0,pr:1,"& .MuiCardHeader-title":{fontSize:"0.975rem",mb:.25},"& .MuiCardHeader-action":{ml:2}},n.isHidden?{"& .MuiCardHeader-avatar":{opacity:.5},"& .MuiCardHeader-content":{textDecoration:"line-through",opacity:.5}}:{}),avatar:Object(j.jsx)(Qi,{channel:n}),action:Object(j.jsx)(Or,{channel:n}),title:Object(j.jsx)($i,{channel:n}),subheader:n.description})})}),[n]);return Object(j.jsx)("div",Object(b.a)(Object(b.a)({ref:t},c),{},{children:Object(j.jsx)(nr.a,{elevation:i?1:0,children:Object(j.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",bgcolor:"background.default"},children:[i?Object(j.jsx)(yr,{}):Object(j.jsx)(Ft.a,{in:a,orientation:"horizontal",children:Object(j.jsx)(yr,Object(b.a)({},o))}),s]})})}))})),Cr=n(19);function Sr(e){var t=e.channel,n=Object(we.a)(e,["channel"]),i=Object(re.c)({id:t.id,data:{channel:t}}),r=i.attributes,a=i.listeners,o=i.setNodeRef,c=i.transform,s=i.transition,l=i.isDragging,d={transition:i.isSorting?s:"none",opacity:l?.5:1,transform:Cr.a.Transform.toString(c)};return Object(j.jsx)(wr,Object(b.a)(Object(b.a)({ref:o,channel:t,style:d,listeners:a},r),n))}var kr=n(31),Vr=n(119);function Rr(e){var t=e.channels,n=e.showDragHandles,r=Object(i.useState)(null),a=Object(l.a)(r,2),o=a[0],c=a[1],s=Et();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(kr.a,{collisionDetection:kr.d,modifiers:[Vr.b,Vr.a],onDragStart:function(e){var t,n=e.active;c(null===(t=n.data.current)||void 0===t?void 0:t.channel)},onDragEnd:function(e){var n=e.active,i=e.over;if(n.id!==(null===i||void 0===i?void 0:i.id)){var r=t.findIndex((function(e){return e.id===n.id})),a=t.findIndex((function(e){return e.id===(null===i||void 0===i?void 0:i.id)}));s(de({from:r,to:a}))}c(null)},children:[Object(j.jsx)(re.a,{items:t,strategy:re.d,children:Object(j.jsx)(Gi.a,{sx:{px:3,overflow:"auto"},divider:Object(j.jsx)(Ui.a,{}),children:t.map((function(e,t){return Object(j.jsx)(Sr,{channel:e,showDragHandle:n},t)}))})}),Object(j.jsx)(kr.b,{children:o?Object(j.jsx)(wr,{channel:o,isOverlay:!0}):null})]})})}function Dr(e,t){return e.showDragHandles===t.showDragHandles&&JSON.stringify(e.channels)===JSON.stringify(t.channels)}var Ar=r.a.memo(Rr,Dr),Tr=n(165),Ir=n.n(Tr);function Lr(e){var t=Object(i.useRef)(null),n=Et();return Object(j.jsxs)(d.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(j.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:"No channels found."}),Object(j.jsxs)(p.a,{sx:{textAlign:"center",fontSize:"1.125rem"},variant:"body1",color:"text.secondary",gutterBottom:!0,children:["Start by typing a channel name in the search bar above",Object(j.jsx)("br",{}),"or"]}),Object(j.jsxs)(si.a,{sx:{textTransform:"capitalize"},variant:"contained",color:"secondary",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},children:["Import channels",Object(j.jsx)(Ir.a,{sx:{fontSize:"1.25rem",ml:.5}})]}),Object(j.jsx)("input",{type:"file",ref:t,style:{display:"none",visibility:"hidden",overflow:"hidden",width:0,height:0},accept:".json",onClick:function(e){e.currentTarget.value=""},onChange:function(e){var t,i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i)try{(function(e){return new Promise((function(t,n){var i=new FileReader;i.readAsText(e,"UTF-8"),i.onload=function(){t(i.result)},i.onerror=function(e){n(e)}}))})(i).then((function(e){var t=JSON.parse(e);n(ce({list:t}))}))}catch(r){console.error(r)}}})]})}function Er(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],b=Mt(He),f=Boolean(r),p=function(){a("")};return Object(j.jsxs)(h,{children:[Object(j.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",borderBottom:1,borderColor:"divider",gap:2,py:1.5,pr:4,pl:3},children:[Object(j.jsxs)(d.a,{sx:{flexGrow:1,display:"flex"},children:[Object(j.jsx)(Ft.a,{in:f,orientation:"horizontal",children:Object(j.jsx)(wn.a,{title:"Go back to channels list",placement:"bottom",arrow:!0,children:Object(j.jsx)(Gt.a,{sx:{mr:2,bgcolor:"custom.lightGrey"},"aria-label":"show-list",onClick:p,children:Object(j.jsx)(_i.a,{})})})}),Object(j.jsx)(Zt,{width:400,placeholder:"Search for a channel\u2026",debounceTime:700,onChange:function(e){a(e)},onClear:p,clearable:!0})]}),Object(j.jsx)(Wi.a,{in:!f&&b.length>1,children:Object(j.jsx)(wn.a,{title:"Toggle drag handles",placement:"left",arrow:!0,children:Object(j.jsx)(Gt.a,{sx:s?{bgcolor:"action.selected"}:{},"aria-label":"toggle-drag-handles",onClick:function(){u(!s)},children:Object(j.jsx)(Fi.a,{})})})}),Object(j.jsx)(Wi.a,{in:!f&&b.length>0,children:Object(j.jsx)(wn.a,{title:"Export",placement:"left",arrow:!0,children:Object(j.jsx)(Gt.a,{"aria-label":"export",onClick:function(){var e=JSON.stringify(b,null,4);Vi(new Blob([e],{type:"text/json"}),"channels.json")},children:Object(j.jsx)(Bi.a,{})})})})]}),r?Object(j.jsx)(tr,{search:r}):b.length>0?Object(j.jsx)(Ar,{channels:b,showDragHandles:s}):Object(j.jsx)(Lr,{})]})}var Mr=Object(T.a)(Qt.c)((function(e){var t=e.theme;return{borderRadius:4,position:"relative",backgroundColor:t.palette.background.default,border:"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),fontSize:"0.9rem",width:"auto",minWidth:320,padding:t.spacing(1,1.5),transition:t.transitions.create(["border-color","box-shadow"]),"&:focus-within":{boxShadow:"".concat(Object(rn.a)(t.palette.secondary.main,.25)," 0 0 0 0.2rem"),borderColor:t.palette.secondary.main},"& .MuiInputBase-input":{padding:0},"& .MuiInputAdornment-root":{marginLeft:t.spacing(.75),"& .MuiButtonBase-root":{padding:t.spacing(.75,1),"& > svg":{width:"0.85em"}}}}})),Pr=n(293),Wr=Object(T.a)(Pr.a)((function(e){var t=e.theme;return{width:36,height:20,padding:0,display:"flex","& .MuiSwitch-switchBase":{padding:3,color:t.palette.grey[500],"&.Mui-checked":{transform:"translateX(16px)",color:t.palette.common.white,"& + .MuiSwitch-track":{opacity:1,backgroundColor:t.palette.secondary.main,borderColor:t.palette.secondary.main}}},"& .MuiSwitch-thumb":{width:14,height:14,boxShadow:"none"},"& .MuiSwitch-track":{border:"1px solid ".concat(t.palette.grey[500]),borderRadius:10,opacity:1,backgroundColor:"light"===t.palette.mode?t.palette.common.white:"transparent"}}})),zr=n(287),Br=Object(T.a)(zr.a)((function(e){return{fontSize:"0.9rem","&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:e.theme.palette.secondary.light}}}})),Hr=function(e){return{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}},_r=Object(T.a)(hi.a)((function(e){var t=e.theme;return{fontSize:"0.9rem","&.Mui-selected":Object(b.a)(Object(b.a)({},Hr(t)),{},{"&.Mui-focusVisible":Hr(t)}),"&.Mui-selected:hover":Hr(t)}})),Nr=n(316),Fr=n(283),Gr=n(284);function Ur(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1];return Object(j.jsx)(Mr,Object(b.a)(Object(b.a)({},e),{},{type:r?"text":"password",endAdornment:Object(j.jsx)(Nr.a,{position:"end",children:Object(j.jsx)(Gt.a,{"aria-label":"toggle visibility",onClick:function(){a(!r)},onMouseDown:ge,edge:"end",children:r?Object(j.jsx)(Fr.a,{}):Object(j.jsx)(Gr.a,{})})})}))}function Kr(e){var t=e.label,n=e.description,i=e.placeholder,r=e.options,a=void 0===r?[]:r,o=e.value,c=e.type,s=e.onChange,l=function(e){if(s){var t=c===Q.SettingType.Boolean?e.target.checked:e.target.value;s(t)}};return Object(j.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",py:2.5},children:[Object(j.jsxs)(d.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(j.jsx)(p.a,{variant:"subtitle1",children:t}),n?Object(j.jsx)(p.a,{variant:"body2",color:"textSecondary",children:n}):null]}),function(){switch(c){case Q.SettingType.String:return Object(j.jsx)(Mr,{value:o,placeholder:i,onChange:l});case Q.SettingType.Secret:return Object(j.jsx)(Ur,{value:o,placeholder:i,onChange:l});case Q.SettingType.Boolean:return Object(j.jsx)(Wr,{checked:o,onChange:l,inputProps:{"aria-label":"checkbox"}});case Q.SettingType.List:return Object(j.jsx)(Br,{value:o,size:"small",onChange:l,children:a.map((function(e,t){return Object(j.jsx)(_r,{value:e.value,children:e.label},t)}))});default:return null}}()]})}var Yr="AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo";function Jr(e){var t=e.settings,n=Mt(Bt),i=Et();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(Yt,{open:n.loaded&&!t.apiKey,severity:"warning",closable:!0,syncOpen:!0,children:["In order to use this app you need a Youtube API key!"," ",Object(j.jsx)(x.a,{href:"#",color:"secondary",rel:"noopener",onClick:function(e){e.preventDefault(),i(te({apiKey:Yr}))},children:"Use a temporary key."})]}),Object(j.jsx)(Yt,{open:n.loaded&&t.apiKey===Yr,severity:"warning",closable:!0,syncOpen:!0,children:"You are using a temporary API key, which has a limited quota & might be used by other users. It is recommended to create your own key for daily use."})]})}function qr(e){var t=Object(i.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Mt(Wt),c=Et();return Object(i.useEffect)((function(){Ce&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return browser.runtime.sendMessage({message:e,params:n})}("getLastCheckDate").then((function(e){if(e){var t=new Date(e).getTime();a(xe.inWords(t))}}))}),[]),Object(j.jsxs)(h,{children:[Object(j.jsx)(Jr,{settings:o}),Object(j.jsxs)(Gi.a,{sx:{px:3,overflow:"auto"},divider:Object(j.jsx)(Ui.a,{}),children:[Object(j.jsx)(Kr,{label:"Default view",value:o.defaultView,onChange:function(e){c(te({defaultView:e}))},options:[{label:"All",value:Q.HomeView.All},{label:"Recent",value:Q.HomeView.Recent},{label:"Watch later",value:Q.HomeView.WatchLater}],type:Q.SettingType.List}),Object(j.jsx)(Kr,{label:"Recent videos seniority",value:o.recentVideosSeniority,onChange:function(e){c(te({recentVideosSeniority:e}))},options:[{label:"1 day",value:Q.VideosSeniority.OneDay},{label:"3 days",value:Q.VideosSeniority.ThreeDays},{label:"7 days",value:Q.VideosSeniority.SevenDays}],type:Q.SettingType.List}),Object(j.jsx)(Kr,{label:"Dark mode",value:o.darkMode,onChange:function(e){c(te({darkMode:e}))},type:Q.SettingType.Boolean}),Object(j.jsx)(Kr,{label:"Auto play videos",value:o.autoPlayVideos,onChange:function(e){c(te({autoPlayVideos:e}))},type:Q.SettingType.Boolean}),Ce?Object(j.jsx)(Kr,{label:"Enable notifications",description:"Checking for new videos is performed every ".concat(ye(at,"minute")).concat(r?" (Last check: ".concat(r,")"):""),value:o.enableNotifications,onChange:function(e){c(te({enableNotifications:e}))},type:Q.SettingType.Boolean}):null,Object(j.jsx)(Kr,{label:"Youtube API key",description:Object(j.jsxs)("span",{children:["Don't have an API key yet?"," ",Object(j.jsx)(x.a,{href:"https://www.slickremix.com/docs/get-api-key-for-youtube/",target:"_blank",color:"secondary",rel:"noopener",children:"Get your own!"})]}),value:o.apiKey,onChange:function(e){c(te({apiKey:e}))},type:Q.SettingType.Secret})]})]})}var Qr=n(317),Xr=n(318),Zr=n(169),$r=n.n(Zr),ea=n(98),ta=n.n(ea);function na(e){var t=e.author,n=e.repositoryUrl;return Object(j.jsxs)(p.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},color:"text.secondary",children:["Made with ",Object(j.jsx)($r.a,{sx:{color:"#e1495c",fontSize:18}})," ","by ",t,n?Object(j.jsx)(x.a,{href:n,target:"_blank",rel:"noopener",children:Object(j.jsx)(Gt.a,{sx:{p:0},size:"small","aria-label":"github link",children:Object(j.jsx)(ta.a,{fontSize:"inherit"})})}):null]})}function ia(e){var t=e.children,n=e.tooltip,i=e.href,r=e.target,a=void 0===r?"_blank":r;return Object(j.jsx)(wn.a,{title:n,placement:"bottom",arrow:!0,children:Object(j.jsx)(x.a,{href:i,target:a,color:"inherit",rel:"noopener",children:t})})}var ra=n(170),aa=n.n(ra),oa=n(171),ca=n.n(oa);function sa(e){return Object(j.jsx)(h,{children:Object(j.jsx)(d.a,{sx:{bgcolor:function(e){return"light"===e.palette.mode?"#f4f4f4":"transparent"},flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(j.jsxs)(Ki.a,{variant:"outlined",children:[Object(j.jsxs)(Qr.a,{sx:{pt:6,pb:12,px:12,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(j.jsx)(_t,{size:60,sx:{mb:3}}),Object(j.jsx)(p.a,{sx:{fontSize:"1.25rem",mb:1},variant:"h5",color:"text.primary",children:"YouTube viewer"}),Object(j.jsx)(na,{author:"AXeL"}),Object(j.jsxs)(d.a,{sx:{display:"flex",gap:1.5,color:function(e){return"light"===e.palette.mode?"grey.800":"grey.100"},mt:4},children:[Object(j.jsx)(ia,{tooltip:"Gmail",href:"mailto:contact.axel.dev@gmail.com",children:Object(j.jsx)(aa.a,{})}),Object(j.jsx)(ia,{tooltip:"Discord",href:"https://discord.gg/rpD4fgxBgj",children:Object(j.jsx)(ca.a,{})}),Object(j.jsx)(ia,{tooltip:"Github",href:"https://github.com/AXeL-dev/youtube-viewer",children:Object(j.jsx)(ta.a,{})})]})]}),Object(j.jsx)(Xr.a,{sx:{borderTop:1,borderColor:"divider",px:1.5},children:Object(j.jsx)(x.a,{sx:{textDecoration:"none"},href:"https://github.com/AXeL-dev/youtube-viewer/graphs/contributors",target:"_blank",rel:"noopener",children:Object(j.jsx)(si.a,{sx:{fontSize:"0.875rem",fontWeight:400,textTransform:"capitalize"},size:"small",color:"secondary",children:"Contributors"})})}),Object(j.jsx)(Xr.a,{sx:{borderTop:1,borderColor:"divider",px:1.5},children:Object(j.jsx)(si.a,{sx:{fontSize:"0.875rem",fontWeight:400,textTransform:"capitalize"},size:"small",color:"secondary",children:"Privacy policy"})})]})})})}function la(e){var t=Object(i.useRef)([]),n=Object(i.useRef)(null),r=Mt(Fe),a=Mt(Wt),o=Mt(Bt);Object(i.useEffect)((function(){a.enableNotifications&&(t.current=[])}),[a.enableNotifications]);var c=function(){Re(""),Se(Ve)},s=function(e,t,i){rt("Handle message:",e);var r=null;return new Promise((function(t){switch(e.message){case"getLastCheckDate":r=n.current}rt("response:",r),t(r)}))};Object(i.useEffect)((function(){Ce&&(De("#666","#fff"),browser.runtime.onMessage.addListener(s),browser.notifications.onClicked.addListener((function(e){rt("Notification clicked:",e),c()})),browser.notifications.onButtonClicked.addListener((function(e,t){var n;rt("Notification button ".concat(t," clicked:"),e),rt("channels",r);var i=e.split("::"),a=Object(l.a)(i,2)[1],o=null===(n=r.find((function(e){return e.id===a})))||void 0===n?void 0:n.url;(null===o||void 0===o?void 0:o.length)&&Se(o)})),browser.browserAction.onClicked.addListener((function(e){rt("Browser action clicked:",e),c()})),browser.storage.onChanged.addListener((function(e,t){if(rt("Storage changed:",t,e),"local"===t){var n=e[Rt].newValue,i=n.settings,r=n.channels,a=n.videos;Tt(te(i)),Tt(ce(r)),Tt(bt(a))}})),rt("Background page initialised."))}),[]),Object(i.useEffect)((function(){Ce&&o.loaded&&(rt("Removing outdated videos."),Tt(Ot(),!0))}),[o.loaded]);var d=function(){var e=Object(K.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,browser.browserAction.getBadgeText({});case 2:(n=e.sent).length&&(t+=+n),rt("Updating badge:",t),Re(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){if(t.current.push(e),t.current.length===r.length){n.current=new Date;var i=t.current.reduce((function(e,t){return e+t.newVideos.length}),0);if(rt("All channel checkers responded, new videos count:",i),i>0){d(i);var a=t.current.filter((function(e){return e.newVideos.length>0})),o=a.slice(0,Math.min(5,a.length)).map((function(e){return e.channel.title})).join(", ");!function(e){var t=e.id,n=e.type,i=void 0===n?"basic":n,r=e.title,a=void 0===r?"YouTube viewer":r,o=e.iconUrl,c=void 0===o?"icons/128.png":o,s=Object(we.a)(e,["id","type","title","iconUrl"]);browser.notifications.create(t,Object(b.a)({type:i,title:a,iconUrl:c},s))}({title:"YouTube viewer (".concat(i," new video").concat(i>1?"s":"",")"),message:"Posted by ".concat(o).concat(a.length>5?" & others":"",".")});var c=a.reduce((function(e,t){return[].concat(Object(Ze.a)(e),Object(Ze.a)(t.newVideos))}),[]);rt("Saving notified videos.",c),Tt(vt({videos:c,flags:{notified:!0}}),!0)}t.current=[]}};return Ce?Object(j.jsx)(j.Fragment,{children:o.loaded&&a.enableNotifications?r.map((function(e,t){return Object(j.jsx)(ct,{channel:e,onCheckEnd:u},t)})):null}):Object(j.jsx)("span",{children:"This script is not intended to run on a webapp."})}var da=n(294),ua=n(285),ba=n(173),ja=n(99),ha=(n(218),n(219),n(220),n(221),n(222),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return Object(ba.a)({palette:Object(b.a)({mode:e,primary:{light:"#e9321a",main:"#f21718",dark:"#b81112"},secondary:{light:"#1a88ff",main:"#007bff",dark:"#006fe6"}},"light"===e?{background:{default:"#fff"},custom:{lightGrey:"#fafafa",lightBorder:ja.b.divider}}:{background:{default:"#181818"},custom:{lightGrey:"#212121",lightBorder:"rgba(255, 255, 255, 0.23)"}}),breakpoints:{values:{xxs:0,xs:780,sm:1e3,md:1200,lg:1400,xl:1600}}})});var fa=function(){var e=Mt(zt),t=ha(e);return Object(j.jsxs)(da.a,{theme:t,children:[Object(j.jsx)(ua.a,{}),Object(j.jsx)(c.a,{children:Object(j.jsxs)(s.d,{children:[Object(j.jsx)(s.b,{exact:!0,path:"/",component:Pi}),Object(j.jsx)(s.b,{exact:!0,path:"/channels",component:Er}),Object(j.jsx)(s.b,{exact:!0,path:"/settings",component:qr}),Object(j.jsx)(s.b,{exact:!0,path:"/about",component:sa}),Object(j.jsx)(s.b,{path:"/background",component:la}),Object(j.jsx)(s.a,{to:"/"})]})})]})},pa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,319)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(q.a,{store:Pt,children:Object(j.jsx)(fa,{})})}),document.getElementById("root")),pa()}},[[223,1,2]]]);
//# sourceMappingURL=main.573b835a.chunk.js.map