(this["webpackJsonpyoutube-viewer"]=this["webpackJsonpyoutube-viewer"]||[]).push([[0],{192:function(e,t,n){e.exports=n(242)},196:function(e,t,n){},197:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(9),r=n.n(i),l=(n(196),n(197),n(168)),c=n(18),s=n(24),u=n(29),d=n.n(u),m=n(6),h=n(44),f=n(78),p=n(79),v=n(171),b=n(169),g=n(19);function E(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach((function(t){e.push(y(t))})),Promise.all(e)}function y(e){return new Promise((function(t,n){try{browser.storage.local.get(e).then((function(n){t(n[e])}))}catch(i){var a,o=localStorage.getItem(e);try{a=JSON.parse(o)}catch(i){a=o}t(a)}}))}function C(e){var t=[];return Object.keys(e).forEach((function(n){t.push(function(e,t){return new Promise((function(n,a){try{browser.storage.local.set(Object(g.a)({},e,t)).then((function(){n()}))}catch(i){var o;try{o=JSON.stringify(t)}catch(i){o=t}localStorage.setItem(e,o),n()}}))}(n,e[n]))})),Promise.all(t)}function w(e){var t=e.replace("PT","").toUpperCase(),n=i("H"),a=i("M"),o=i("S");return"00"!==n?[n,a,o].join(":"):[a,o].join(":");function i(e){for(var n=0;n<t.length;n++)if(t[n]===e){var a=t.slice(0,n);return 1===a.length&&"H"!==e&&(a="0"+a),t=t.slice(n+1),a}return"00"}}function O(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=["k","M","G","T","P","E","Z","Y"],o=a.length-1;o>=0;o--)if(e<=-(t=Math.pow(1e3,o+1))||e>=t)return+(e/t).toFixed(n)+a[o];return e}var k=function(){var e={locales:{prefix:"",sufix:"ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},inWords:function(t){var n=Math.floor((new Date-parseInt(t))/1e3),a=e.locales.separator||" ",o=e.locales.prefix+a,i=0,r={year:n/31536e3,month:n/2592e3,day:n/86400,hour:n/3600,minute:n/60},l=e.locales.seconds;for(var c in r){if((i=Math.floor(r[c]))>1){l=e.locales[c+"s"];break}if(1===i){l=e.locales[c];break}}return(o+=(l=l.replace(/%d/i,i))+a+e.locales.sufix).trim()}};return e}();function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;return t.setDate(t.getDate()-e),t}function j(e){return(new Date).setHours(0,0,0,0)===new Date(e).setHours(0,0,0,0)}function S(e,t){var n=(t.getTime()-e.getTime())/1e3;return n/=3600,Math.abs(Math.round(n))}var N=n(12),V="AIzaSyB6mi40O6WOd17yjeYkK-y5lIU4FvoR8fo",R=function(){function e(){return(e=Object(h.a)(d.a.mark((function e(){var t,n,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("settings");case 2:n=e.sent,a=Object(m.a)(n,1),o=a[0],V=(null===o||void 0===o||null===(t=o.apiKey)||void 0===t?void 0:t.length)?o.apiKey:V;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(h.a)(d.a.mark((function e(t){var n,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:if((n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:throw o=e.sent,Error((null===o||void 0===o||null===(a=o.error)||void 0===a?void 0:a.errors[0])?"<strong>".concat(o.error.errors[0].reason,"</strong>: ").concat(o.error.errors[0].message.replace(/<\/?[^>]+(>|$)/g,"")):"HTTP ".concat(n.status,": ").concat(n.url));case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(e,n){return function(e){return t.apply(this,arguments)}(function(e,t){var n="https://www.googleapis.com/youtube/v3/"+e+"?";return n+=new URLSearchParams(Object(N.a)(Object(N.a)({},t),{},{key:V})).toString()}(e,n))}}();function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return R("activities",{part:"snippet,contentDetails",channelId:e,publishedAfter:t.toISOString(),maxResults:50})}Symbol("Video does not exist");function A(e){var t=e.join(",");return R("videos",{part:"snippet,contentDetails,statistics,id",fields:"items(id,contentDetails/duration,statistics/viewCount,snippet(title,channelTitle,channelId,publishedAt,thumbnails/medium))",id:t,maxResults:50}).then((function(e){return e.items.map((function(e){return{id:e.id,title:e.snippet.title,url:"https://www.youtube.com/watch?v="+e.id,duration:w(e.contentDetails.duration),views:{count:e.statistics.viewCount,asString:O(e.statistics.viewCount)},publishedAt:new Date(e.snippet.publishedAt).getTime(),thumbnail:e.snippet.thumbnails.medium.url,channelId:e.snippet.channelId,channelTitle:e.snippet.channelTitle}}))}))}function L(){try{return!!browser}catch(e){return!1}}function T(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return browser.tabs.create({url:e,active:t})}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"basic";browser.notifications.create(t,{type:n,title:"Youtube viewer",iconUrl:"icons/128.png",message:e})}function P(e){browser.browserAction.setBadgeText({text:0===e?"":e.toString()})}function D(){return-1!==navigator.userAgent.indexOf("Firefox")}var W,z=30,H=1,M=9,F=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={totalRecentVideosCount:0,checkedChannels:{}},L()&&(a.init(),console.log("background init executed.")),a}return Object(p.a)(n,[{key:"init",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="#666",o="#fff",D()&&browser.browserAction.setBadgeTextColor({color:o}),browser.browserAction.setBadgeBackgroundColor({color:a}),e.next=3,this.getAutoCheckRate();case 3:t=e.sent,this.log("Rate:",t),this.autoCheckLoop(t),browser.notifications.onClicked.addListener((function(e){var t;n.log("Notification clicked:",e);var a=e.split("::"),o=Object(m.a)(a,2)[1],i=null===(t=n.state.checkedChannels[o])||void 0===t?void 0:t.url;(null===i||void 0===i?void 0:i.length)&&T(i)}));case 7:case"end":return e.stop()}var a,o}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"log",value:function(e){}},{key:"autoCheckLoop",value:function(e){var t=this;setTimeout(Object(h.a)(d.a.mark((function e(){var n,a,o,i,r,l,c,s,u,h,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("channels","settings","cache");case 2:return n=e.sent,a=Object(m.a)(n,3),o=a[0],i=a[1],r=a[2],t.log("Storage data:",{channels:o,settings:i,cache:r}),e.next=10,t.getRecentVideosCount(o,i,r);case 10:return l=e.sent,c=Object(m.a)(l,2),s=c[0],u=c[1],e.next=16,browser.browserAction.getBadgeText({});case 16:h=e.sent,f=t.state.totalRecentVideosCount,t.log("Recent videos count:",s),t.log("Badge text:",h),h.length?f+=s:f=s,t.setState({totalRecentVideosCount:f}),t.log("Total count:",f),P(f),(null===i||void 0===i?void 0:i.enableRecentVideosNotifications)&&s>0&&u.forEach((function(e){var t,n=(null===(t=e.id)||void 0===t?void 0:t.length)?(new Date).getTime()+"::"+e.id:"";B(e.message,n)})),t.autoCheckLoop((null===i||void 0===i?void 0:i.autoVideosCheckRate)||z);case 26:case"end":return e.stop()}}),e)}))),60*e*1e3)}},{key:"getAutoCheckRate",value:function(){return new Promise(function(){var e=Object(h.a)(d.a.mark((function e(t,n){var a,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("settings");case 2:a=e.sent,o=Object(m.a)(a,1),i=o[0],t((null===i||void 0===i?void 0:i.autoVideosCheckRate)||z);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},{key:"getRecentVideosCount",value:function(e,t,n){var a=this;return new Promise((function(o,i){var r=0,l=[],c=[],u=a.state.checkedChannels;e.filter((function(e){var t;return!e.isHidden&&!(null===(t=e.notifications)||void 0===t?void 0:t.isDisabled)})).forEach((function(e){c.push(I(e.id,x(H)).then((function(o){if(a.log("activities of",e.title,o),null===o||void 0===o?void 0:o.items){var i,c=o.items.map((function(e){var t;return null===(t=e.contentDetails.upload)||void 0===t?void 0:t.videoId})).filter((function(e){return null===e||void 0===e?void 0:e.length})),d=(null===(i=n[e.id])||void 0===i?void 0:i.length)?n[e.id].map((function(e){return e.id})):[],m=c.filter((function(e,t){return c.indexOf(e)===t})).slice(0,(null===t||void 0===t?void 0:t.videosPerChannel)||M).filter((function(t){return!u[e.id]||-1===u[e.id].videosIds.indexOf(t)})).filter((function(e){return-1===d.indexOf(e)}));if(m.length){var h;a.log(m.length,"recent videos"),u[e.id]||(u[e.id]={videosIds:[],url:e.url}),(h=u[e.id].videosIds).push.apply(h,Object(s.a)(m));var f=m.length>1?"s":"";l.push({message:"".concat(e.title," posted ").concat(m.length," recent video").concat(f),id:e.id}),r+=m.length}else a.log("no recent videos for this channel")}})).catch((function(e){console.error(e)})))})),Promise.all(c).finally((function(){a.setState({checkedChannels:u}),o([r,l])}))}))}},{key:"render",value:function(){return o.a.createElement("span",null,"Silence is golden!")}}]),n}(o.a.Component),K=n(3),U=n(30),_=n(309),J=n(308),Y=n(306),$=n(307),q=n(55),G=n(290),X=n(284),Q=n(161),Z=n.n(Q),ee=n(163),te=n.n(ee),ne=n(164),ae=n.n(ne),oe=n(82),ie=n.n(oe),re=n(162),le=n.n(re),ce=n(165),se=n.n(ce),ue=n(166),de=n.n(ue),me=n(310),he=n(286),fe=n(172),pe=n(282),ve=n(285),be=n(318),ge=n(175),Ee=n(61),ye=n.n(Ee),Ce=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return o.a.createElement("span",{className:a,dangerouslySetInnerHTML:{__html:t.replace(/\n/g,"<br />")}})},we=n(138),Oe=n(16),ke=Object(we.a)((function(e){return{search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Oe.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Oe.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{width:"auto"}),searchIcon:{width:e.spacing(6),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},clearButton:{position:"absolute",right:0,top:0,margin:e.spacing(.75),color:e.palette.common.white},inputRoot:{color:"inherit"},inputInput:Object(g.a)({padding:e.spacing(1,4,1,6),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:240,"&:focus":{width:300}}),poper:{position:"absolute",width:"100%",zIndex:1,margin:"4px 0",overflow:"hidden",borderRadius:"4px",boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)"},listbox:{position:"relative",margin:0,padding:"8px 0",border:"none",listStyle:"none",backgroundColor:e.palette.background.paper,overflow:"auto",maxHeight:"40vh","& li":{padding:"6px 16px"},'& li[data-focus="true"]':{backgroundColor:"rgba(0, 0, 0, 0.08)",cursor:"pointer"},"& li:active":{backgroundColor:"rgba(0, 0, 0, 0.14)"}},avatar:{color:e.palette.text.secondary,marginRight:e.spacing(2)}}}));function xe(e){var t=e.onSelect,n=e.onError,a=ke(),i=o.a.useState(""),r=Object(m.a)(i,2),l=r[0],c=r[1],s=o.a.useState([]),u=Object(m.a)(s,2),d=u[0],h=u[1],f=Object(pe.a)({id:"search-autocomplete",options:d,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.title)?(c(e.title),e.title):e},value:l}),p=f.getRootProps,v=f.getInputProps,b=f.getListboxProps,g=f.getOptionProps,E=f.groupedOptions,y=o.a.useMemo((function(){return function(e,t){var n=null;return function(){var a=this,o=arguments;n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(a,o)}),t)}}((function(e,t){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return R("search",{part:"snippet",type:"channel",order:"relevance",q:e}).then((function(e){var n=[];if(e.pageInfo.totalResults>0)for(var a=Math.min(e.pageInfo.totalResults,t),o=0;o<a;o++)e.items[o]&&n.push({title:e.items[o].snippet.title,url:"https://www.youtube.com/channel/"+e.items[o].id.channelId+"/videos",description:e.items[o].snippet.description,thumbnail:e.items[o].snippet.thumbnails.medium.url,id:e.items[o].id.channelId});return n}))})(e.value,5).then((function(e){t(e)})).catch((function(e){n(e)}))}),200)}),[]);return o.a.useEffect((function(){var e=!0;if(""!==l)return y({value:l},(function(t){e&&h(t||[])})),function(){e=!1};h([])}),[l,y]),o.a.createElement("div",{className:a.search},o.a.createElement("div",p(),o.a.createElement("div",{className:a.searchIcon},o.a.createElement(ie.a,null)),o.a.createElement(ge.a,{placeholder:"Search for a channel\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:Object(N.a)(Object(N.a)({},v()),{},{"aria-label":"search"}),onChange:function(e){c(e.target.value)}}),(null===l||void 0===l?void 0:l.length)>0&&o.a.createElement(X.a,{"aria-label":"clear",size:"small",className:a.clearButton,onClick:function(){return c("")}},o.a.createElement(ye.a,{fontSize:"inherit"}))),E.length>0?o.a.createElement("div",{className:a.poper},o.a.createElement("ul",Object.assign({className:a.listbox},b()),E.map((function(e,n){return o.a.createElement("li",g({option:e,index:n}),o.a.createElement(ve.a,{container:!0,alignItems:"center",onClick:function(){return t(e)}},o.a.createElement(ve.a,{item:!0},o.a.createElement(be.a,{className:a.avatar,alt:e.title,src:e.thumbnail})),o.a.createElement(ve.a,{item:!0,xs:!0},o.a.createElement(q.a,{variant:"body2",color:"textSecondary"},o.a.createElement(Ce,null,e.title.replace(new RegExp("("+l+")","gi"),"<strong>$1</strong>"))))))})))):null)}!function(e){e[e.None=-1]="None",e[e.All=-2]="All",e[e.RecentVideos=-3]="RecentVideos",e[e.TodaysVideos=-4]="TodaysVideos",e[e.WatchLaterVideos=-5]="WatchLaterVideos"}(W||(W={}));var je,Se,Ne=n(315),Ve=n(143),Re=n.n(Ve),Ie=n(144),Ae=n.n(Ie),Le=n(319),Te=n(289),Be=n(142),Pe=n.n(Be),De=n(140),We=n.n(De),ze=n(84),He=n.n(ze),Me=n(141),Fe=n.n(Me),Ke=Object(we.a)((function(e){return{anchor:{textDecoration:"none",color:"inherit",display:"inline-block","&:hover":{textDecoration:"none"}},imageContainer:{position:"relative","&:hover .overlay":{opacity:1},"&:hover .options":{top:"50%",left:"50%",opacity:1}},image:{width:210,height:118,display:"inherit"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",position:"absolute",height:"100%",width:"100%",left:0,top:0,bottom:0,right:0,opacity:0,transition:"all 0.4s ease-in-out 0s"},options:{position:"absolute",textAlign:"center",paddingLeft:"1em",paddingRight:"1em",width:"100%",top:"50%",left:"50%",opacity:0,transform:"translate(-50%, -50%)",transition:"all 0.3s ease-in-out 0s"},optionsButton:{color:"#fff",margin:e.spacing(.5)},optionsIcon:{fontSize:"1.5em","&.bigger":{fontSize:"2.1em"}},visibilityIconBox:{display:"flex",position:"absolute",bottom:0,left:0,margin:"4px",color:"#eee",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"3px 5px",borderRadius:"2px","&:hover":{color:"#fff"}},visibilityIcon:{fontSize:"1.22em"},duration:{position:"absolute",bottom:0,right:0,margin:"4px",color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"2px 4px",borderRadius:"2px"}}})),Ue=n(8),_e=n(27);!function(e){e.ASC="asc",e.DESC="desc"}(je||(je={}));var Je=Object(Ue.b)([]),Ye=je.DESC,$e=Object(Ue.b)((Se={},Object(g.a)(Se,W.All,je.DESC),Object(g.a)(Se,W.TodaysVideos,je.DESC),Object(g.a)(Se,W.RecentVideos,je.DESC),Object(g.a)(Se,W.WatchLaterVideos,je.ASC),Se)),qe=Object(Ue.b)(null,(function(e,t,n){t($e,Object(N.a)(Object(N.a)({},e($e)),n))})),Ge={defaultChannelSelection:W.All,videosPerChannel:9,videosAnteriority:30,sortVideosBy:"date",autoVideosCheckRate:30,enableRecentVideosNotifications:!0,autoPlayVideos:!1,openVideosInInactiveTabs:!1,openChannelsOnNameClick:!1,hideEmptyChannels:!0,autoCloseDrawer:!1,autoClearRecentVideos:!0,autoRemoveWatchLaterVideos:!0,autoClearCache:!1},Xe=Object(Ue.b)(Ge),Qe=Object(Ue.b)({}),Ze=Object(Ue.b)([]),et=Object(Ue.b)(W.All),tt="info",nt=5e3,at=!1,ot=Object(Ue.b)({isOpen:!1,message:"",icon:tt,autoHideDuration:nt,showRefreshButton:at}),it=function(e){return Object(N.a)(Object(N.a)({},e(ot)),{},{isOpen:!1,key:void 0})},rt=Object(Ue.b)(null,(function(e,t,n){e(ot).isOpen&&t(ot,it(e)),t(ot,{isOpen:!0,message:n.message||n,key:(new Date).getTime(),icon:n.icon||tt,autoHideDuration:n.autoHideDuration||nt,showRefreshButton:void 0!==n.showRefreshButton?n.showRefreshButton:at})})),lt=Object(Ue.b)(null,(function(e,t){return t(ot,it(e))}));function ct(e){var t=e.video,n=Ke(),a=Object(Ue.c)(et),i=Object(m.a)(a,1)[0],r=Object(Ue.c)(Xe),l=Object(m.a)(r,1)[0],c=Object(Ue.c)(Je),s=Object(m.a)(c,2),u=s[0],d=s[1],h=Object(Ue.c)(Qe),f=Object(m.a)(h,2),p=f[0],v=f[1],b=Object(_e.b)(rt),g=function(e,t){e.stopPropagation(),L()&&(null===t||void 0===t?void 0:t.url)&&(e.preventDefault(),T(t.url,!l.openVideosInInactiveTabs).then((function(e){var t,n;l.autoPlayVideos&&(t=e.id,n="document.querySelector('#player video').play();",browser.tabs.executeScript(t,{code:n}))})));var n=E(t);l.autoRemoveWatchLaterVideos&&w(t,null,n)},E=function(e){var t=y(e);return t>-1&&!p[e.channelId][t].isWatched&&(p[e.channelId][t].isWatched=!0,v(Object(N.a)({},p))),t},y=function(e){return p[null===e||void 0===e?void 0:e.channelId].findIndex((function(t){return t.id===(null===e||void 0===e?void 0:e.id)}))},C=function(e){e.stopPropagation(),e.preventDefault()},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;t&&C(t);var a=n>=0?n:y(e);a>-1&&p[e.channelId][a].isToWatchLater&&(i===W.WatchLaterVideos&&d(u.filter((function(t){return t.id!==e.id}))),p[e.channelId][a].isToWatchLater=!1,v(Object(N.a)({},p)))};return o.a.createElement(he.a,{href:t.url,className:n.anchor,target:"_blank",rel:"noopener",onClick:function(e){return g(e,t)}},o.a.createElement(me.a,{className:n.imageContainer},o.a.createElement("img",{className:n.image,alt:"",src:t.thumbnail}),o.a.createElement(me.a,{className:"".concat(n.overlay," overlay")}),o.a.createElement(me.a,{className:"".concat(n.options," options")},i!==W.WatchLaterVideos?!t.isToWatchLater&&o.a.createElement(X.a,{size:"small",className:n.optionsButton,onClick:function(e){return function(e,t){C(e);var n=y(t);n>-1&&(p[t.channelId][n].isToWatchLater?b({message:"Video is already on watch later list!",autoHideDuration:3e3}):(p[t.channelId][n].isToWatchLater=!0,v(Object(N.a)({},p)),b({message:"Video added to watch later list!",icon:"success",autoHideDuration:3e3})))}(e,t)}},o.a.createElement(Le.a,{title:"Watch later","aria-label":"watch-later"},o.a.createElement(We.a,{className:n.optionsIcon}))):t.isToWatchLater&&o.a.createElement(X.a,{size:"small",className:n.optionsButton,onClick:function(e){return w(t,e)}},o.a.createElement(Le.a,{title:"Remove","aria-label":"remove"},o.a.createElement(Fe.a,{className:n.optionsIcon}))),o.a.createElement(X.a,{size:"small",className:n.optionsButton},o.a.createElement(Le.a,{title:"Watch now","aria-label":"watch-now"},o.a.createElement(Pe.a,{className:"".concat(n.optionsIcon," bigger")})))),t.isWatched&&o.a.createElement(me.a,{className:n.visibilityIconBox,onClick:function(e){return C(e)}},o.a.createElement(Le.a,{title:"Already watched","aria-label":"already-watched"},o.a.createElement(He.a,{className:n.visibilityIcon}))),o.a.createElement(q.a,{variant:"caption",className:n.duration},t.duration)),o.a.createElement(me.a,{pr:2,mt:1},o.a.createElement(q.a,{gutterBottom:!0,variant:"body2"},t.title),o.a.createElement(q.a,{display:"block",variant:"caption",color:"textSecondary"},t.channelTitle),o.a.createElement(q.a,{variant:"caption",color:"textSecondary"},"".concat(t.views.asString||t.views," \u2022 ").concat(k.inWords(t.publishedAt)))))}var st=function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,null,[{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a]}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a]}}]),e}(),ut={grid:{minWidth:"428px"}};function dt(e){var t=e.videos,n=e.loading,a=void 0!==n&&n,i=e.maxPerChannel,r=void 0===i?9:i,l=e.maxSkeletons,c=void 0===l?9:l,s=o.a.useState(!1),u=Object(m.a)(s,2),d=u[0],h=u[1],f=null,p=function(e){if(st.log(e.type,{preventLongPress:d}),"mousedown"===e.type)h(!1),f=setTimeout((function(){h(!0)}),200);else{if(!d)return!0;h(!1)}return e.stopPropagation(),e.preventDefault(),!1};return o.a.useEffect((function(){return function(){f&&clearTimeout(f)}})),o.a.createElement(ve.a,{container:!0,style:ut.grid,onMouseDown:function(e){return p(e)},onClickCapture:function(e){return p(e)}},(a?Array.from(new Array(Math.min(r,c))):t.slice(0,r)).map((function(e,t){return o.a.createElement(me.a,{key:t,width:210,marginRight:.5,marginBottom:3,draggable:"false"},e?o.a.createElement(ct,{video:e}):o.a.createElement(o.a.Fragment,null,o.a.createElement(Te.a,{variant:"rect",width:210,height:118}),o.a.createElement(me.a,{pt:.5},o.a.createElement(Te.a,null),o.a.createElement(Te.a,{width:"60%"}))))})))}var mt=n(85),ht=n.n(mt),ft=n(86),pt=n.n(ft),vt=n(87),bt=n.n(vt),gt=Object(we.a)((function(e){return{breadcrumb:{marginBottom:e.spacing(2.5)},divider:{marginBottom:e.spacing(2.5)},link:{display:"flex",alignItems:"center",cursor:"pointer",outline:"none","&:hover":{backgroundColor:"transparent"}},title:{marginLeft:e.spacing(1)},youtube:{"&:hover":{color:"#f44336"}},box:{"&:last-child":{"& hr.divider":{display:"none"}}}}}));function Et(e){var t=gt(),n=Object(U.a)(),a=e.channels,i=e.videos,r=e.settings,l=e.loading,c=void 0!==l&&l,u=e.maxPerChannel,d=void 0===u?9:u,h=e.maxVisible,f=void 0===h?3:h,p=e.onSelect,v=e.onSave,b=e.onRefresh,g=o.a.useState([]),E=Object(m.a)(g,2),y=E[0],C=E[1],w=function(e,t){a[e].notifications=Object(N.a)(Object(N.a)({},a[e].notifications),{},{isDisabled:!t}),v(Object(s.a)(a))};return o.a.createElement(me.a,{overflow:"hidden",className:t.box},a.map((function(e,l){var u;if(!e.isHidden){var m=i.filter((function(t){return t.channelId===e.id}));if(c||!r.hideEmptyChannels||0!==m.length)return o.a.createElement(me.a,{key:l},o.a.createElement(Ne.a,{"aria-label":"breadcrumb",className:t.breadcrumb},o.a.createElement(he.a,{color:"inherit",className:t.link,href:e.url,target:"_blank",rel:"noopener",onClick:function(t){return function(e,t,n){(null===r||void 0===r?void 0:r.openChannelsOnNameClick)||(e.preventDefault(),p(t,n))}(t,e,l)}},o.a.createElement(be.a,{alt:e.title,src:e.thumbnail}),o.a.createElement(q.a,{variant:"subtitle1",color:"textPrimary",className:t.title},e.title)),!(null===r||void 0===r?void 0:r.openChannelsOnNameClick)&&o.a.createElement(he.a,{color:"inherit",className:"".concat(t.link," ").concat(t.youtube),href:e.url,target:"_blank",rel:"noopener"},o.a.createElement(Le.a,{title:"Open channel","aria-label":"open-channel"},o.a.createElement(Re.a,null))),o.a.createElement(X.a,{size:"small",className:t.link,onClick:function(){return function(e){a[e].isHidden=!0,v(Object(s.a)(a)),b()}(l)}},o.a.createElement(Le.a,{title:"Hide channel","aria-label":"hide-channel"},o.a.createElement(ht.a,null))),L()&&r.enableRecentVideosNotifications&&((null===(u=e.notifications)||void 0===u?void 0:u.isDisabled)?o.a.createElement(X.a,{size:"small",className:t.link,onClick:function(){return function(e){w(e,!0)}(l)}},o.a.createElement(Le.a,{title:"Enable notifications","aria-label":"enable-channel-notifiactions"},o.a.createElement(pt.a,null))):o.a.createElement(X.a,{size:"small",className:t.link,onClick:function(){return function(e){w(e,!1)}(l)}},o.a.createElement(Le.a,{title:"Disable notifications","aria-label":"disable-channel-notifiactions"},o.a.createElement(bt.a,null))))),o.a.createElement(dt,{videos:y.indexOf(l)>-1?m:m.slice(0,f),loading:c,maxPerChannel:d,maxSkeletons:f}),m.length>f&&-1===y.indexOf(l)&&o.a.createElement(Le.a,{title:"Show more","aria-label":"show-more"},o.a.createElement(X.a,{edge:"end","aria-label":"show-more",size:"small",style:{marginBottom:n.spacing(2.5)},onClick:function(){return C([].concat(Object(s.a)(y),[l]))}},o.a.createElement(Ae.a,{fontSize:"small"}))),o.a.createElement(G.a,{className:"divider ".concat(t.divider)}))}})))}var yt=n(299),Ct=n(301),wt=n(243),Ot=n(302),kt=n(304),xt=n(305),jt=n(153),St=n.n(jt),Nt=n(72),Vt=n.n(Nt),Rt=n(54),It=n.n(Rt),At=n(157),Lt=n.n(At),Tt=n(158),Bt=n.n(Tt),Pt=n(152),Dt=n.n(Pt),Wt=n(150),zt=n.n(Wt),Ht=n(151),Mt=n.n(Ht),Ft=n(91),Kt=n.n(Ft),Ut=n(145),_t=n.n(Ut),Jt=n(90),Yt=n.n(Jt),$t=n(156),qt=n.n($t),Gt=n(303),Xt=n(314),Qt=n(300),Zt=n(170),en=n(92),tn=n(296),nn=n(291),an=n(295),on=n(293),rn=n(294),ln=n(292);function cn(e){var t=e.open,n=e.title,a=e.description,i=e.confirmButtonText,r=void 0===i?"Confirm":i,l=e.cancelButtonText,c=void 0===l?"Cancel":l,s=e.onClose,u=e.onConfirm;return o.a.createElement(nn.a,{open:t,onClose:function(){return s()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ln.a,{id:"alert-dialog-title"},n),o.a.createElement(on.a,null,o.a.createElement(rn.a,{id:"alert-dialog-description"},o.a.createElement(Ce,null,a))),o.a.createElement(an.a,null,o.a.createElement(tn.a,{onClick:function(){return s()},color:"primary"},c),o.a.createElement(tn.a,{onClick:function(){return u()},color:"primary",autoFocus:!0},r)))}var sn=n(312);function un(e){var t=e.open,n=e.title,a=e.description,i=e.textFieldId,r=e.textFieldLabel,l=e.confirmButtonText,c=void 0===l?"Import":l,s=e.cancelButtonText,u=void 0===s?"Cancel":s,d=e.onClose,h=e.onConfirm,f=e.onValidate,p=o.a.useState(!1),v=Object(m.a)(p,2),b=v[0],g=v[1],E=function(){g(!1),d()};return o.a.createElement(nn.a,{open:t,onClose:E,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ln.a,{id:"alert-dialog-title"},n),o.a.createElement(on.a,null,o.a.createElement(rn.a,{id:"alert-dialog-description"},o.a.createElement(Ce,null,a)),o.a.createElement(sn.a,{autoFocus:!0,margin:"dense",id:i,label:r,error:b,multiline:!0,rows:"10",variant:"outlined",fullWidth:!0})),o.a.createElement(an.a,null,o.a.createElement(tn.a,{onClick:E,color:"primary"},u),o.a.createElement(tn.a,{onClick:function(){try{var e=document.getElementById(i).value,t=JSON.parse(e),n=f(t);g(!n),n&&h(t)}catch(a){g(!0)}},color:"primary",autoFocus:!0},c)))}function dn(e){var t=e.open,n=e.title,a=e.min,i=void 0===a?0:a,r=e.max,l=void 0===r?100:r,c=e.step,s=void 0===c?1:c,u=e.positionFieldId,d=e.positionFieldLabel,h=e.confirmButtonText,f=void 0===h?"Move":h,p=e.cancelButtonText,v=void 0===p?"Cancel":p,b=e.onClose,g=e.onConfirm,E=o.a.useState(!1),y=Object(m.a)(E,2),C=y[0],w=y[1],O=function(){w(!1),b()};return o.a.createElement(nn.a,{open:t,onClose:O,"aria-labelledby":"alert-dialog-title"},o.a.createElement(ln.a,{id:"alert-dialog-title"},n),o.a.createElement(on.a,null,o.a.createElement(sn.a,{autoFocus:!0,id:u,label:d,error:C,inputProps:{min:i,max:l,step:s},defaultValue:i,type:"number",size:"small",variant:"outlined",fullWidth:!0})),o.a.createElement(an.a,null,o.a.createElement(tn.a,{onClick:O,color:"primary"},v),o.a.createElement(tn.a,{onClick:function(){var e,t=document.getElementById(u).value,n=(e=t,!isNaN(+e)&&/^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/.test(e));w(!n),n&&g(+t)},color:"primary",autoFocus:!0},f)))}var mn=n(159),hn=n.n(mn),fn=n(105),pn=n.n(fn),vn=n(154),bn=n.n(vn),gn=n(155),En=n.n(gn),yn=n(317),Cn=Object(we.a)((function(e){return Object(yn.a)({channelsOptionsIcon:{top:"50%",right:"16px",position:"absolute",transform:"translateY(-50%)"},menuIcon:{fontSize:20,marginRight:e.spacing(1),verticalAlign:"middle"},subheader:{position:"relative"}})}));function wn(e){var t,n=e.className,a=e.channels,i=e.selectedIndex,r=void 0===i?W.All:i,l=e.todaysVideosCount,c=e.recentVideosCount,u=e.watchLaterVideosCount,d=e.onShowAll,h=e.onShowTodaysVideos,f=e.onShowRecentVideos,p=e.onShowWatchLaterVideos,v=e.onRefresh,b=e.onSelect,E=e.onDelete,y=e.onSave,C=e.onSelectedIndexChange,w=e.onClearRecentVideos,O=e.onAddVideosToWatchLater,k=e.onClearWatchLaterVideos,x=e.onImport,j=Cn(),S=Object(Ue.c)(Qe),V=Object(m.a)(S,2),R=V[0],I=V[1],A=Object(Ue.c)(Xe),B=Object(m.a)(A,1)[0],P=Object(_e.b)(rt),z=[Object(_e.a)($e),Object(_e.b)(qe)],H=z[0],M=z[1],F=o.a.useState(!1),K=Object(m.a)(F,2),U=K[0],_=K[1],J=o.a.useState(-1),Y=Object(m.a)(J,2),$=Y[0],q=Y[1],G=o.a.useState(null),Q=Object(m.a)(G,2),Z=Q[0],ee=Q[1],te=o.a.useState(-1),ne=Object(m.a)(te,2),ae=ne[0],oe=ne[1],ie=o.a.useState(!1),re=Object(m.a)(ie,2),le=re[0],ce=re[1],se=o.a.useState(!1),ue=Object(m.a)(se,2),de=ue[0],me=ue[1],he=o.a.useState(!1),fe=Object(m.a)(he,2),pe=fe[0],ve=fe[1],ge=o.a.useState(!1),Ee=Object(m.a)(ge,2),ye=Ee[0],Ce=Ee[1],we=o.a.useState(-1),Oe=Object(m.a)(we,2),ke=Oe[0],xe=Oe[1],Se=function(){return a.find((function(e,t){return t===r}))},Ne=function(e,t){Te();var n=Se(),o=function(e,t,n){var a=Array.from(e),o=a.splice(t,1),i=Object(m.a)(o,1)[0];return a.splice(n,0,i),a}(a,e,t);y(o),n&&C(o.indexOf(n))},Ve=function(){_(!1)},Re=function(e){Te(),y(Object(s.a)(e)),r<0&&r!==W.None&&v(r)},Ie=function(e,t){a[e].notifications=Object(N.a)(Object(N.a)({},a[e].notifications),{},{isDisabled:!t}),Re(a)},Ae=function(e,t){e.stopPropagation(),ee(e.currentTarget),oe(t)},Te=function(){ee(null),oe(-1)},Be=function(){return function(e){var t=0;return function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(3)+" KiB":e<1073741824?(e/1048576).toFixed(3)+" MiB":(e/1073741824).toFixed(3)+" GiB"}(function e(n){if(null!==n&&void 0!==n)switch(typeof n){case"number":t+=8;break;case"string":t+=2*n.length;break;case"boolean":t+=4;break;case"object":var a=Object.prototype.toString.call(n).slice(8,-1);if("Object"===a||"Array"===a)for(var o in n)n.hasOwnProperty(o)&&e(n[o]);else t+=2*n.toString().length}return t}(e))}(R)},Pe=function(){ce(!1)},De=function(){Te();var e=JSON.stringify(a,null,4);!function(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=document.createElement("a"),a=URL.createObjectURL(e);n.href=a,n.download=t,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)}),0)}}(new Blob([e],{type:"text/json"}),"channels.json")},We=function(){Ce(!1)},ze=function(){xe(-1)},Me=function(){me(!1)},Fe=function(){ve(!1)},Ke=function(e){var t=H[e]||Ye;return o.a.createElement("div",null," ",o.a.createElement(Qt.a,{disabled:t===je.ASC,onClick:function(t){Te(),M(Object(g.a)({},e,je.ASC)),v(e,t,je.ASC)}},o.a.createElement(_t.a,{className:j.menuIcon})," Sort by Asc"),o.a.createElement(Qt.a,{disabled:t===je.DESC,onClick:function(t){Te(),M(Object(g.a)({},e,je.DESC)),v(e,t,je.DESC)}},o.a.createElement(Yt.a,{className:j.menuIcon})," Sort by Desc"))},Je=L()&&D();return o.a.createElement("div",{className:n||""},o.a.createElement(en.a,{onDragEnd:function(e){e.destination&&Ne(e.source.index,e.destination.index)}},o.a.createElement(en.c,{droppableId:"droppable"},(function(e,t){return o.a.createElement(Xt.a,{rootRef:e.innerRef},o.a.createElement(yt.a,{dense:!0,subheader:o.a.createElement(Ct.a,{className:j.subheader},"Channels",o.a.createElement(X.a,{edge:"end","aria-label":"channels-options",size:"small",className:j.channelsOptionsIcon,onClick:function(e){return Ae(e,"channels-options")}},o.a.createElement(It.a,{fontSize:"small"})),o.a.createElement(Zt.a,{id:"menu-channels-options",anchorEl:Z,keepMounted:!0,open:"channels-options"===ae,onClose:Te},o.a.createElement(Qt.a,{onClick:function(){return De()}},o.a.createElement(zt.a,{className:j.menuIcon}),"Export"),o.a.createElement(Qt.a,{onClick:function(){return Te(),void Ce(!0)}},o.a.createElement(Mt.a,{className:j.menuIcon}),"Import"),o.a.createElement(Le.a,{title:"Cache size: "+Be(),"aria-label":"clear-cache"},o.a.createElement(Qt.a,{onClick:function(){return Te(),void ce(!0)}},o.a.createElement(Dt.a,{className:j.menuIcon}),"Clear cache")))),style:(t.isDraggingOver,{})},o.a.createElement(wt.a,{button:!0,key:"all",selected:r===W.All,onClick:function(){return d()}},o.a.createElement(Ot.a,null,o.a.createElement(Gt.a,{color:"secondary",badgeContent:a.length},o.a.createElement(be.a,null,o.a.createElement(St.a,null)))),o.a.createElement(kt.a,{primary:"All"}),(null===a||void 0===a?void 0:a.length)>0&&o.a.createElement(xt.a,null,o.a.createElement(X.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return Ae(e,W.All)}},o.a.createElement(It.a,{fontSize:"small"})),o.a.createElement(Zt.a,{id:"menu-all-channels",anchorEl:Z,keepMounted:!0,open:ae===W.All,onClose:Te},Ke(W.All),o.a.createElement(Qt.a,{onClick:function(e){return function(e){v(W.All,e)}(e)}},o.a.createElement(Vt.a,{className:j.menuIcon})," Refresh")))),o.a.createElement(wt.a,{button:!0,key:"today",selected:r===W.TodaysVideos,onClick:function(){return h()}},o.a.createElement(Ot.a,null,o.a.createElement(Gt.a,{color:"secondary",badgeContent:l},o.a.createElement(be.a,null,o.a.createElement(bn.a,null)))),o.a.createElement(kt.a,{primary:"Today's videos"}),(null===a||void 0===a?void 0:a.length)>0&&o.a.createElement(xt.a,null,o.a.createElement(X.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return Ae(e,W.TodaysVideos)}},o.a.createElement(It.a,{fontSize:"small"})),o.a.createElement(Zt.a,{id:"menu-todays-videos",anchorEl:Z,keepMounted:!0,open:ae===W.TodaysVideos,onClose:Te},Ke(W.TodaysVideos),o.a.createElement(Qt.a,{onClick:function(e){return function(e){v(W.TodaysVideos,e)}(e)}},o.a.createElement(Vt.a,{className:j.menuIcon})," Refresh")))),o.a.createElement(wt.a,{button:!0,key:"recent",selected:r===W.RecentVideos,onClick:function(){return f()}},o.a.createElement(Ot.a,null,o.a.createElement(Gt.a,{color:"secondary",badgeContent:c},o.a.createElement(be.a,null,o.a.createElement(En.a,null)))),o.a.createElement(kt.a,{primary:"Recent videos"}),(null===a||void 0===a?void 0:a.length)>0&&o.a.createElement(xt.a,null,o.a.createElement(X.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return Ae(e,W.RecentVideos)}},o.a.createElement(It.a,{fontSize:"small"})),o.a.createElement(Zt.a,{id:"menu-recent-videos",anchorEl:Z,keepMounted:!0,open:ae===W.RecentVideos,onClose:Te},Ke(W.RecentVideos),o.a.createElement(Qt.a,{onClick:function(e){return function(e){Te(),v(W.RecentVideos,e)}(e)}},o.a.createElement(Vt.a,{className:j.menuIcon})," Refresh"),c>0&&r===W.RecentVideos&&o.a.createElement(Qt.a,{onClick:function(){return Te(),void O()}},o.a.createElement(pn.a,{className:j.menuIcon})," Add all to watch later list"),c>0&&o.a.createElement(Qt.a,{onClick:function(){return Te(),void me(!0)}},o.a.createElement(Kt.a,{className:j.menuIcon})," Clear")))),o.a.createElement(wt.a,{button:!0,key:"watchLater",selected:r===W.WatchLaterVideos,onClick:function(){return p()}},o.a.createElement(Ot.a,null,o.a.createElement(Gt.a,{color:"secondary",badgeContent:u},o.a.createElement(be.a,null,o.a.createElement(pn.a,null)))),o.a.createElement(kt.a,{primary:"Watch later"}),o.a.createElement(xt.a,null,o.a.createElement(X.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return Ae(e,W.WatchLaterVideos)}},o.a.createElement(It.a,{fontSize:"small"})),o.a.createElement(Zt.a,{id:"menu-watch-later-videos",anchorEl:Z,keepMounted:!0,open:ae===W.WatchLaterVideos,onClose:Te},Ke(W.WatchLaterVideos),u>0&&o.a.createElement(Qt.a,{onClick:function(){ve(!0)}},o.a.createElement(Kt.a,{className:j.menuIcon})," Clear")))),a.map((function(e,t){return o.a.createElement(en.b,{key:e.id,draggableId:e.id,index:t},(function(n,i){var l,c,s,u;return o.a.createElement(wt.a,Object.assign({ContainerProps:{ref:n.innerRef}},n.draggableProps,n.dragHandleProps,{style:(c=i.isDragging,s=e.isHidden,u=n.draggableProps.style,Object(N.a)(Object(N.a)(Object(N.a)({},u),c&&{background:"rgb(235,235,235)"}),s&&{opacity:.5,textDecoration:"line-through"})),button:!0,selected:t===r,onClick:function(){return b(e,t)}}),o.a.createElement(Ot.a,null,o.a.createElement(be.a,{alt:e.title,src:e.thumbnail})),o.a.createElement(kt.a,{primary:e.title}),o.a.createElement(xt.a,null,o.a.createElement(X.a,{edge:"end","aria-label":"more",size:"small",onClick:function(e){return Ae(e,t)}},o.a.createElement(It.a,{fontSize:"small"})),o.a.createElement(Zt.a,{id:"menu-"+t,anchorEl:Z,keepMounted:!0,open:ae===t,onClose:Te},Ke(t),o.a.createElement(Qt.a,{onClick:function(){return function(e){Te(),L()?T(e.url):window.open(e.url,"_blank")}(e)}},o.a.createElement(qt.a,{className:j.menuIcon})," Open channel"),o.a.createElement(Qt.a,{onClick:function(){return function(e,t){Te(),b(e,t,!0)}(e,t)}},o.a.createElement(Vt.a,{className:j.menuIcon})," Refresh"),Je&&t>0&&o.a.createElement(Qt.a,{onClick:function(){return Ne(t,t-1)}},o.a.createElement(Lt.a,{className:j.menuIcon}),"Move up"),Je&&t<a.length-1&&o.a.createElement(Qt.a,{onClick:function(){return Ne(t,t+1)}},o.a.createElement(Bt.a,{className:j.menuIcon}),"Move down"),Je&&o.a.createElement(Qt.a,{onClick:function(){return e=t,Te(),void xe(e);var e}},o.a.createElement(hn.a,{className:j.menuIcon}),"Move to position"),e.isHidden?o.a.createElement(Qt.a,{onClick:function(){return function(e){a[e].isHidden=!1,Re(a)}(t)}},o.a.createElement(He.a,{className:j.menuIcon})," Unhide"):o.a.createElement(Qt.a,{onClick:function(){return function(e){a[e].isHidden=!0,Re(a)}(t)}},o.a.createElement(ht.a,{className:j.menuIcon})," Hide"),L()&&B.enableRecentVideosNotifications&&((null===(l=e.notifications)||void 0===l?void 0:l.isDisabled)?o.a.createElement(Qt.a,{onClick:function(){return function(e){Ie(e,!0)}(t)}},o.a.createElement(pt.a,{className:j.menuIcon})," Enable notifications"):o.a.createElement(Qt.a,{onClick:function(){return function(e){Ie(e,!1)}(t)}},o.a.createElement(bt.a,{className:j.menuIcon})," Disable notifications")),o.a.createElement(Qt.a,{onClick:function(){return function(e){Te(),q(e),_(!0)}(t)}},o.a.createElement(Kt.a,{className:j.menuIcon})," Delete"))))}))})),e.placeholder))}))),o.a.createElement(cn,{open:le,title:"Clear cache",description:"This action is irreversible, would you like to continue?",confirmButtonText:"Clear",onClose:Pe,onConfirm:function(){I({}),P({message:"Cache cleared!",icon:"success",showRefreshButton:!0}),Pe()}}),o.a.createElement(cn,{open:de,title:"Clear recent videos",description:"Would you like to reset/clear recent videos?",confirmButtonText:"Clear",onClose:Me,onConfirm:function(){w(),Me()}}),o.a.createElement(cn,{open:pe,title:"Clear watch later videos",description:"Would you like to reset/clear watch later videos?",confirmButtonText:"Clear",onClose:Fe,onConfirm:function(){k(),Fe()}}),o.a.createElement(cn,{open:U,title:"Delete Channel",description:"Would you like to delete <strong>".concat(null===(t=a[$])||void 0===t?void 0:t.title,"</strong> channel?"),confirmButtonText:"Delete",onClose:Ve,onConfirm:function(){var e=Se();E($),e&&r!==$&&C(a.filter((function(e,t){return t!==$})).indexOf(e)),Ve()}}),o.a.createElement(un,{open:ye,title:"Import Channels",description:"Copy & paste below the content of <strong>channels.json</strong> file. Notice that your current channels list will be overrided!",textFieldId:"channels-to-import",textFieldLabel:"Channels (json)",onClose:We,onConfirm:function(e){x(e),We()},onValidate:function(e){var t=!0;return e.forEach((function(e){e.id&&e.title&&e.thumbnail&&e.description&&e.url||(t=!1)})),t}}),o.a.createElement(dn,{open:ke>-1,title:"Move Channel To Position",min:1,max:a.length,positionFieldId:"channel-position",positionFieldLabel:"Position",onClose:ze,onConfirm:function(e){var t=e-1;t!==ke&&Ne(ke,t),ze()}}))}var On=n(316);function kn(e){var t=e.message,n=e.open,a=e.onClose,i=e.autoHideDuration,r=void 0===i?6e3:i,l=e.anchorOrigin,c=void 0===l?{vertical:"top",horizontal:"center"}:l;return o.a.createElement(On.a,{anchorOrigin:c,open:n,autoHideDuration:r,onClose:function(){return a()},message:t&&o.a.createElement(Ce,null,t),action:o.a.createElement(tn.a,{color:"secondary",size:"small",onClick:function(){return a()}},"Close")})}var xn,jn=n(244),Sn=n(320),Nn=n(313);!function(e){e[e.String=0]="String",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean"}(xn||(xn={}));var Vn=Object(we.a)((function(e){return Object(yn.a)({settingsAppBar:{position:"relative",backgroundColor:"#f44336"},settingsTitle:{marginLeft:e.spacing(2),flex:1},container:{width:"223px",height:"40px"},select:{padding:"10px 26px 10px 12px","&:-moz-focusring":{color:"transparent",textShadow:"0 0 0 #000"}},optionLabel:{maxWidth:"70%"}})})),Rn=o.a.forwardRef((function(e,t){return o.a.createElement(jn.a,Object.assign({direction:"up",ref:t},e))}));function In(e){var t=e.open,n=e.onClose,a=Vn(),i=Object(Ue.c)(Xe),r=Object(m.a)(i,2),l=r[0],c=r[1],s=Object(_e.b)(rt),u=function(e,t){var n=document.getElementById(e);if(!n)return l[e];switch(t){case xn.Number:return+n.value;case xn.Boolean:return n.checked;case xn.String:default:return n.value}},d=function(e){var t=e.target;"number"===t.type&&(!t.value.match(/^\d+$/)||+t.value<+t.min?t.value=t.min:+t.value>+t.max&&(t.value=t.max))};return o.a.createElement(nn.a,{fullScreen:!0,open:t,onClose:function(){return n()},TransitionComponent:Rn},o.a.createElement(Y.a,{color:"secondary",className:a.settingsAppBar},o.a.createElement($.a,null,o.a.createElement(X.a,{edge:"start",color:"inherit",onClick:function(){return n()},"aria-label":"close"},o.a.createElement(ye.a,null)),o.a.createElement(q.a,{variant:"h6",className:a.settingsTitle},"Settings"),o.a.createElement(tn.a,{autoFocus:!0,color:"inherit",onClick:function(){return c({defaultChannelSelection:u("defaultChannelSelection",xn.Number),videosPerChannel:u("videosPerChannel",xn.Number),videosAnteriority:u("videosAnteriority",xn.Number),sortVideosBy:u("sortVideosBy",xn.String),apiKey:u("apiKey",xn.String),autoVideosCheckRate:u("autoVideosCheckRate",xn.Number),enableRecentVideosNotifications:u("enableRecentVideosNotifications",xn.Boolean),autoPlayVideos:u("autoPlayVideos",xn.Boolean),openVideosInInactiveTabs:u("openVideosInInactiveTabs",xn.Boolean),openChannelsOnNameClick:u("openChannelsOnNameClick",xn.Boolean),hideEmptyChannels:u("hideEmptyChannels",xn.Boolean),autoCloseDrawer:u("autoCloseDrawer",xn.Boolean),autoClearRecentVideos:u("autoClearRecentVideos",xn.Boolean),autoRemoveWatchLaterVideos:u("autoRemoveWatchLaterVideos",xn.Boolean),autoClearCache:u("autoClearCache",xn.Boolean)}),n(),void s({message:"Settings saved!",icon:"success",showRefreshButton:!0})}},"save"))),o.a.createElement(yt.a,null,o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Default channel selection",secondary:"The channel menu that would be selected by default",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Nn.a,{native:!0,inputProps:{id:"defaultChannelSelection",className:a.select},variant:"outlined",color:"secondary",className:a.container,defaultValue:null===l||void 0===l?void 0:l.defaultChannelSelection},o.a.createElement("option",{value:W.All},"All"),o.a.createElement("option",{value:W.TodaysVideos},"Today's videos"),o.a.createElement("option",{value:W.RecentVideos},"Recent videos"),o.a.createElement("option",{value:W.WatchLaterVideos},"Watch later")))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Max videos per channel",secondary:"The maximum number of videos to show per channel",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(sn.a,{id:"videosPerChannel",type:"number",size:"small",variant:"outlined",color:"secondary",inputProps:{min:3,max:50,step:1},className:a.container,defaultValue:null===l||void 0===l?void 0:l.videosPerChannel,onChange:function(e){return d(e)}}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Anteriority of videos (in days)",secondary:"Number of days to subtract from the current date",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(sn.a,{id:"videosAnteriority",type:"number",size:"small",variant:"outlined",color:"secondary",inputProps:{min:1,max:365,step:7},className:a.container,defaultValue:null===l||void 0===l?void 0:l.videosAnteriority,onChange:function(e){return d(e)}}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Sort videos by",secondary:"Videos sorting criteria (requires clearing cache)",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Nn.a,{native:!0,inputProps:{id:"sortVideosBy",className:a.select},variant:"outlined",color:"secondary",className:a.container,defaultValue:null===l||void 0===l?void 0:l.sortVideosBy},o.a.createElement("option",{value:"date"},"Date"),o.a.createElement("option",{value:"views"},"Views")))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:o.a.createElement(q.a,{variant:"body1",component:"span"},"Custom API key (",o.a.createElement(he.a,{href:"https://www.slickremix.com/docs/get-api-key-for-youtube/",target:"_blank",rel:"noopener"},"How to get an API key?"),")"),secondary:o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{variant:"body2",component:"span"},"Replaces the default youtube API key used to fetch channels & videos data"),o.a.createElement("br",null),o.a.createElement(q.a,{variant:"body2",component:"span"},"(will apply the next time you ",L()?"open the extension popup":"reload the app",")")),className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(sn.a,{id:"apiKey",type:"text",placeholder:"AIzaSyDOkg-u9jnhP-WnzX5WPJyV1sc5QQrtuyc",size:"small",variant:"outlined",color:"secondary",inputProps:{minLength:39},className:a.container,defaultValue:null===l||void 0===l?void 0:l.apiKey,onChange:function(e){return d(e)}}))),L()&&o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Auto videos check rate (in minutes)",secondary:"Number of minutes to wait before auto-checking for recent videos",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(sn.a,{id:"autoVideosCheckRate",type:"number",size:"small",variant:"outlined",color:"secondary",inputProps:{min:5,max:720,step:1},className:a.container,defaultValue:null===l||void 0===l?void 0:l.autoVideosCheckRate,onChange:function(e){return d(e)}}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Enable recent videos notifications",secondary:"Notifies you when recent videos get posted",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"enableRecentVideosNotifications",defaultChecked:null===l||void 0===l?void 0:l.enableRecentVideosNotifications,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Auto play videos once opened",secondary:"Auto-play permission should be granted for youtube.com",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"autoPlayVideos",defaultChecked:null===l||void 0===l?void 0:l.autoPlayVideos,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Open videos in inactive tabs",secondary:"Will open videos in new tabs without losing focus of the current tab",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"openVideosInInactiveTabs",defaultChecked:null===l||void 0===l?void 0:l.openVideosInInactiveTabs,color:"secondary"})))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Open channels on name click",secondary:'Will open channels directly by clicking on their name, replaces the icon button "open channel"',className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"openChannelsOnNameClick",defaultChecked:null===l||void 0===l?void 0:l.openChannelsOnNameClick,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Hide empty channels",secondary:"Hide all empty channels by default",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"hideEmptyChannels",defaultChecked:null===l||void 0===l?void 0:l.hideEmptyChannels,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Auto close drawer",secondary:"Auto close channels list drawer when clicking outside",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"autoCloseDrawer",defaultChecked:null===l||void 0===l?void 0:l.autoCloseDrawer,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Auto clear recent videos",secondary:"Auto-clear recent videos before each startup",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"autoClearRecentVideos",defaultChecked:null===l||void 0===l?void 0:l.autoClearRecentVideos,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Auto remove watch later videos",secondary:'Auto-remove watch later videos when clicking on "Watch now"',className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"autoRemoveWatchLaterVideos",defaultChecked:null===l||void 0===l?void 0:l.autoRemoveWatchLaterVideos,color:"secondary"}))),o.a.createElement(G.a,null),o.a.createElement(wt.a,null,o.a.createElement(kt.a,{primary:"Auto clear videos cache",secondary:"Cache may speed up loading time & reduce API quota consumption",className:a.optionLabel}),o.a.createElement(xt.a,null,o.a.createElement(Sn.a,{id:"autoClearCache",defaultChecked:null===l||void 0===l?void 0:l.autoClearCache,color:"secondary"})))))}var An=n(311),Ln=Object(we.a)({alert:{color:"#fff",backgroundColor:"#323232"}});function Tn(e){return o.a.createElement(jn.a,Object.assign({},e,{direction:"up"}))}function Bn(e){var t=e.open,n=e.snackbarKey,a=e.message,i=e.icon,r=e.onClose,l=e.onRefresh,c=e.autoHideDuration,s=void 0===c?6e3:c,u=e.showRefreshButton,d=void 0===u||u,m=Ln(),h=function(e,t){"clickaway"!==t&&r()};return o.a.createElement(On.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},key:n,open:t,autoHideDuration:s,TransitionComponent:Tn,onClose:h},o.a.createElement(An.a,{severity:i,className:m.alert,variant:"filled",onClose:h,action:o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(tn.a,{color:"secondary",size:"small",onClick:function(e){return l(null,e)}},"Refresh"),o.a.createElement(X.a,{size:"small","aria-label":"close",color:"inherit",onClick:h},o.a.createElement(ye.a,{fontSize:"small"})))},a))}var Pn=Object(we.a)((function(e){return Object(yn.a)({root:{display:"flex",minWidth:"700px",minHeight:L()?"500px":"100vh",maxHeight:L()?"500px":"none",maxWidth:L()&&D()?"700px":"none"},appBar:{backgroundColor:"#f44336",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(1.5)},hide:{display:"none"},disabled:{pointerEvents:"none",userSelect:"none"},grow:{flexGrow:1},logo:{display:"flex",marginRight:e.spacing(3.5),cursor:"default","& > img":{width:32,height:32,filter:"contrast(150%) brightness(100%)"}},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(N.a)(Object(N.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},container:{display:"flex",width:"100%",height:"80%",justifyContent:"center","&.expanded":{height:"100%"}},centered:{alignSelf:"center",textAlign:"center"},heartIcon:{color:"#e25555",fontSize:16,verticalAlign:"middle"},madeWithLove:{padding:e.spacing(1,0)}})})),Dn=n(160),Wn=n.n(Dn),zn=n(167),Hn=n.n(zn);function Mn(e){var t=Pn(),n=Object(U.a)(),a=Object(Ue.c)(Ze),i=Object(m.a)(a,2),r=i[0],l=i[1],c=Object(Ue.c)(Je),u=Object(m.a)(c,2),d=u[0],h=u[1],f=Object(_e.a)($e),p=o.a.useState(!1),v=Object(m.a)(p,2),b=v[0],E=v[1],y=o.a.useState(e.isReady),w=Object(m.a)(y,2),O=w[0],k=w[1],V=o.a.useState(!1),R=Object(m.a)(V,2),T=R[0],B=R[1],P=Object(Ue.c)(et),D=Object(m.a)(P,2),z=D[0],H=D[1],M=Object(Ue.c)(Xe),F=Object(m.a)(M,1)[0],Q=o.a.useState(!1),ee=Object(m.a)(Q,2),ne=ee[0],oe=ee[1],re=[Object(_e.a)(ot),Object(_e.b)(rt),Object(_e.b)(lt)],ce=re[0],ue=re[1],pe=re[2],ve=o.a.useState(null),be=Object(m.a)(ve,2),ge=be[0],Ee=be[1],ye=Object(Ue.c)(Qe),Ce=Object(m.a)(ye,2),we=Ce[0],Oe=Ce[1],ke=o.a.useState(0),Se=Object(m.a)(ke,2),Ne=Se[0],Ve=Se[1],Re=o.a.useState(0),Ie=Object(m.a)(Re,2),Ae=Ie[0],Le=Ie[1],Te=o.a.useState(0),Be=Object(m.a)(Te,2),Pe=Be[0],De=Be[1];o.a.useEffect((function(){return k(e.isReady)}),[e.isReady]),o.a.useEffect((function(){st.warn("isReady changed",O),O&&(r.length&&!d.length?at(F.defaultChannelSelection,!0):z!==F.defaultChannelSelection&&H(F.defaultChannelSelection),We())}),[O]),o.a.useEffect((function(){st.warn("channels changed",{isReady:O}),O&&(C({channels:r}),We())}),[r]),o.a.useEffect((function(){st.warn("settings changed",{isReady:O}),O&&C({settings:F})}),[F]),o.a.useEffect((function(){st.warn("cache changed",{isReady:O}),O&&(C({cache:we}),We())}),[we]);var We=function(){st.log("----------------------"),st.log("counting videos");var e=0,t=0,n=0;Object.keys(we).forEach((function(a){var o=r.find((function(e){return e.id===a}));if(o&&!o.isHidden){var i=we[a].filter((function(e){return e.isRecent})).length,l=we[a].filter((function(e){return j(e.publishedAt)})).length,c=we[a].filter((function(e){return e.isToWatchLater})).length;st.log(o.title,{recent:i,todays:l,watchLater:c}),e+=i,t+=l,n+=c}})),st.log("total count",{recent:e,todays:t,watchLater:n}),Ve(e),Le(t),De(n)},ze=function(){E(!1)},He=function(e){console.error(e),Ee(e)},Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return new Promise((function(a,o){var i;!t&&(null===(i=we[e.id])||void 0===i?void 0:i.length)?(st.log("----------------------"),st.log("load videos from cache",e.title,we[e.id]),a(n(we[e.id]).slice(0,F.videosPerChannel))):I(e.id,x(F.videosAnteriority)).then((function(t){if(st.log("----------------------"),st.log("activities of",e.title,t),null===t||void 0===t?void 0:t.items){var o,i,r=t.items.map((function(e){var t;return null===(t=e.contentDetails.upload)||void 0===t?void 0:t.videoId})).filter((function(e){return null===e||void 0===e?void 0:e.length})),l=(null===(o=we[e.id])||void 0===o?void 0:o.length)?we[e.id].map((function(e){return e.id})):[],c=r.filter((function(e,t){return r.indexOf(e)===t})).slice(0,F.videosPerChannel).filter((function(e){return-1===l.indexOf(e)}));if(c.length)st.log("getting recent videos of",e.title,{recentVideosIds:c,cacheVideosIds:l}),A(c).then((function(t){var o,i;st.log("recent videos data",t);var r=new Date;t=t.map((function(e){var t=new Date(e.publishedAt);return S(r,t)<=24&&(e.isRecent=!0),e})),we[e.id]=(null===(o=we[e.id])||void 0===o?void 0:o.length)?[].concat(Object(s.a)(t),Object(s.a)(we[e.id])):t;var l=we[e.id].sort((function(e,t){var n,a;return"views"===F.sortVideosBy&&(null===(n=e.views)||void 0===n?void 0:n.count)&&(null===(a=t.views)||void 0===a?void 0:a.count)?t.views.count-e.views.count:t.publishedAt-e.publishedAt}));Oe(Object(N.a)({},we)),a((null===(i=n(l))||void 0===i?void 0:i.slice(0,F.videosPerChannel))||[])})).catch((function(e){He(e),a([])}));else st.log("no recent videos for this channel"),a((null===(i=n(we[e.id]))||void 0===i?void 0:i.slice(0,F.videosPerChannel))||[])}else a([])})).catch((function(e){He(e),a([])}))}))},Fe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;return st.log("selected channel:",e),H(t),void 0!==a&&null!==a||(a=f[t]),B(!0),Me(e,n).then((function(e){a&&(e=e.sort(Ye(a))),h(e||[]),B(!1),window.scrollTo(0,0)}))},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;H(e),B(!0),h([]);var i=[],l=[],c=o||r;return c.filter((function(e){return!e.isHidden})).forEach((function(e){var o=Me(e,a,(function(e){return t?null===e||void 0===e?void 0:e.filter(t):e})).then((function(t){st.log("----------------------"),st.log(e.title,t),n&&(t=t.sort(n)),l.push.apply(l,Object(s.a)(t))}));i.push(o)})),Promise.all(i).finally((function(){h(l),B(!1)}))},Ye=function(e){return function(t,n){return e===je.ASC?t.publishedAt-n.publishedAt:n.publishedAt-t.publishedAt}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f[W.All];return Ke(W.All,null,Ye(t),e)},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f[W.TodaysVideos];return Ke(W.TodaysVideos,(function(e){return j(e.publishedAt)}),Ye(t),e)},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f[W.RecentVideos];return Ke(W.RecentVideos,(function(e){return e.isRecent}),Ye(t),e)},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f[W.WatchLaterVideos];return Ke(W.WatchLaterVideos,(function(e){return e.isToWatchLater}),Ye(t),e)},at=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(e){case W.TodaysVideos:return Ge(t,n);case W.RecentVideos:return tt(t,n);case W.WatchLaterVideos:return nt(t,n);case W.All:default:return qe(t,n)}},it=function(e,t){Object.keys(we).forEach((function(t){we[t]=we[t].map((function(t){return e(t),t}))})),Oe(Object(N.a)({},we)),t&&t()},ct=function(e,t,n){return t&&t.stopPropagation(),void 0!==e&&null!==e||(e=z),e>=0?Fe(r[e],e,!0,n):at(e,!0,n)};return o.a.createElement("div",{className:t.root},o.a.createElement(J.a,null),o.a.createElement(Y.a,{color:"secondary",position:"fixed",className:Object(K.a)(t.appBar,Object(g.a)({},t.appBarShift,b))},o.a.createElement($.a,null,o.a.createElement(X.a,{color:"inherit","aria-label":"open drawer",onClick:function(){E(!0)},edge:"start",className:Object(K.a)(t.menuButton,b&&t.hide)},o.a.createElement(Z.a,null)),o.a.createElement("span",{title:"Youtube viewer",className:t.logo},o.a.createElement("img",{alt:"logo",src:"icons/128.png"})),o.a.createElement(xe,{onSelect:function(e){st.log("added channel:",e);var t=r.find((function(t){return t.id===e.id}));t?H(r.indexOf(t)):(l([].concat(Object(s.a)(r),[e])),H(r.length)),B(!0),Me(e).then((function(e){h(e||[]),B(!1)}))},onError:He}),o.a.createElement("div",{className:t.grow}),o.a.createElement(X.a,{edge:"end","aria-label":"settings",color:"inherit",onClick:function(e){return function(e){e.stopPropagation(),oe(!0)}(e)}},o.a.createElement(le.a,null)))),o.a.createElement(_.a,{className:t.drawer,variant:"persistent",anchor:"left",open:b,classes:{paper:t.drawerPaper}},o.a.createElement("div",{className:t.drawerHeader},o.a.createElement(X.a,{onClick:ze},"ltr"===n.direction?o.a.createElement(te.a,null):o.a.createElement(ae.a,null))),o.a.createElement(G.a,null),o.a.createElement(wn,{className:T?t.disabled:"",channels:r,selectedIndex:z,todaysVideosCount:Ae,recentVideosCount:Ne,watchLaterVideosCount:Pe,onShowAll:qe,onShowTodaysVideos:Ge,onShowRecentVideos:tt,onShowWatchLaterVideos:nt,onRefresh:ct,onSelect:Fe,onDelete:function(e){l(r.filter((function(t,n){return n!==e}))),z===e&&(h([]),H(W.None))},onSave:l,onSelectedIndexChange:H,onClearRecentVideos:function(){it((function(e){return e.isRecent=!1}),(function(){z===W.RecentVideos&&ct(W.RecentVideos)}))},onAddVideosToWatchLater:function(){var e=!1;d.forEach((function(t){var n=we[null===t||void 0===t?void 0:t.channelId].findIndex((function(e){return e.id===(null===t||void 0===t?void 0:t.id)}));n>-1&&!we[t.channelId][n].isToWatchLater&&(we[t.channelId][n].isToWatchLater=!0,e=!0)})),e&&(Oe(Object(N.a)({},we)),ue({message:"All videos added to watch later list!",icon:"success"}))},onClearWatchLaterVideos:function(){it((function(e){return e.isToWatchLater=!1}),(function(){z===W.WatchLaterVideos&&h([])}))},onImport:function(e){st.log("importing channels",e),l(e),Ke(W.All,null,null,!0,e),ue({message:"Channels imported!",icon:"success",showRefreshButton:!0})}}),o.a.createElement("div",{className:t.grow}),o.a.createElement(G.a,null),o.a.createElement(q.a,{variant:"caption",align:"center",className:t.madeWithLove},"Made with ",o.a.createElement(se.a,{className:t.heartIcon})," by AXeL",o.a.createElement(he.a,{href:"https://github.com/AXeL-dev/youtube-viewer",target:"_blank",rel:"noopener"},o.a.createElement(X.a,{edge:"end",size:"small","aria-label":"github link"},o.a.createElement(de.a,{fontSize:"inherit"}))))),o.a.createElement("main",{className:Object(K.a)(t.content,Object(g.a)({},t.contentShift,b)),onClick:function(){return F.autoCloseDrawer&&ze()}},o.a.createElement("div",{className:t.drawerHeader}),O&&z!==W.None&&((null===r||void 0===r?void 0:r.length)?o.a.createElement(Wn.a,{onRefresh:function(e,t){(z>=0?Fe(r[z],z,!0):ct(z)).then((function(){e()})).catch((function(){t()}))},icon:o.a.createElement(Yt.a,{className:"arrowicon"}),distanceToRefresh:50,resistance:5,style:{position:"relative",height:L()?"calc(100% - 64px)":"calc(100vh - 64px)",overflow:"auto"}},0!==(null===d||void 0===d?void 0:d.length)||T?z<0?o.a.createElement(Et,{channels:r,videos:d,settings:F,loading:T,maxPerChannel:F.videosPerChannel,maxVisible:L()?3:6,onSelect:Fe,onSave:l,onRefresh:ct}):o.a.createElement(dt,{videos:d,loading:T,maxPerChannel:F.videosPerChannel}):o.a.createElement(fe.a,{in:!0,timeout:1e3},o.a.createElement(me.a,{className:"".concat(t.container," expanded")},o.a.createElement(q.a,{component:"div",variant:"h5",color:"textSecondary",className:t.centered,style:{cursor:"default"}},o.a.createElement(Hn.a,{style:{fontSize:38,verticalAlign:"middle"}})," No videos available")))):o.a.createElement(fe.a,{in:!0,timeout:3e3},o.a.createElement(me.a,{className:t.container},o.a.createElement(q.a,{component:"div",variant:"h5",color:"textSecondary",className:t.centered,style:{cursor:"default"}},o.a.createElement(ie.a,{style:{fontSize:38,verticalAlign:"middle"}})," Start by typing a channel name in the search box"))))),o.a.createElement(In,{open:ne,onClose:function(){oe(!1)}}),o.a.createElement(Bn,{open:ce.isOpen,snackbarKey:ce.key,message:ce.message,icon:ce.icon,autoHideDuration:ce.autoHideDuration,showRefreshButton:ce.showRefreshButton,onClose:pe,onRefresh:ct}),o.a.createElement(kn,{message:null===ge||void 0===ge?void 0:ge.message,open:!!ge,onClose:function(){return Ee(null)}}))}function Fn(){var e=Object(_e.b)(Ze),t=Object(_e.b)(Xe),n=Object(_e.b)(Qe),a=o.a.useState(!1),i=Object(m.a)(a,2),r=i[0],l=i[1];function c(){return(c=Object(h.a)(d.a.mark((function a(){var o,i,r,c,s,u,h,f;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E("channels","settings","cache");case 2:r=a.sent,c=Object(m.a)(r,3),s=c[0],u=c[1],h=c[2],st.log("Storage data:",{channels:s,settings:u,cache:h}),u=u?Object(N.a)(Object(N.a)({},Ge),u):Ge,(null===(o=u)||void 0===o?void 0:o.autoClearRecentVideos)&&h&&(f=!1,Object.keys(h).forEach((function(e){h[e]=h[e].map((function(e){return e.isRecent&&(e.isRecent=!1,f=!0),e}))})),f&&C({cache:h})),e(s||[]),t(u),n(!(null===(i=u)||void 0===i?void 0:i.autoClearCache)&&h?h:{}),l(!0);case 14:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=o.a.useRef(!1);t.current||(e(),t.current=!0)}((function(){!function(){c.apply(this,arguments)}(),L()&&P("")})),o.a.createElement(Mn,{isReady:r})}var Kn=function(){return o.a.createElement(Ue.a,null,o.a.createElement(l.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/",component:Fn}),o.a.createElement(c.a,{path:"/background",component:F}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(Kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[192,1,2]]]);
//# sourceMappingURL=main.c13dd964.chunk.js.map